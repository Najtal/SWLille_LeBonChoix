function Cs(options){return this.options={},this.options.site_url=options.site_url,this.options.site_url_ssl=options.site_url_ssl,this.options.site_url_main=options.site_url_main,this.options.resource_url=options.site_url.replace(/https?:\/\//,"//"),this.options.fbAppId=options.fbAppId,this.options.login_page_path=options.login_page_path,this.options.fbUserData=options.fbUserData,this.options.youtubeKey=options.youtubeKey,this.comments={},this.pagers={},this.forms_list={},this.radios={},this.checkboxes={},this.watchedResizableTextareas=[],this.hoverDroppables=[],this.modules_list={},this.setupErrors(),this.tips={},this}function CsAuth(options){this._parent=options._parent}function CsAuthLinkedin(options){return this._parent=options._parent,this.appId=options.appId,this.popupWindow={},this}function CsAuthTwitter(options){return this._parent=options._parent,this.token_actor_id="undefined"!=typeof options.token_actor_id?options.token_actor_id:!1,this}function CsAuthFacebook(containerId,options){return containerId?(this._parent=options._parent,this.appId=options.appId,this.userData=options.userData,this.options=options,this.onLoad=options.onLoad||function(){},this.containerId=containerId,this.windowInit(),this.createScriptTag(),this):!1}function CsGeneralComment(object_id,object_type,options){this._parent=options._parent,this.options=options,this.options.side=this.options.side||"prepend",this.objectId=object_id,this.objectType=object_type,this.sendCallback=this.options.callback||function(response){},this.onHide=this.options.onHide||function(response){},this.textareaContainer=$("#"+this.options.textareaContainerId),this.enterkeypress=this.options.enterkeypress||!1,this.keepOnFocus=this.options.keepOnFocus||!1,this.url=this.options.url||!1;var self=this;switch(this.options.type){case"public":this.url=this._parent.options.site_url+"system/comments/ajax-add-public-comment";break;case"note":this.url=this._parent.options.resource_url+"account/control/ajax-add-note"}1==this.enterkeypress&&this.textareaContainer.bind("keypress",function(e){e&&13==e.keyCode&&self.send()})}function CsCommentsBlock(object_id,object_type,options){this._parent=options._parent,this.options=options,this.objectId=object_id,this.actorId=options.actorId||!1,this.objectType=object_type,this.type=this.options.type||"feed",this.container=$("#csComments_"+object_id+"_"+object_type),this.textareaContainer=this.container.find(".csCommentsTextarea"),this.textareaId=this.textareaContainer.attr("id"),this.options=options,this.onFocus=options.onFocus||function(){},this.onBlur=options.onBlur||function(){},this.options.width=this.options.width||284,this.options.height=this.options.height||18,this.options.expandMin=this.options.expandMin||0;var self=this;return this.textareaContainer&&(this._parent.components().input(this.textareaId,{width:this.options.width,height:this.options.height,resizable:!0,maxLength:1e3,stopFillOnLimit:!0,expandMin:this.options.height+this.options.expandMin}),self.textareaContainer.height(this.options.height),self.options.defaultTextareaText&&(self.textareaContainer.val(self.options.defaultTextareaText),self.textareaContainer.addClass("cs-input-field-design-default-text")),this.textareaContainer.bind("keydown",function(e){setTimeout(function(){self.onTextareaKeyPress(e)},1)}),this.textareaContainer.bind("focus",function(e){self.options.defaultTextareaText&&self.textareaContainer.val()==self.options.defaultTextareaText&&(self.textareaContainer.val(""),self.textareaContainer.removeClass("cs-input-field-design-default-text")),self.onFocus()}),this.textareaContainer.bind("blur",function(e){self.options.defaultTextareaText&&(self.textareaContainer.val()||(self.textareaContainer.val(self.options.defaultTextareaText),self.textareaContainer.addClass("cs-input-field-design-default-text"))),self.onBlur()})),this}function CsPager(options){this._parent=options._parent,this.containerId=options.containerId,this.options={},this.previousAnchor="",this.container=$("#"+this.containerId),this.options.defaultPage=options.defaultPage||"",this.options.currentUrl=options.currentUrl||"/",this.options.scrollTop=options.scrollTop||!1,this.options.scrollTarget=options.scrollTarget||"div",this.options.scrollTo=options.scrollTo||!1,this.options.minHeightAsDivId=options.minHeightAsDivId||!1,this.onScrollToBottom=options.onScrollToBottom||function(){},this.options.nextPage=options.nextPage||!1,this.options.nextPageAlt=options.nextPageAlt||!1,this.options.scrollId=options.scrollId||!1,this.options.minHeight=options.minHeight||100,this.options.anchors=options.anchors||!1,this.options.defaultAnchor=options.defaultAnchor||!1,this.options.keepAlive=options.keepAlive||!1,this.options.anchorPrefix=options.anchorPrefix||"",this.options.stopAppend=options.stopAppend||!1,this.options.onAnchorChange=options.onAnchorChange||function(){},this.options.afterLoad=options.afterLoad||function(){},this.options.beforeLoad="function"==typeof options.beforeLoad?options.beforeLoad:!1,this.options.noLoader=options.noLoader||!1,this.currentGoodHeight=0,this.options.div=options.div||!1,this.clearHash=options.clearHash||!1,this.options.onLoaderStart=options.onLoaderStart||function(){},this.options.onLoaderStop=options.onLoaderStop||function(){},this.options.onComplete=options.onComplete||function(){},this.options.loaderColspan=options.loaderColspan||!1,this.loading=!1,this.firstPageLoadedThatNotPushedState="",this.url="",this.firstLoad=!0;var self=this;this.anchorPrefixesList=[],this.options.anchorPrefix&&("[object Array]"===Object.prototype.toString.call(this.options.anchorPrefix)?(this.anchorPrefixesList=this.options.anchorPrefix,this.options.anchorPrefix=this.options.anchorPrefix[0]):this.anchorPrefixesList.push(this.options.anchorPrefix)),this.validateAnchorsOption(),this.validateAnchorPrefix(),this.onAnchorChange=this.options.onAnchorChange,this.onLoaderStart=this.options.onLoaderStart,this.onLoaderStop=this.options.onLoaderStop,this.onComplete=this.options.onComplete,this.options.scrollId&&("window"==this.options.scrollId?(this.options.keepAlive||$(window).unbind("scroll.pager"+this.containerId),$(window).bind("scroll.pager"+this.containerId,function(e){!self.loading&&$("#"+self.containerId).attr("id")&&$(window).scrollTop()+$(window).height()>=$("#"+self.containerId).outerHeight()&&(self.options.stopAppend||self.onScrollToBottom&&self.onScrollToBottom(e))})):($("#"+this.options.scrollId).unbind("scroll.pager"+this.containerId),$("#"+this.options.scrollId).bind("scroll.pager"+this.containerId,function(e){!self.loading&&$("#"+self.containerId).attr("id")&&$("#"+self.options.scrollId).scrollTop()+$("#"+self.options.scrollId).height()>=$("#"+self.containerId).outerHeight()&&(self.options.stopAppend||self.onScrollToBottom&&self.onScrollToBottom(e))}))),this.firstPageLoadedThatNotPushedState=location.href,this.options.minHeightAsDivId&&(this.minHeightDiv=$("#"+this.options.minHeightAsDivId)),this.currentGetRequest=!1,this.tempOptions={},this.options.anchors&&($(window).bind("hashchange",function(e){var hash=self.getAnchor();self.react(hash)}),"undefined"!=typeof window.onpopstate&&($(window).bind("popstate",function(event){var popped="state"in window.history&&null!==window.history.state;if(popped){if(event.originalEvent&&event.originalEvent.state&&event.originalEvent.state.hash){var hash=event.originalEvent.state.hash;hash=self.getAnchor(hash),self.react(hash)}}else"state"in window.history&&self.firstPageLoadedThatNotPushedState==location.href&&!self.firstLoad&&self.load(self.options.currentUrl.length>1?self.options.currentUrl:self.firstPageLoadedThatNotPushedState,{beforeLoad:self.options.beforeLoad,afterLoad:self.options.afterLoad});self.firstLoad=!1}),history.onpushstate=function(history,params){var hash=self.getAnchor(history.state.href);self.react(hash)}),$(function(){setTimeout(function(){self.firstLoad=!1},1e3)}))}function CsPopupsList(options){return this._parent=options._parent,this.list=[],this}function CsWindow(options){return this._parent=options._parent,this}function CsComponents(options){return this._parent=options._parent,this}function CsComponentsFileUploader(containerId,options){this._parent=options._parent,this.options={},this.options.url=options.url||"/account/files/ajax-file-upload",this.options.removeUrl=options.removeUrl||this._parent._parent.options.resource_url+"account/files/ajax-file-delete",this.options.multi=options.multi||!1,this.options.dark=options.dark||!1,this.options.extensions=options.extensions||"*.*",this.options.useButton=options.useButton||!1,this.options.removable=options.removable||!1,this.options.height=options.height||!1,this.options.width=options.width||!1,this.options.removeText=options.removeText||"Realy Remove?",this.options.allowMultiple=options.allowMultiple||!1,this.fileId=options.fileId||!1,this.options.data=options.data||{},this.options.title=options.title||"Choose a File",this.options.defaultTitle=options.defaultTitle||"Choose a File",this.options.size=options.size||"",this.options.color=options.color||"",this.options.version=options.version||1,this.options.buttonWidth=options.buttonWidth||"",this.onClearQueue=options.onClearQueue||function(event){},this.options.maxSize=options.maxSize||!1,this.onSelect=options.onSelect||function(event,ID,fileObj){},this.onProgress=options.onProgress||function(event,ID,fileObj,data){},this.onComplete=options.onComplete||function(event,ID,fileObj,response,data){},this.onDelete=options.onDelete||function(){},this.onAllComplete=options.onAllComplete||function(event,data){},this.onSelectOnce=options.onSelectOnce||function(event,data){},this.containerId=containerId,this.container=$("#"+containerId),this.container.addClass("cs-picture-uploader"),this.zoneContainer=$("<div/>",{"class":"cs-file-uploader"}).insertAfter(this.container),this.options.buttonWidth&&2==this.options.version&&this.zoneContainer.css("width",this.options.buttonWidth),this.container.appendTo(this.zoneContainer);var self=this;return this.options.useButton&&(this.buttonContainer=$("<span/>",{id:this.containerId+"_button"}).appendTo(this.zoneContainer),this.button=this._parent.button(this.containerId+"_button",{title:this.options.title,color:this.options.color,version:this.options.version,size:this.options.size,fullWidth:!0,loaderUrl:this._parent._parent.options.site_url+"images/components/cs-ajax-loader-circle-dark2-small.gif"}),this.zoneContainer.hover(function(){self.button.captionContainer.addClass("hover")},function(){self.button.captionContainer.removeClass("hover")}),this.options.removable&&(2==this.options.version?(this.crossContainer=$("<span/>",{"class":"delete-uploaded-file"}).appendTo(this.zoneContainer),$("<i/>",{"class":"fa fa-close"}).appendTo(this.crossContainer)):(this.crossContainer=$("<span/>",{"class":"cross r8"}).appendTo(this.zoneContainer),$("<span/>",{}).appendTo(this.crossContainer)),this.crossContainer.bind("click",function(e){self._parent.confirm({title:self.options.removeText,version:self.options.version,buttons:[{text:"Delete",onClick:function(){},className:"button2",onClick:function(){self.deleteFile(),csPopup.close()}},{text:"Cancel",onClick:function(){csPopup.close()}}]})}),this.fileId||this.hideCross())),$("<div/>",{"class":"cl"}).insertAfter(this.zoneContainer),this.bytesTotal=0,$(document).ready(function(){self.container.uploadify({uploader:"/plugins/uploadify/uploadify.swf",script:self.options.url,scriptData:self.options.data,cancelImg:"/plugins/uploadify/cancel.png",folder:"/files/all",wmode:"transparent",auto:!0,multi:self.options.multi,hideButton:!0,height:self.options.height||self.button.container.height(),fileExt:self.options.extensions,sizeLimit:1e3*self.options.maxSize,fileDesc:"All files",fileDataName:"imgs_for_upload",width:self.options.width||self.button.container.width(),queueId:"csPrUploadQueue",onClearQueue:self.onClearQueue,onSelect:function(event,ID,fileObj){self.onSelectDefault(event,ID,fileObj)},onProgress:self.onProgress,onComplete:function(event,ID,fileObj,response,data){self.onCompleteDefault(event,ID,fileObj,response,data)},onAllComplete:function(event,data){self.onAllCompleteDefault(event,data)},onSelectOnce:function(event,data){self.onSelectOnce(event,data)},onUploadStart:function(file){}}),self.container.addClass("flash-button")}),this}function CsComponentsExpandable(containerId,options){if(this.options=options||{},this._parent=this.options._parent,!containerId)return!1;if("string"==typeof containerId)this.container=$("#"+containerId);else{if("undefined"==typeof containerId)return!1;this.container=containerId}if(this.options.height=this.options.height||parseInt(this.container.css("height").replace("px",""))||0,this.options.realHeight=this.getRealHeight(),this.options.realHeight<=this.options.height)return this;this.container.addClass("cs-expandable"),this.arrowContainer=jQuery("<div/>",{"class":"cs-expandable-text",title:"Show more...",text:"more..."}).insertAfter(this.container),this.arrowContainer.css("margin-bottom",this.container.css("margin-bottom")),this.container.css("margin-bottom","0px");var self=this;this.arrowContainer.bind("click",function(){self.container.height()==self.options.height?self.expand():self.collapse()})}function CsComponentsConfirm(options){this.options=options||{},this._parent=this.options._parent,this.options.text=this.options.text||"",this.options.title=this.options.title||"",this.options.id=this.options.id||"cs-confirm-"+Math.floor(10000001*Math.random()),this.options.buttons=this.options.buttons||[],this.options.showClose=this.options.showClose||!1,this.options.onClose=this.options.onClose||function(){},this.options.onPopupClose=this.options.onPopupClose||function(){},this.container={},this.footerContainer={},this.headerContainer={},this.layoutContainer={},this.buttons=[],this.version=this.options.version||1,this.generateHtml();var self=this;csPopup.display(this.container,{html:!0,version:this.version,onClose:function(){self.options.onPopupClose()}})}function CsComponentsAlert(options){options||(options={}),this.options={},this.options.type=options.type||"ok",this.options.title=options.title||!1,this.options.text=options.text||"",this.options.autoclose_style=options.autoclose_style||!1,this.options.onClick=options.onClick||function(){},this.options.autoclose=options.autoclose||!1,this.options.autocloseTime=options.autocloseTime||1e3,this.options.method=options.method||("err"==this.options.type?"extend":"new"),this.options.fitText=options.fitText||!1,this.options.autoclose&&"extend"!=options.method&&(this.options.method="new"),this.options.title||(this.options.title="ok"==this.options.type?"Success":"Error"),this.onButtonClick=this.options.onClick,this.container={},this.headerContainer={},this.footerContainer={},this.layoutContainer={},this.buttonContainer={},this.openPopup()}function CsComponentsProfileMenu(id,options){this.container=$("#"+id),this.containerId=id,this.list=this.container.find("ul.csProfileMenuList"),this.currentItem=!1,this.items=[];var self=this;this.list.find("li").each(function(index){var data=$(this).data("item");self.items.push(data.type)})}function CsComponentsSlidePanel(options){this.defaultOptions={},this.defaultOptions.width=options.width||500,this.defaultOptions.height=options.height||114,this.defaultOptions.autoclose=options.autoclose||!1,this.defaultOptions.autocloseTime=options.autocloseTime||1e3,this.defaultOptions.hideCross=options.hideCross||!1,this.defaultOptions.postObject=options.postObject||{},this.defaultOptions.onClose=options.onClose||function(el){},this.options=jQuery.extend({},this.defaultOptions);var self=this;$(document).keyup(function(e){self.closeOnEscape(e)}),$(window).bind("scroll",function(e){self.onWindowScroll(e)})}function CsComponentsTip(targetId,options){if(!targetId)return!1;if(this.defaultOptions=$.extend({},options),this.options=options,this.options.template&&(this.setTemplate(this.options.template),this.options=$.extend(this.options,this.defaultOptions)),this.options.noCache=options.noCache||!1,this.opened=!1,this._parent=this.options._parent,this.targetId=targetId,this.containerId="csTip"+Math.floor(10000001*Math.random()),this.container=!1,this.beforeShow=this.options.beforeShow||function(){},this.onClose=this.options.onClose||function(){},this.targetContainer=$("#"+this.targetId),this.arrowOutlineMargin=this.options.arrowOutlineMargin||11,this.inlineVirtualPadding=this.options.inlineVirtualPadding||15,this.arrowMaxDimention=20,this.showLoader=this.options.showLoader||!1,this.showOn=this.options.showOn!==!1?this.options.showOn?this.options.showOn:"click":!1,this.hideOn=this.options.hideOn!==!1?this.options.hideOn?this.options.hideOn:"click":!1,this.options.groupClass=this.options.groupClass||!1,this.options.showDelay=this.options.showDelay||1,this.options.hideDelay=this.options.hideDelay||1,this.showTimeout=!1,this.hideTimeout=!1,this.loaderTimeout=!1,this.response=!1,!this.targetContainer)return!1;var self=this;return"mouseover"==this.showOn&&(this.targetContainer.attr("title",""),this.targetContainer.bind("mouseover",function(e){self.showTimeout=setTimeout(function(){self.closeTipsGroup(e),self.show(self.options)},self.options.showDelay)}),this.targetContainer.bind("mouseout",function(e){clearTimeout(self.showTimeout)})),"click"==this.showOn&&(this.targetContainer.attr("title",""),this.targetContainer.bind("click",function(e){self.closeTipsGroup(e),self.show(self.options)}),this.targetContainer.bind("mouseout",function(e){clearTimeout(self.showTimeout)})),"mouseout"==this.hideOn&&(this.targetContainer.bind("mouseout",function(e){"undefined"==typeof hideTimeout&&(self.hideTimeout=setTimeout(function(){self.close()},self.options.hideDelay))}),this.targetContainer.bind("mouseover",function(e){clearTimeout(self.hideTimeout)})),$(document).bind("click",function(e){self.onWindowObjectClick(e)}),this}function CsComponentsAutocomplete(id,options){options=options||{},options.url=options.url||null,options.data="object"==typeof options.data&&options.data.constructor==Array?options.data:null,options.inputClass=options.inputClass||"cs-autocomplete-input",options.resultsClass=options.resultsClass||"cs-autocomplete-results",options.lineSeparator=options.lineSeparator||"\n",options.cellSeparator=options.cellSeparator||"|",options.minChars=options.minChars||1,options.delay=options.delay||400,options.name=options.name||!1,options.id=options.id||!1,options.matchCase=options.matchCase||0,options.matchSubset=options.matchSubset||1,options.matchContains=options.matchContains||0,options.cacheLength=options.cacheLength||0,options.mustMatch=options.mustMatch||0,options.defaultText=options.defaultText||!1,options.value=options.value||"",options.text=options.text||"",options.extraParams=options.extraParams||{},options.loadingClass=options.loadingClass||"ac_loading",options.selectFirst=options.selectFirst||!1,options.color=options.color||!1,options.size=options.size||!1,options.selectText=options.selectText||!1,options.selectOnly=options.selectOnly||!1,options.allowEmail=options.allowEmail||!1,options.allowText=options.allowText||!1,options.onChange=options.onChange||function(){},options.afterClear=options.afterClear||function(){},options.onClear=options.onClear||function(){},options.onBlur=options.onBlur||function(){},options.maxItemsToShow=options.maxItemsToShow||-1,options.autoFill=options.autoFill||!1,options.width=parseInt(options.width,10)||0,options.autocompleteWith=parseInt(options.autocompleteWith,10)||0,this.options=options,this.autocomplete=!1,this.container=!1;var input=document.getElementById(id);this.input=$(input),options._main=this,options.defaultText&&(options.fieldOuterContainer=$("<span/>",{"class":"cs-autocomplete-placeholder-outer"}),options.color&&options.fieldOuterContainer.addClass("cs-autocomplete-placeholder-outer-color-"+options.color),options.size&&options.fieldOuterContainer.addClass("cs-autocomplete-placeholder-outer-size-"+options.size),$(input).wrap(options.fieldOuterContainer),options.placeholderText=$("<span/>",{"class":"cs-autocomplete-placeholder-inner"}).insertAfter($(input)).bind("click",function(e){$(input).focus()}),options.placeholderText.html(options.defaultText),options.value&&$(options.placeholderText).css("display","none")),options.selectOnly&&(this.crossContainer=$("<span/>",{"class":"cs-field-cross r3",title:cs.txt("autocomplete :clear value")}).insertAfter($(input)),$("<span/>",{}).appendTo(this.crossContainer),this.crossContainer.mouseover(function(){$(input).addClass("cs-input-field-design-hover")}),this.crossContainer.mouseout(function(){$(input).removeClass("cs-input-field-design-hover")})),this.autocomplete=new CsComponentsAutocomplete.prototype.autocomplete(input,options),this.getValue=this.autocomplete.getValue,this.setValue=this.autocomplete.setValue,this.clearValue=this.autocomplete.clearValue,this.focus=function(){setTimeout(function(){$(input).focus()},1)};var self=this;return this.crossContainer&&this.crossContainer.bind("click",function(e){self.clearValue(),options.afterClear(),$(input).focus()}),this}function CsComponentsDisplayError(containerId,value){this.containerId=containerId,this.container=$("#"+containerId),this.value=value,this.tickWrapper=$("<span/>",{"class":"cs-fieldmax-box",id:"cs-fieldmax-box"+this.containerId}).insertAfter(this.container),this.value?this.tickWrapper.removeClass("cs-fieldmax-box-negative").addClass("cs-fieldmax-box-positive"):this.tickWrapper.removeClass("cs-fieldmax-box-positive").addClass("cs-fieldmax-box-negative")}function CsComponentsInput(containerId,options){if(this.options=options||{},this._parent=this.options._parent,this.containerId=containerId,this.options.stopRedesign=this.options.stopRedesign?this.options.stopRedesign:!1,this.options.width=this.options.width?this.options.width:!1,this.options.height=this.options.height?this.options.height:!1,this.options.maxLength=this.options.maxLength?this.options.maxLength:!1,this.options.notShowMaxLength=this.options.notShowMaxLength?this.options.notShowMaxLength:!1,this.options.showTick=this.options.showTick?this.options.showTick:!1,this.options.defaultText=this.options.defaultText?this.options.defaultText:!1,this.options.resizable=this.options.resizable?this.options.resizable:!1,this.options.onFocus=this.options.onFocus?this.options.onFocus:function(){},this.options.onPaste=this.options.onPaste?this.options.onPaste:function(){},this.options.onBlur=this.options.onBlur?this.options.onBlur:function(){},this.options.onEnter=this.options.onEnter?this.options.onEnter:function(){},this.options.name=this.options.name?this.options.name:"",this.options.color=this.options.color?this.options.color:!1,this.options.size=this.options.size?this.options.size:!1,this.options.customClassName=this.options.customClassName?this.options.customClassName:"",this.options.onKeyDown=this.options.onKeyDown?this.options.onKeyDown:function(){},this.options.expandMax=this.options.expandMax?this.options.expandMax:!1,this.options.expandMin=this.options.expandMin?this.options.expandMin:this.options.height,this.options.disabled=this.options.disabled?this.options.disabled:!1,this.options.cropRight=this.options.cropRight?this.options.cropRight:!1,this.options.cropLeft=this.options.cropLeft?this.options.cropLeft:!1,this.options.numberInput=this.options.numberInput?this.options.numberInput:!1,this.options.onlyNumbers=this.options.onlyNumbers?this.options.onlyNumbers:!1,this.options.stopFillOnLimit=this.options.stopFillOnLimit?this.options.stopFillOnLimit:!1,this.options.formatNumeric=this.options.formatNumeric?this.options.formatNumeric:!1,this.focusFunc=this.options.onFocus,this.blurFunc=this.options.onBlur,this.pasteFunc=this.options.onPaste,this.clickFunc=this.options.onClick||function(){},this.enterFunc=this.options.onEnter,this.keepOnFocus=this.options.keepOnFocus||!1,this.keyDownFunc=this.options.onKeyDown,this.maxLength={},this.container=$("#"+this.containerId),0==this.container.length)return console.log("could not load component for #"+this.containerId),!1;this.options.name&&this.container.attr("name",this.options.name),""!=this.options.customClassName&&this.container.addClass(this.options.customClassName),this.container.addClass("cs-input-field"),this.options.stopRedesign||(this.container.addClass("cs-input-field-design"),this.options.color&&this.container.addClass("cs-input-field-color-"+this.options.color),this.options.size&&this.container.addClass("cs-input-field-size-"+this.options.size),this.options.numberInput&&this.container.css("text-align","right"),this.container.addClass("nr"),this.options.defaultText&&(this.container.val()&&" "!=this.container.val()||this.container.addClass("cs-input-field-design-default-text"))),this.options.cropRight&&this.container.addClass("cs-input-field-design-crop-right"),this.options.cropLeft&&this.container.addClass("cs-input-field-design-crop-left"),this.options.defaultText&&(this.container.val()&&" "!=this.container.val()||this.container.val(this.options.defaultText)),this.options.width&&this.container.width(this.options.width),this.options.height&&this.container.height(this.options.height);var self=this;if(this.options.stopRedesign||(this.container.bind("focus",function(e){self.container.addClass("cs-input-field-design-focused"),self.focusFunc(e),self.options.defaultText&&self.container.val()==self.options.defaultText&&(self.options.keepOnFocus||self.container.val(""),self.container.removeClass("cs-input-field-design-default-text"))}),this.container.bind("blur",function(e){self.container.removeClass("cs-input-field-design-focused"),self.blurFunc(),self.options.defaultText&&(" "!=self.container.val()&&self.container.val()||self.putDefaultText())}),this.container.bind("paste",function(e){setTimeout(function(){self.pasteFunc()},10)}),this.container.bind("click",function(e){self.clickFunc()})),this.options.disabled&&this.disable(),this.container.bind("keypress",function(e){e&&13==e.keyCode&&self.enterFunc(self.container.val(),e)}),this.options.maxLength){this.maxLength=this._parent.getInputMaxLength(this.containerId,{maxLength:this.options.maxLength,showTick:this.options.showTick,_parentInput:this});var isTextArea="textarea"==this.container[0].nodeName.toLowerCase();if(isTextArea){var maxLengthContainerHeight=Number(this.maxLength.countContainer.height());this.container.css("padding-bottom",parseInt(this.container.css("padding-bottom"))+maxLengthContainerHeight),this.container.height(Number(this.container.height())-maxLengthContainerHeight)}else{var maxLengthContainerWidth=Number(this.maxLength.countContainer.width());this.container.css("padding-right",parseInt(this.container.css("padding-right"))+maxLengthContainerWidth),this.container.width(Number(this.container.width())-maxLengthContainerWidth)}}this.options.notShowMaxLength&&(this.maxLength.countContainer.css("display","none"),this.maxLength.countContainer.css("width","0")),this.formatNumber=function(preserveCursorPos){"undefined"==typeof preserveCursorPos&&(preserveCursorPos=!0);var val=self.getValue();if(n=val.replace(/,/g,""),!isNaN(parseFloat(n))&&isFinite(n)){var parts=n.toString().split(".");parts[0]=parts[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");var result=parts.join(".");if(result!=val&&","!=val.charAt(val.length-1)){var diff=result.length-val.length,pos=self.getSelection();self.setValue(parts.join(".")),preserveCursorPos&&self.setSelection(pos.end+diff,pos.end+diff)}}},this.container.bind("keypress",function(e){if(self.options.onlyNumbers){var evt=e||window.event,keycode=evt.keyCode||evt.which,specialkeys=[46,8,9,27,13];if(-1!=specialkeys.indexOf(keycode))return!0;if(65==keycode&&!0===evt.ctrlKey)return!0;if(keycode>=35&&39>=keycode)return!0;if(navigator.platform.toUpperCase().indexOf("MAC")>=0&&e.metaKey&&97==keycode)return!0;key=String.fromCharCode(keycode);var regex=/[0-9]|\.|,|\s/;return regex.test(key)?!0:(evt.returnValue=!1,evt.preventDefault&&evt.preventDefault(),!1)}}),this.container.bind("keydown",function(e){self.options.stopFillOnLimit&&self.maxLength.getCharactersLeftNum()<=0&&self.container.val(self.container.val().substring(0,self.options.maxLength-1)),self.options.formatNumeric&&("undefined"!=typeof self.formatTimeout&&clearTimeout(self.formatTimeout),self.formatTimeout=setTimeout(self.formatNumber,200)),setTimeout(function(){self.keyDownFunc(e)},1)}),this.container.bind("keyup",function(e){self.options.stopFillOnLimit&&self.maxLength.getCharactersLeftNum()<=0&&self.container.val(self.container.val().substring(0,self.options.maxLength-1))}),this.options.resizable&&this.options.height&&(this.resizeHandler=this._parent.resizableTextarea(this.containerId,{expandMin:this.options.expandMin,expandMax:this.options.expandMax}))}function CsComponentsInputMaxLength(containerId,options){if(this.options=options||{},this._parent=this.options._parent,this.containerId=containerId,this.options.maxLength=this.options.maxLength?this.options.maxLength:"160",this.container=$("#"+this.containerId),0==this.container.length)return console.log("could not load component for #"+this.containerId),!1;this.fieldOuterContainer=$("<span/>",{"class":"cs-field-length-count-outer"}),this.container.wrap(this.fieldOuterContainer),this.countContainer=$("<span/>",{"class":"cs-field-length-count",id:"cs-field-length-count-"+this.containerId}).insertAfter(this.container);var leftValue=this.options.maxLength;this.container.val()!=this.options._parentInput.options.defaultText&&(leftValue=this.getCharactersLeftNum()),this.updateCountContainer(leftValue);var self=this;return this.container.bind("keydown paste",function(e){setTimeout(function(){var charactesLeft=self.getCharactersLeftNum();self.updateCountContainer(charactesLeft)},1)}),this}function CsComponentsRequestBlock(containerId,options){if(this.options=options||{},this._parent=this.options._parent,this.containerId=containerId,this.options.requestId=this.options.requestId||!1,this.options.requestStatus=this.options.requestStatus||!1,this.options.acceptButtonText=this.options.acceptButtonText||"Accept",this.options.ignoreButtonText=this.options.ignoreButtonText||"Ignore",this.options.version=this.options.version||1,this.options.requestId&&this.options.requestStatus)if(this.container=$("#"+this.containerId),this.options.requestToMe){this.acceptButtonId=this.containerId+"AcceptButton",this.ignoreButtonId=this.containerId+"IgnoreButton",this.acceptedButtonId=this.containerId+"AcceptedButton",this.ignoredButtonId=this.containerId+"IgnoredButton",$("<span/>",{id:this.acceptButtonId}).appendTo(this.container),$("<span/>",{id:this.ignoreButtonId}).appendTo(this.container),$("<span/>",{id:this.acceptedButtonId}).appendTo(this.container),$("<span/>",{id:this.ignoredButtonId}).appendTo(this.container);var self=this;this.acceptButtonContainer=this._parent.button(this.acceptButtonId,{title:this.options.acceptButtonText,color:"green",width:95,version:this.options.version,loaderUrl:this._parent._parent.options.site_url+"images/components/cs-ajax-loader-circle-white-small.gif",onClick:function(e){self.respondRequest("accepted"),this.loading?this.hideLoader():this.showLoader()}}),this.acceptButtonContainer.container.css("margin-right","5px"),this.ignoreButtonContainer=this._parent.button(this.ignoreButtonId,{title:this.options.ignoreButtonText,color:"grey",width:90,version:this.options.version,onClick:function(e){self.respondRequest("ignored"),this.loading?this.hideLoader():this.showLoader()},loaderUrl:this._parent._parent.options.site_url+"images/components/cs-ajax-loader-circle-dark-small.gif"}),this.acceptedButtonContainer=this._parent.button(this.acceptedButtonId,{title:"Accepted",color:"grey",customClassName:"",width:190,version:this.options.version}),this.ignoredButtonContainer=this._parent.button(this.ignoredButtonId,{title:"Ignored",color:"grey",width:190,disabled:!0,version:this.options.version}),"new"==this.options.requestStatus?(this.acceptedButtonContainer.hide(),this.ignoredButtonContainer.hide()):"accepted"==this.options.requestStatus?(this.acceptButtonContainer.hide(),
this.ignoreButtonContainer.hide(),this.ignoredButtonContainer.hide()):"ignored"==this.options.requestStatus&&(this.acceptedButtonContainer.hide(),this.acceptButtonContainer.hide(),this.ignoreButtonContainer.hide())}else"accepted"==this.options.requestStatus?(this.acceptedButtonId=this.containerId+"AcceptedButton",$("<span/>",{id:this.acceptedButtonId}).appendTo(this.container),this.acceptedButtonContainer=this._parent.button(this.acceptedButtonId,{title:"Accepted",color:"grey",width:190,version:this.options.version})):(this.pendingButtonId=this.containerId+"PendingButton",$("<span/>",{id:this.pendingButtonId}).appendTo(this.container),this.pendingButtonContainer=this._parent.button(this.pendingButtonId,{title:"Awaiting response...",color:"grey",width:190,disabled:!0,version:this.options.version}))}function CsComponentsTitleTips(query,options){query||(query="body .cs-title-tip[title]"),query instanceof jQuery||(query=$(query)),query.each(function(k,v){var title=$(v).attr("title");$(v).attr("title",title.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))}),query.qtip({content:{text:!1},position:{my:"bottom center",at:"top center"},style:{def:!1,tip:{width:10,height:5,border:1,corner:"bottom center"},classes:"qtip-box"}})}function CsComponentsListTips(identifier,options){this.options=options||{},this._parent=this.options._parent;var self=this;if(identifier instanceof jQuery)var obj=identifier;else var obj=$(identifier);obj.each(function(i){var listOptions={};listOptions=jQuery.extend({},options);var rez;(rez=$(this).data("options"))&&(listOptions=jQuery.extend(listOptions,rez)),$(this).qtip({content:{text:cs.txt("Generic loading")},events:{render:function(){var tip=$(this);if("undefined"!=typeof listOptions.url)var url=listOptions.url;else if("undefined"!=typeof listOptions.item_id&&"undefined"!=typeof listOptions.item_type)var item_id=listOptions.item_id,item_type=listOptions.item_type,url=self._parent._parent.options.site_url+"items/"+item_type+"/"+item_id+"/voters";var data={};"undefined"!=typeof listOptions.exclude&&(data.exclude=listOptions.exclude),$.post(url,data,function(response){response&&"undefined"!=typeof response.data&&(tip.hide(),tip.qtip("api").set("content.text",response.data.join("<br/>")),tip.qtip("reposition"),tip.show())},"json")}},position:{my:"bottom center",at:"top center"},style:{def:!1,tip:{width:10,height:5,corner:"bottom center"},classes:"qtip-box"}})})}function CsComponentsHiddenTips(query,options){options||(options={}),this.options={},this.options.tipCorner=options.tipCorner||"bottomMiddle",this.options.targetCorner=options.targetCorner||"topMiddle",this.options.corner=options.corner||"bottomMiddle",this.options.showDelay=options.showDelay||1,options.showOn?(this.options.target=!1,this.options.event=options.showOn):(this.options.target=!1,this.options.event="mouseover"),this.options.show=options.corner||"bottomMiddle",query||(query="body .cs-hidden-tip");var self=this;$(query).each(function(){$(this).qtip({content:{text:$(this).find(".cs-hidden-tip-text")},position:{corner:{tooltip:self.options.tipCorner,target:self.options.targetCorner}},show:{delay:self.options.showDelay,effect:{type:"fade",length:0},when:{target:self.options.target,event:self.options.event}},hide:{delay:1,effect:{type:"fade",length:0}},style:{tip:{size:{x:11,y:6},corner:self.options.corner},border:{width:0,color:"transparent"},background:!1,color:!1,classes:{tooltip:"off-title-qtip"}}})})}function CsComponentsResizableTextarea(id,options){if(this.containerId=id,this.options=options||{},this._parent=this.options._parent,this._parentInput="undefined"!=typeof this.options._parentInput?this.options._parentInput:!1,this.hasCounter=!1!==this._parentInput&&"undefined"!=typeof this._parentInput.maxLength&&"undefined"!=typeof this._parentInput.maxLength.countContainer,this.options.expandMin=options.expandMin||28,this.options.expandMax=options.expandMax||300,"string"==typeof this.containerId)this.container=$("#"+this.containerId);else{if("undefined"==typeof this.containerId)return!1;this.container=this.containerId}this.hiddenContainer=$("<div />",{}).insertAfter(this.container),this.container.css("overflow","hidden"),this.boxSizing=this.container.css("box-sizing")||this.container.css("-moz-box-sizing")||!1,this.boxSizingPrefix=this.container.css("-moz-box-sizing")?"-moz-":"",this.hiddenCss={position:"absolute","font-family":this.container.css("font-family"),"word-wrap":"break-word","white-space":"pre-wrap",display:"none","padding-top":this.container.css("padding-top"),"padding-bottom":this.container.css("padding-bottom"),"padding-left":this.container.css("padding-left"),"border-top-style":"solid","border-bottom-style":"solid","border-left-style":"solid","border-right-style":"solid","border-top-color":"#000000","border-bottom-color":"#000000","border-left-color":"#000000","border-right-color":"#000000","padding-right":this.container.css("padding-right"),"border-top-width":this.container.css("border-top-width"),"border-bottom-width":this.container.css("border-bottom-width"),"border-left-width":this.container.css("border-left-width"),"border-right-width":this.container.css("border-right-width"),"font-size":this.container.css("font-size"),"line-height":this.container.css("line-height")},this.boxSizing&&(this.hiddenCss[this.boxSizingPrefix+"box-sizing"]=this.boxSizing),this.hiddenContainer.css(this.hiddenCss);var self=this;$(window).bind("resize",function(e){self.setHiddenContainerWidth()}),this.watchHiddenParents(),this.container.off("keydown.resizable paste.resizable").on("keydown.resizable paste.resizable",function(e){triggerResize=!0,"undefined"!=typeof self.options.ignoreEnterKey&&self.options.ignoreEnterKey&&(13!=e.keyCode||e.shiftKey||(triggerResize=!1)),triggerResize&&setTimeout(function(){self.keyDownEvent(self.container)},1)}),setTimeout(function(){self.resizeTextarea()},1)}function CsComponentsSortable(id,options){this.id=id,this.options=options||{},this._parent=this.options._parent,this.site_url=this._parent._parent.options.site_url,this.tag=this.options.tag||"span",this.sort=this.options.sort||!1,this.order=this.options.order||"DESC",this.container="#"+this.id,this.containerElements=$("#"+this.id+" "+this.tag+".sortable"),this.options.iconHoverUrl2=this.options.iconUrl2||this.options.iconHoverUrl,this.options.iconHoverUrl=this.options.iconUrl||this.options.iconHoverUrl,"ASC"==this.order?this.arrow=this.options.iconHoverUrl:"DESC"==this.order&&(this.arrow=this.options.iconHoverUrl2),this.options.iconTop=this.options.iconTop||0,this.options.iconLeft=this.options.iconLeft||0,(this.options.iconUrl||this.options.useIcons)&&$("#sort_"+this.sort).after('<img src="'+this.arrow+" />");var self=this;this.containerElements.bind("click",function(e){self.onElementClick(e)})}function CsComponentsButton(id,options){if(this.options=options||{},this.container={},id instanceof jQuery?(this.container=id,this.id=this.container.attr("id")?this.container.attr("id"):"csButton"+Math.floor(100000001*Math.random()),this.container.attr("id",this.id)):(this.container=$("#"+id),this.id=id),this.container.addClass(this.options.className||"cs-button"),this.options.customClassName&&this.container.addClass(this.options.customClassName),this.options.iconUrl=this.options.iconUrl||!1,this.options.iconMirror=this.options.iconMirror||!1,this.options.iconHoverUrl=this.options.iconHoverUrl||this.options.iconUrl,this.options.iconTop=this.options.iconTop||0,this.options.iconLeft=this.options.iconLeft||0,this.options.iconHoverTop=this.options.iconHoverTop||this.options.iconTop,this.options.iconHoverLeft=this.options.iconHoverLeft||this.options.iconLeft,this.options.iconTop=-1*this.options.iconTop,this.options.iconLeft=-1*this.options.iconLeft,this.options.iconHoverTop=-1*this.options.iconHoverTop,this.options.iconHoverLeft=-1*this.options.iconHoverLeft,this.options.dark=this.options.dark||!1,this.options.size=this.options.size||!1,this.options.color=this.options.color||!1,this.options.cropLeftBorder=this.options.cropLeftBorder||!1,this.options.cropRightBorder=this.options.cropRightBorder||!1,this.options.staticLeftBorder=this.options.staticLeftBorder||!1,this.options.staticRightBorder=this.options.staticRightBorder||!1,this.options.title=this.options.title||"",this.options.htmlTitle=this.options.htmlTitle||"",this.options.captionTitleAttr=this.options.captionTitleAttr||!1,this.options.onClick=this.options.onClick||function(e){},this.options.onMouseOver=this.options.onMouseOver||function(e){},this.options.onMouseOut=this.options.onMouseOut||function(e){},this.options.loaderUrl=this.options.loaderUrl||!1,this.options.disabled=this.options.disabled||!1,this.options.DropWidth=this.options.DropWidth||!1,this.options.width=this.options.width||!1,this.options.arrowLeft=this.options.arrowLeft||!1,this.loading=!1,"red"==this.options.color&&(this.options.dark=!0),this.onMouseOver=this.options.onMouseOver,this.onMouseOut=this.options.onMouseOut,this.options.disabled&&(this.container.addClass("cs-button-disabled"),this.options.customClassName&&this.container.addClass(this.options.customClassName+"-disabled")),this.options.size&&this.container.addClass("cs-button-size-"+this.options.size),this.options.color&&(this.options.dark||this.container.addClass("cs-button-color-"+this.options.color)),this.options.dark&&(this.container.addClass("cs-button-dark"),this.options.disabled&&this.container.addClass("cs-button-dark-disabled")),this.options.cropLeftBorder&&this.container.addClass("cs-button-crop-left"),this.options.staticLeftBorder&&this.container.addClass("cs-button-static-left"),this.options.cropRightBorder&&this.container.addClass("cs-button-crop-right"),this.options.staticRightBorder&&this.container.addClass("cs-button-static-right"),this.options.loaderUrl&&(this.loaderContainer=$("<span/>",{"class":"loader"}).appendTo(this.container),this.loaderContainer.css("background-image","url("+this.options.loaderUrl+")")),this.captionContainer=$("<span/>",{"class":"caption"}).prependTo(this.container),this.captionTextContainer=$("<span/>",{"class":"caption-text"}).appendTo(this.captionContainer),this.options.captionTitleAttr&&(this.captionContainer.attr("title",this.options.captionTitleAttr),this.captionContainer.addClass("cs-title-tip")),this.options.htmlTitle?this.captionTextContainer.html(this.options.title):"&nbsp;"!=this.options.title?this.captionTextContainer.text(this.options.title):(this.captionTextContainer.html(this.options.title),this.container.addClass("cs-button-icon-only")),this.onElementClickTemp=this.options.onClick,this.options.iconUrl&&(this.captionContainer.addClass("caption-with-icon"),this.options.iconMirror&&this.captionContainer.addClass("caption-with-icon-mirror"),this.captionIconContainer=$("<span/>",{"class":"caption-icon"}).appendTo(this.captionContainer),this.captionIconContainer.css("background-image","url("+this.options.iconUrl+")"),this.captionIconContainer.css("background-position",this.options.iconLeft+"px "+this.options.iconTop+"px")),this.options.arrowLeft&&(this.captionContainer.addClass("caption-with-arrow"),this.captionIconContainer=$("<span/>",{"class":"caption-arrow"}).appendTo(this.captionContainer)),this.options.dropWidth&&(this.captionContainer.width(this.options.dropWidth-40),this.container.width(this.options.dropWidth)),this.options.width){var innerPaddingLeft="undefined"!=typeof this.captionContainer.css("padding-left")?parseInt(this.captionContainer.css("padding-left").replace("px","")):0,innerPaddingRight="undefined"!=typeof this.captionContainer.css("padding-right")?parseInt(this.captionContainer.css("padding-right").replace("px","")):0,innerBorderLeft="undefined"!=typeof this.captionContainer.css("border-left-width")?parseInt(this.captionContainer.css("border-left-width").replace("px","")):0,innerBorderRight="undefined"!=typeof this.captionContainer.css("border-right-width")?parseInt(this.captionContainer.css("border-right-width").replace("px","")):0;this.captionContainer.width(this.options.width-innerPaddingLeft-innerPaddingRight-innerBorderLeft-innerBorderRight),this.container.width(this.options.width)}this.options.innerWidth&&(this.captionContainer.innerWidth(this.options.innerWidth),this.captionContainer.outerWidth(this.options.innerWidth),this.container.outerWidth(this.options.innerWidth));var self=this;this.container.bind("mouseover",function(e){self.options.disabled||(self.onMouseOver(e),(self.options.iconHoverTop!=self.options.iconTop||self.options.iconHoverLeft!=self.options.iconLeft)&&self.changeIconTemporary(self.options.iconHoverUrl,self.options.iconHoverTop,self.options.iconHoverLeft))}),this.container.bind("mouseout",function(e){self.options.disabled||(self.onMouseOut(e),(self.options.iconHoverTop!=self.options.iconTop||self.options.iconHoverLeft!=self.options.iconLeft)&&self.changeIconTemporary(self.options.iconUrl,self.options.iconTop,self.options.iconLeft))}),this.container.bind("click",function(e){self.options.disabled||self.onElementClickTemp(e)})}function CsComponentsNotificator(containerId,options){this._parent=options._parent,this.options=options,this.container=$("#"+containerId),this.conteinerId=containerId,this.notifications={},this.newNotificationsCount=0,this.options.period||(this.options.period=2e4),this.options.checkUrl||(this.options.checkUrl=this._parent._parent.options.site_url+"account/notifications/ajax-check-new-notifications"),this.options.notificationsUrl||(this.options.notificationsUrl=this._parent._parent.options.site_url+"account/notifications/popup-micro-notifications"),this.options.notificationsListUrl||(this.options.notificationsListUrl=this._parent._parent.options.site_url+"account/notifications/ajax-micro-notifications-list"),this.options.setOldUrl||(this.options.setOldUrl=this._parent._parent.options.site_url+"account/notifications/ajax-set-notifications-to-old"),this.tip=this._parent.tip(this.conteinerId,{showOn:!1,noCache:!0,showLoader:!0}),this.container.addClass("cs-notificator"),this.captionTextContainer=this.container.find("#csTopNotificationIconNum");var self=this;this.container.bind("click",function(e){self.showNotifications()}),this.checkNotifications()}function CsComponentsDater(containerId,idName,options){if(this.options=options||{},this._parent=this.options._parent,this.containerId=containerId,this.idName=idName||!1,this.options.width=this.options.width?this.options.width:!1,this.options.height=this.options.height?this.options.height:!1,this.options.date=this.options.date?this.options.date:!1,this.options.time=this.options.time?this.options.time:!1,this.options.emptyDate=this.options.emptyDate?this.options.emptyDate:!1,this.options.emptyTime=this.options.emptyTime?this.options.emptyTime:!1,this.options.onClick=this.options.onClick||function(){},this.options.onChange=this.options.onChange||function(){},this.options.updateDefault=this.options.updateDefault||!1,this.options.defaultDateFormat=this.options.dateFormat?this.options.dateFormat:"yy-mm-dd",this.options.dateFormat=this.options.dateFormat&&!this.options.updateDefault?this.options.dateFormat:"yy-mm-dd",this.options.changeMonth=this.options.changeMonth||!1,this.options.changeYear=this.options.changeYear||!1,this.options.emptyDateText=this.options.emptyDateText||"Enter Date",this.options.emptyTimeText=this.options.emptyTimeText||"Time",this.options.maxDate=this.options.maxDate||"",this.options.minDate=this.options.minDate||"",this.options.customClass=this.options.customClass||"",this.options.inputName=this.options.inputName||"",!this.options.date&&!this.options.emptyDate){var objToday=new Date;curDay=("0"+objToday.getDate()).slice(-2),curMonth=("0"+(objToday.getMonth()+1)).slice(-2),curYear=objToday.getFullYear();var today=this.options.dateFormat.replace("yy",curYear).replace("mm",curMonth).replace("dd",curDay);this.options.date=today}if(this.onUserClick=this.options.onClick,this.onUserChange=this.options.onChange,this.container=$("#"+this.containerId),this.container.addClass("cs-dater-field nr"),this.container.addClass(this.options.customClass),this.daterWrapper=$("<span/>",{"class":"dater-wrapper"}).appendTo(this.container),"undefined"!=typeof this.options.size&&this.container.addClass("cs-dater-field-size-"+this.options.size),this.daterWrapperField=$("<input/>",{"class":"dater-wrapper-input",name:this.options.inputName?this.options.inputName:this.idName,id:this.idName,type:"text"}).appendTo(this.container),this.daterWrapperField.val(this.options.date),this.daterWrapperField.datepicker({dateFormat:this.options.dateFormat,changeMonth:this.options.changeMonth,changeYear:this.options.changeYear,minDate:this.options.minDate,maxDate:this.options.maxDate}),this.options.date){var text=this.options.date;this.options.updateDefault&&(text=$.datepicker.formatDate(this.options.defaultDateFormat,this.daterWrapperField.datepicker("getDate"))),this.daterWrapper.removeClass("grey-text"),this.daterWrapper.text(text)}else this.options.emptyDate&&(this.daterWrapper.addClass("grey-text"),this.daterWrapper.text(this.options.emptyDateText));this.options.width&&this.daterWrapper.width(this.options.width),this.options.height&&this.daterWrapper.height(this.options.height),(this.options.time||this.options.emptyTime)&&(this.timerWrapper=$("<span/>",{"class":"timer-wrapper"}).appendTo(this.container),this.options.time?this.timerWrapper.text(this.options.time):this.timerWrapper.text(this.options.emptyTimeText),this.timerWrapper.height(this.options.height),this.timerWrapperField=$("<input/>",{"class":"dater-wrapper-input",id:this.idName+"-timer",name:this.idName+"-timer",type:"text"}).appendTo(this.container),this.timerWrapperField.val(this.options.time),this.timerWrapperField.timepicker()),this.clearWrapper=$("<div/>",{"class":"cb"}).appendTo(this.container);var self=this;this.daterWrapper&&this.daterWrapper.bind("click",function(e){self.daterOnClick(self.idName,self.containerId)}),this.timerWrapper&&this.timerWrapper.bind("click",function(e){self.timerOnClick(self.idName,self.containerId)})}function CsComponentsRadio(id,idName,options){if(this.options=options||{},this._parent=options._parent,this.idName=idName||!1,this.options.checked=this.options.checked||!1,this.options.name=this.options.name||!1,this.options.onClick=this.options.onClick||function(){},this.options.disabled=this.options.disabled||!1,this.onUserClick=this.options.onClick,this.checked=this.options.checked,this.container={},this.id=id,this.container=$("#"+this.id),this.container.addClass(this.options.className||"cs-radio"),this.container.addClass("nh"),this.checked&&this.container.addClass("cs-radio-checked"),this.disabled&&this.container.addClass("disabled"),this.options.name){var checkboxContainerParams={type:"radio",value:this.options.value,name:this.options.name};this.checkboxContainer=$("<input/>",checkboxContainerParams).prop("checked",this.checked).prependTo(this.container)}this.dumbContainer=$("<span/>",{"class":"dumb-text",text:"."}).appendTo(this.container),this.tickContainer=$("<span/>",{"class":"tick"}).appendTo(this.container);var self=this;this.container.bind("click",function(e){self.defaultOnClick()})}function CsComponentsCheckbox(id,options){if(this.options=options||{},this.options.checked=this.options.checked||!1,this.options.disabled=this.options.disabled||!1,this.options.name=this.options.name||!1,this.options.onClick=this.options.onClick||function(){},this.options.onMouseOver=this.options.onMouseOver||function(){},this.options.onMouseOut=this.options.onMouseOut||function(){},this.onUserClick=this.options.onClick,this.onUserCheck=this.options.onCheck||function(){},this.disabled=this.options.disabled||!1,this.checked=this.options.checked,this.options.rel=this.options.rel||!1,this.value=this.options.value||!1,this.container={},this.id=id,this.container=$("#"+this.id),this.container.addClass(this.options.className||"cs-checkbox"),this.container.addClass("nh"),this.checked&&this.container.addClass("cs-checkbox-checked"),this.options.disabled&&(this.container.prop("disabled",!0),this.container.addClass("cs-checkbox-disabled")),this.options.name){var checkboxContainerParams={type:"checkbox",value:this.options.value,name:this.options.name};this.checkboxContainer=$("<input/>",checkboxContainerParams).prop("checked",this.checked).prependTo(this.container)}this.options.rel&&this.checkboxContainer.attr("rel",this.options.rel),this.dumbContainer=$("<span/>",{"class":"dumb-text",text:"."}).appendTo(this.container),this.tickContainer=$("<span/>",{"class":"tick"}).appendTo(this.container);var self=this;this.container.bind("click",function(e){self.options.disabled||self.defaultOnClick(e)})}function CsSwitcher(id,list,options){this.options=options||{},id instanceof jQuery?(this.container=id,this.id=this.container.attr("id")?this.container.attr("id"):"csInput"+Math.floor(100000001*Math.random()),this.container.attr("id",this.id)):(this.container=$("#"+id),this.id=id),this.container.addClass("t t14 t-accent clickable noselect"),this.inputContainer=!1,this.selectedIndex=0,this.list=list,this.options.selectedIndex=options.selectedIndex||!1,this.options.onClick=options.onClick||function(){},this.options.className=options.className||"",this.options.onChange=options.onChange||function(){},this.options.name=options.name||!1,this.options.disabled=options.disabled||!1,this.options.enabled="undefined"!=typeof options.enabled?options.enabled:!0,this.options.cssSwitch=this.list.length&&CsAlgorithms.prototype.isset(this.list[0].css),this.onClick=this.options.onClick,this.onChange=this.options.onChange,this.options.cssSwitch||(this.captionContainer=$("<span/>",{}).appendTo(this.container)),this.options.className&&this.container.addClass(this.options.className),(!this.options.enabled||this.options.disabled)&&this.disable(),this.options.name&&(this.inputContainer=$("<input/>",{type:"hidden",name:this.options.name}).appendTo(this.container));for(var i in this.list)if(this.list[i].selected){this.selectedIndex=i,this.inputContainer&&this.inputContainer.val(this.list[this.selectedIndex].value),this.options.cssSwitch&&this.container.addClass(this.list[this.selectedIndex].css);break}this.selectedIndex=options.selectedIndex||this.selectedIndex||0;for(var i in this.list);this.options.cssSwitch||this.updateCaption();var self=this;this.container.bind("click",function(){if(self.options.enabled){var clickResult=self.onClick();if("undefined"!=typeof clickResult&&0==clickResult)return!1;self.switchSelection()}})}function CsSwitcher2(id,list,options){this.options=options||{},this.container={},this.id=id,this.container=$("#"+this.id),this.container.addClass("cs-selector"),this.container.addClass("nh"),this.inputContainer=!1,this.selectedIndex=0,this.list=list,this.options.selectedIndex=options.selectedIndex||!1,this.options.onClick=options.onClick||function(){},this.options.onChange=options.onChange||function(){},this.options.className=options.className||"",this.options.name=options.name||!1,this.options.enabled="undefined"!=typeof options.enabled?options.enabled:!0,this.options.cssSwitch=this.list.length&&CsAlgorithms.prototype.isset(this.list[0].css),this.onClick=this.options.onClick,this.onChange=this.options.onChange,this.showAllItems=this.options.showAllItems||!1,this.options.cssSwitch||(this.captionContainer=$("<span/>",{}).appendTo(this.container)),this.options.className&&this.container.addClass(this.options.className),this.options.enabled||this.container.addClass("disabled"),this.options.name&&(this.inputContainer=$("<input/>",{type:"hidden",name:this.options.name}).appendTo(this.container));for(var i in this.list)if(this.list[i].selected&&(this.selectedIndex=i,this.inputContainer&&this.inputContainer.val(this.list[this.selectedIndex].value),this.options.cssSwitch&&this.container.addClass(this.list[this.selectedIndex].css),!this.showAllItems))break;this.selectedIndex=options.selectedIndex||this.selectedIndex||0;for(var i in this.list);this.options.cssSwitch||this.updateCaption();var self=this;this.container.bind("click",function(){if(self.options.enabled){var clickResult=self.onClick();if("undefined"!=typeof clickResult&&0==clickResult)return!1;self.switchSelection()}})}function CsComponentsDropdown(id,list,options){if(this.options=options||{},this.container={},this.id=id,this.container=$("#"+this.id),this.container.addClass(this.options.className||"cs-dropdown"),this.container.addClass("r1"),this.options.splitButton&&this.container.addClass("cs-dropdown-split"),this.options.small&&this.container.addClass("cs-dropdown-small"),this.options.medium&&this.container.addClass("cs-dropdown-medium"),this.options.size&&this.container.addClass("cs-dropdown-size-"+this.options.size),this.options.color&&this.container.addClass("cs-dropdown-color-"+this.options.color),this.list=list,this.options.addClassName&&this.container.addClass(this.options.addClassName),this.options.iconUrl=this.options.iconUrl||!1,this.options.iconHoverUrl=this.options.iconHoverUrl||this.options.iconUrl,this.options.iconTop=this.options.iconTop||0,this.options.iconLeft=this.options.iconLeft||0,this.options.iconHoverTop=this.options.iconHoverTop||this.options.iconTop,this.options.iconHoverLeft=this.options.iconHoverLeft||this.options.iconLeft,this.options.iconTop=-1*this.options.iconTop,this.options.iconLeft=-1*this.options.iconLeft,this.options.iconHoverTop=-1*this.options.iconHoverTop,this.options.iconHoverLeft=-1*this.options.iconHoverLeft,this.options.customClassName=this.options.customClassName||"",this.options.openedClassName=this.options.openedClassName||"cs-dropdown-opened",this.options.openedSplitClassName=this.options.openedSplitClassName||"cs-dropdown-split-opened",this.options.openedSmallClassName=this.options.openedSmallClassName||"cs-dropdown-small-opened",this.options.titleStay=this.options.titleStay||!1,this.options.useIcons=this.options.useIcons||!1,this.options.crop=this.options.crop||!1,this.options.captionTitleAttr=this.options.captionTitleAttr||!1,this.options.splitCaptionTitleAttr=this.options.splitCaptionTitleAttr||!1,this.options.name=this.options.name||!1,this.options.title=this.options.title||!1,this.options.id=this.options.id||!1,this.options.splitButton=this.options.splitButton||!1,this.options.invisible=this.options.invisible||!1,this.options.noArrow=this.options.noArrow||!1,this.options.defaultValue="undefined"!=typeof this.options.defaultValue?this.options.defaultValue:!1,this.options.invisibleShowArrow=this.options.invisibleShowArrow||!1,this.options.hideTitle=this.options.hideTitle||!1,this.options.arrowLeft=this.options.arrowLeft||!1,this.options.zIndex=this.options.zIndex||!1,this.options.dropRight=this.options.dropRight||!1,this.options.noSelectable=this.options.noSelectable||!1,this.options.noDropIcons=this.options.noDropIcons||!1,this.options.maxDropHeight=this.options.maxDropHeight||!1,this.options.maxDropWidth=this.options.maxDropWidth||!1,this.options.scrollToSelected=this.options.scrollToSelected||!0,this.options.rightTexts=this.options.rightTexts||!1,this.options.width=this.options.width||!1,this.options.disabled=this.options.disabled||!1,this.options.thin=this.options.thin||!1,this.options.dark=this.options.dark||!1,this.options.rel=this.options.rel||!1,this.options.refreshOnDropdown=this.options.refreshOnDropdown||!1,this.options.croptext=this.options.croptext||!1,this.options.cropTitle=this.options.cropTitle||!1,this.options.dropUp=this.options.dropUp||!1,this.options.dropRelativeTo=this.options.dropRelativeTo||!1,this.options.onChange=this.options.onChange||function(selected_el){},this.options.onSelect=this.options.onSelect||function(selected_el){},this.options.onMouseOver=this.options.onMouseOver||function(){},this.options.onMouseOut=this.options.onMouseOut||function(){},this.options.onButtonClick=this.options.onButtonClick||function(e,obj){},this.options.onClick=this.options.onClick||function(){},this.options.onBlur=this.options.onBlur||function(){},this.onElementClickTemp=function(el){},this.searchTimeout=!1,this.preselectedIndex=!1,this.onChange=this.options.onChange,this.onSelect=this.options.onSelect,this.onMouseOut=this.options.onMouseOut,this.onMouseOver=this.options.onMouseOver,this.isOpened=!1,this.isFocused=!1,this.isClicked=!1,this.options.crop&&this.container.addClass("cs-dropdown-crop-"+this.options.crop),this.options.zIndex&&this.container.css("z-index",this.options.zIndex),this.options.arrowLeft&&this.container.addClass("cs-dropdown-arrow-left"),this.options.dropRight&&this.container.addClass("cs-dropdown-right"),this.options.dark&&(this.container.addClass("cs-dropdown-dark"),this.options.disabled&&this.container.addClass("cs-dropdown-dark-disabled")),this.options.noDropIcons&&this.container.addClass("cs-dropdown-no-drop-icons"),this.options.splitButton){this.splitCaptionContainer=$("<span/>",{"class":"split-caption"}).prependTo(this.container),this.splitCaptionContainer.text(this.options.title||"No title");var self=this;this.splitCaptionContainer.bind("click",function(e){self.options.onButtonClick(e,self)}),this.options.splitCaptionTitleAttr&&(this.splitCaptionContainer.attr("title",this.options.splitCaptionTitleAttr),this.splitCaptionContainer.addClass("cs-title-tip"))}this.options.invisible&&this.container.addClass(this.options.className||"cs-dropdown-invisible"),this.options.rightTexts&&this.container.addClass("cs-dropdown-right-texts"),""!=this.options.customClassName&&this.container.addClass(this.options.customClassName);var prioritized=!1;for(var i in this.list)"undefined"!=typeof this.list[i].select_prioritize&&!0===this.list[i].select_prioritize&&(prioritized=!0);for(var i in this.list)if(this.list[i].selected&&(this.selectedIndex=i,!prioritized||!0===this.list[i].select_prioritize))break;if(this.selectedIndex=options.selectedIndex||this.selectedIndex||0,this.captionContainer=$("<span/>",{"class":"caption"}).appendTo(this.container),this.options.thin&&this.captionContainer.css("font-weight","normal"),this.options.width&&(this.captionContainer.width(this.options.width),this.captionContainer.css("text-align","left")),this.options.hideTitle&&this.captionContainer.addClass("caption-title-hide"),this.options.captionTitleAttr&&(this.captionContainer.attr("title",this.options.captionTitleAttr),this.captionContainer.addClass("cs-title-tip")),this.options.name||this.options.id){var valueContainerParams={type:"hidden",value:this.list[this.selectedIndex].value};this.options.name&&(valueContainerParams.name=this.options.name),this.options.id&&(valueContainerParams.id=this.options.id),this.options.defaultValue!==!1&&(valueContainerParams.value=this.options.defaultValue),this.valueContainer=$("<input/>",valueContainerParams).prependTo(this.container)}this.options.rel&&this.valueContainer.attr("rel",this.options.rel),this.searchContainer=$("<input/>",{type:"text","class":"no"}).prependTo(this.container),this.searchContainer.css("width","1px"),this.searchContainer.css("height","1px"),this.searchContainer.css("padding","0px"),this.searchContainer.css("margin","0px"),this.searchContainer.css("border-width","0px"),this.searchContainer.css("position","absolute"),this.searchContainer.css("line-height","1px"),(this.options.iconUrl||this.options.useIcons)&&(this.captionContainer.addClass("caption-with-icon"),this.captionIconContainer=$("<span/>",{"class":"caption-icon"}).appendTo(this.captionContainer),this.options.iconUrl?(this.captionIconContainer.css("background-image","url("+this.options.iconUrl+")"),this.captionIconContainer.css("background-position",this.options.iconLeft+"px "+this.options.iconTop+"px")):this.options.useIcons&&(this.captionIconContainer.css("background-image","url("+this.list[this.selectedIndex].iconUrl+")"),this.captionIconContainer.css("background-position",eval(-1*("undefined"!=typeof this.list[this.selectedIndex].iconSelectedLeft?this.list[this.selectedIndex].iconSelectedLeft:this.list[this.selectedIndex].iconLeft))+"px "+eval(-1*("undefined"!=typeof this.list[this.selectedIndex].iconSelectedTop?this.list[this.selectedIndex].iconSelectedTop:this.list[this.selectedIndex].iconTop))+"px"))),
this.options.noArrow?this.container.addClass("cs-dropdown-no-arrow"):(this.titleArrowContainer=$("<span/>",{"class":"caption-arrow"}).appendTo(this.captionContainer),this.options.invisibleShowArrow&&this.titleArrowContainer.css("display","block"));var captionTitle="";this.options.title?captionTitle=this.options.title:(this.selectedIndex||0==this.selectedIndex)&&(captionTitle=this.list[this.selectedIndex].text.replace(/&gt;/g,">"),this.options.cropTitle&&captionTitle.length>this.options.cropTitle&&(captionTitle=captionTitle.substr(0,this.options.cropTitle)+"...")),this.captionTitleContainer=$("<span/>",{text:captionTitle,"class":"title"}).appendTo(this.captionContainer),this.hiddenContainer=$("<span/>",{"class":"hidden"}).appendTo(this.container),this.options.maxDropHeight&&(this.hiddenContainer.css("max-height",this.options.maxDropHeight+"px"),this.hiddenContainer.css("overflow-y","auto"),this.hiddenContainer.css("overflow-x","hidden")),this.options.hideTitle&&this.hiddenContainer.addClass("title-hidden"),this.options.dropWidth&&this.hiddenContainer.width(this.options.dropWidth),this.options.croptext&&this.captionTitleContainer.addClass("ellipsis"),this.listContainer=$("<ul/>",{"class":"hidden"}).appendTo(this.hiddenContainer),this.listContainer.elements=[];var replacedText;for(var i in this.list)replacedText=this.list[i].text||"",this.list[i].text=replacedText.replace(/&lt;/g,"<").replace(/&gt;/g,">"),this.list[i].breakLine?(this.listContainer.elements[i]=$("<li/>",{"class":"break"}).appendTo(this.listContainer),$("<span/>").appendTo(this.listContainer.elements[i])):(this.listContainer.elements[i]=$("<li/>",{rel:i}).appendTo(this.listContainer),this.listContainer.elements[i].textContainer=$("<span/>",{text:this.list[i].text}).addClass("entry").prependTo(this.listContainer.elements[i]),this.list[i].indented&&"number"==typeof this.list[i].indented&&this.list[i].indented>1?this.listContainer.elements[i].textContainer.css("padding-left",parseInt(20*parseInt(this.list[i].indented))+"px"):this.list[i].indented&&this.listContainer.elements[i].addClass("indented"),this.list[i].entryClassName&&this.listContainer.elements[i].textContainer.addClass(this.list[i].entryClassName),this.list[i].disabled&&this.listContainer.elements[i].addClass("disabled"),this.list[i].hidden&&this.listContainer.elements[i].addClass("hidden"),this.list[i].selected&&this.listContainer.elements[i].addClass("selected"),this.list[i].itemClass&&this.listContainer.elements[i].addClass(this.list[i].itemClass),this.list[i].indent&&this.listContainer.elements[i].css("marginLeft",this.list[i].indent),this.options.noDropIcons,this.options.useIcons?(this.listContainer.elements[i].icon=$("<span/>",{"class":"icon"}).prependTo(this.listContainer.elements[i]),this.list[i].iconUrl&&(this.listContainer.elements[i].icon.css("background-image","url("+this.list[i].iconUrl+")"),this.list[i].iconLeft=this.list[i].iconLeft||0,this.list[i].iconTop=this.list[i].iconTop||0,this.listContainer.elements[i].icon.css("background-position",eval(-1*this.list[i].iconLeft)+"px "+eval(-1*this.list[i].iconTop)+"px"))):$("<span/>",{"class":"tick"}).prependTo(this.listContainer.elements[i]),this.options.rightTexts&&this.list[i].rightText&&(this.listContainer.elements[i].textRightContainer=$("<span/>",{"class":"right-text",text:this.list[i].rightText}).appendTo(this.listContainer.elements[i])));this.options.disabled&&this.container.addClass("cs-dropdown-disabled");var self=this;$(document).keyup(function(e){if(self.isOpened){var event=e;setTimeout(function(){if(38!=event.which)if(40!=event.which){if(13==event.which)return void(self.preselectedIndex!==!1?self.onElementClick(event,self.preselectedIndex):self.onElementClick(event,self.selectedIndex));var val=self.searchContainer.val();if(val){for(var i in self.list){var searchVal=self.list[i].searchText?self.list[i].searchText:self.list[i].text;if(0==searchVal.toLowerCase().indexOf(val.toLowerCase())){if(self.preselectElement(i),self.options.maxDropHeight){self.hiddenContainer.scrollTop(0);var topPosition=self.listContainer.elements[i].position().top;self.hiddenContainer.scrollTop(topPosition)}break}}clearTimeout(self.searchTimeout),self.searchTimeout=setTimeout(function(){self.clearSearchContainer()},1e3)}}else{if(self.preselectedIndex!==!1&&self.preselectedIndex<self.listContainer.elements.length-1)return void self.preselectElement(parseInt(parseInt(self.preselectedIndex)+1));if(0==self.preselectedIndex)return void self.preselectElement(0)}else{if(self.preselectedIndex!==!1&&self.preselectedIndex>0)return void self.preselectElement(self.preselectedIndex-1);if(0==self.preselectedIndex)return void self.preselectElement(!1)}},1)}}),this.captionContainer.bind("click",function(e){self.isClicked=!0,self.onDropdownClick(e),self.options.onClick.call(e,self)}),$(document).bind("click",function(e){self.onWindowObjectClick(e)});for(var i in this.listContainer.elements)this.list[i].breakLine||this.list[i].disabled||(this.listContainer.elements[i].bind("click",function(e){self.onElementClick(e,$(this).attr("rel"))}),this.listContainer.elements[i].bind("mouseover",function(e){self.preselectElement($(this).attr("rel"))}),this.list[i].onMouseOver&&this.listContainer.elements[i].bind("mouseover",function(e){self.onListItemMouseOver(i)}),this.list[i].onMouseOut&&this.listContainer.elements[i].bind("mouseout",function(e){self.onListItemMouseOut(i)}));return this.searchContainer.focus(function(e){self.focusTimeout||(self.focusTimeout=setTimeout(function(){self.isFocused=!0,self.isClicked||self.onDropdownClick(e),self.isClicked=!1,clearTimeout(self.focusTimeout),delete self.focusTimeout},1))}),this.searchContainer.bind("blur",function(e){self.isFocused=!1,setTimeout(function(){self.isClicked||self.onBlur(e),self.isClicked=!1},1)}),this.container.bind("mousedown",function(e){self.isClicked=!0}),this.captionContainer.bind("mouseover",function(e){self.onMouseOver()}),this.captionContainer.bind("mouseout",function(e){self.onMouseOut()}),this}function CsComponentsPopup(options){this.defaultOptions={},this.defaultOptions.mode=options.mode||"url",this.defaultOptions.width=options.width||500,this.defaultOptions.height=options.height||0,this.defaultOptions.title=options.title||"",this.defaultOptions.hideCross=options.hideCross||!1,this.defaultOptions.requestMethod=options.requestMethod||"post",this.defaultOptions.postObject=options.postObject||{},this._parent=options._parent,this.defaultOptions.onClose=options.onClose||function(el){},this.defaultOptions.topPosition=options.topPosition||40,this.defaultOptions.closeOnBlur=!1,this.options=jQuery.extend({},this.defaultOptions),this.scrollTimeout=!1;var self=this;$(document).keypress(function(e){self.closeOnEscape(e)}),$(document).bind("click",function(e){self.onWindowObjectClick(e)}),$(window).bind("scroll",function(e){self.onWindowScroll(e)})}function CsMessageAutocomplete(element,_options){this.objectType="messageAutocomplete";var original,container,list,backTextContainer,current,blurtimer,focused=!1,index=[],events={},options=$.extend(!0,{prefix:"cs-message-autocomplete",max:null,showErrorMax:!1,single:!1,unique:!1,uniqueInsensitive:!0,endEditableBit:!0,startEditableBit:!0,hideEditableBits:!0,splitOnPaste:!1,splitOnPasteDelimiter:" ",inBetweenEditableBits:!0,inlineBits:!1,ignoreBlur:!1,prefixStates:!0,keys:{previous:37,next:39},bitsOptions:{editable:{},box:{}},plugins:{},encode:function(o){return $.grep($.map(o,function(v){return v=chk(v[0])?v[0]:v[1],chk(v)?v.toString().replace(/:/,""):null}),function(o){return void 0!=o}).join(":")},decode:function(o){return o.split(":")},onChange:function(){}},_options);this.disabled="boolean"==typeof options.disabled?options.disabled:!1,this.inlineBits="boolean"==typeof options.inlineBits?options.inlineBits:!1,this.onChange=options.onChange,"boolean"==options.single&&!0===options.single?options.max=1:"number"==options.max&&1==options.max&&(options.single=!0);var elementId=element;element=$("#"+element);var self=this,init=function(){if(original=element.css("display","none").attr("autocomplete","off").focus(focusLast),container=$("<div />",{"class":options.prefix,id:elementId+"Component"}).insertAfter(element).click(function(e){var isChild=$(e.target).parents("#"+elementId+"Component").attr("id");"string"==typeof isChild&&""!=isChild&&(isChild=!0),(e.target==list.get(0)||e.target==container.get(0)||"undefined"!=typeof backTextContainer&&e.target==backTextContainer.get(0)||isChild)&&(!focused||current&&current.toElement().get(0)!=list.find(":last-child").get(0))&&focusLast()}),options.width&&container.width(options.width),options.size&&container.addClass((options.prefixStates?options.prefix+"-":"")+"size-"+options.size),options.color&&container.addClass((options.prefixStates?options.prefix+"-":"")+"color-"+options.color),options.customClassName&&container.addClass(options.customClassName),options.inlineBits&&container.addClass((options.prefixStates?options.prefix+"-":"")+"inline-bits"),options.cropLeft&&container.addClass((options.prefixStates?options.prefix+"-":"")+"crop-left"),options.cropRight&&container.addClass((options.prefixStates?options.prefix+"-":"")+"crop-right"),options.fullWidth&&(container.hasClass("full-width")||container.addClass("full-width")),options.icon&&options.icon.type){container.addClass((options.prefixStates?options.prefix+"-":"")+"icon");var iconContainer=$("<div/>").addClass("icon-container").prependTo(container);if(options.icon.extraStyle&&iconContainer.css(options.icon.extraStyle),"fa"==options.icon.type){$("<i/>").addClass("fa").addClass(options.icon.symbol).prependTo(iconContainer)}}options.defaultText&&(backTextContainer=$("<div/>",{text:options.defaultText,"class":"background-text"}).appendTo(container)),self.disabled&&container.addClass((options.prefixStates?options.prefix+"-":"")+"disabled"),list=$('<ul class="'+options.prefix+'-bits" />').appendTo(container),"number"==typeof options.maxHeight&&list.css({"max-height":options.maxHeight+"px",overflow:"auto"});for(var name in options.plugins)enablePlugin(name,options.plugins[name]);afterInit()},enablePlugin=function(name,options){self.plugins[name]=new(CsMessageAutocomplete[camelCase(capitalize(name))])(self,options)},afterInit=function(){options.endEditableBit&&create("editable",null,{tabIndex:original.tabIndex}).inject(list),addEvent("bitAdd",update,!0),addEvent("bitRemove",update,!0),$(document).click(function(e){if(!self.disabled&&focused){if(-1!=e.target.className.indexOf(options.prefix)){if(e.target==$(container).get(0))return;var parent=$(e.target).parents("div."+options.prefix);if(parent.get(0)==container.get(0))return}e.target!=$(backTextContainer).get(0)&&(options.ignoreBlur&&-1!=e.target.className.indexOf(options.ignoreBlur)||blur())}}).keydown(function(ev){if(!self.disabled&&focused&&current){var caret=current.is("editable")?current.getCaret():null,value=current.getValue()[1],special=!!$.map(["shift","alt","meta","ctrl"],function(e){return ev[e]}).length,custom=special||current.is("editable")&&current.isSelected(),evStop=function(){ev.stopPropagation(),ev.preventDefault()};switch(ev.which){case 8:if(current.is("box"))return evStop(),current.remove();current.is("editable")&&0==getValues().length&&1==value.length&&backTextContainer&&backTextContainer.hasClass("background-text-hidden")&&backTextContainer.removeClass("background-text-hidden");case options.keys.previous:!current.is("box")&&(0!=caret&&value.length||custom)||(evStop(),focusRelative("prev"));break;case 46:if(current.is("box"))return evStop(),current.remove();case options.keys.next:(current.is("box")||caret==value.length&&!custom)&&(evStop(),focusRelative("next"));default:0==getValues().length&&current.is("editable")&&0==value.length&&backTextContainer&&!backTextContainer.hasClass("background-text-hidden")&&backTextContainer.addClass("background-text-hidden")}}}),setValues(options.decode(original.val()))},create=function(klass,value,opt){if("box"==klass){if(chk(options.max)&&list.children("."+self.getBitTypeClass("box")).length+1>options.max)return options.showErrorMax&&(error_text="You can add up to "+options.max+" Tags to your Post",cs.components().alert(error_text,{title:"Hey!",type:"err",method:"inline",text:error_text})),!1;if(options.unique&&-1!=$.inArray(uniqueValue(value),index))return!1}var bitOptions={};for(var k in options.bitsOptions[klass])bitOptions[k]=options.bitsOptions[klass][k];for(var k in opt)bitOptions[k]=opt[k];return new CsMessageAutocompleteBit(klass,value,self,bitOptions)},uniqueValue=function(value){return chk(value[0])?value[0]:options.uniqueInsensitive?value[1].toLowerCase():value[1]},add=function(plain,id,html,afterEl,isRoot){"number"==typeof isRoot?1===isRoot&&(isRoot=!0):"string"==typeof isRoot?"1"===isRoot&&(isRoot=!0):"boolean"==typeof isRoot?!0===isRoot&&(isRoot=!0):isRoot=!1;var bitOptions={};!0===isRoot&&(bitOptions.customClassName="root");var b=create("box",[id,plain,html],bitOptions);return b&&(afterEl&&afterEl.length||(afterEl=list.find("."+self.getBitTypeClass("box")).filter(":last")),b.inject(afterEl.length?afterEl:list,afterEl.length?"after":"top")),self},focusRelative=function(dir,to){var el=getBit(to&&$(to).length?to:current).toElement(),b=getBit(el[dir]());return b&&b.focus(),fadeLeft(),self},fadeLeft=function(){if(options.inlineBits){var firstBit=list.children().filter("."+self.getBitTypeClass("box")+":first");firstBit.length&&list.offset().left>firstBit.offset().left?container.addClass((options.prefixStates?options.prefix+"-":"")+"fade-left"):container.removeClass((options.prefixStates?options.prefix+"-":"")+"fade-left")}},focusLast=function(){var lastElement=list.children().filter(":last");return self.getValues().length==options.max&&1==options.max?self:(lastElement&&getBit(lastElement).focus(),fadeLeft(),self)};this.ff=function(){focusLast()};var blur=function(){return focused?(current&&current.blur(),focused=!1,fireEvent("blur")):self},getBit=function(obj){return!obj.type||"editable"!=obj.type&&"box"!=obj.type?$(obj).data("textboxlist:bit"):obj};this.getLastBit=function(){for(var listChildren=list.children(),returnBit=!1,i=0;i<listChildren.length;i++){var bit=getBit(listChildren[i]),bitVal=bit.getValue();"undefined"!=bitVal[1]&&""!=$.trim(bitVal[1])&&(returnBit=bit)}return returnBit},this.getLastEditableBit=function(){for(var listChildren=list.children(),returnBit=!1,i=0;i<listChildren.length;i++){var bit=getBit(listChildren[i]);returnBit=bit}return returnBit};var getValues=function(){var inpuValue="",values=[];return list.children().each(function(){var bit=getBit(this);bit.is("editable")?inpuValue=bit.getValue():values.push(bit.getValue())}),backTextContainer&&(values.length||inpuValue[1]?backTextContainer.addClass("background-text-hidden"):backTextContainer.removeClass("background-text-hidden")),values},hasValue=function(){return 0==getValues().length?!1:!0};this.getBitByValue=function(value){var foundBit=null;return list.children().each(function(){var bit=getBit(this);return bit.is("editable")||bit.value[0]!=value?void 0:void(foundBit=bit)}),foundBit};var setValues=function(values){values&&$.each(values,function(i,v){v&&add.apply(self,$.isArray(v)?[v[1],v[0],v[2]]:[v])})},update=function(bit){original.val(options.encode(getValues())),1==options.max&&(getValues().length?(list.children().filter(":last").css("display","none"),this.plugins.autocomplete&&this.plugins.autocomplete.hide()):list.children().filter(":last").show()),options.inlineBits&&setTimeout(function(){focusRelative("next",bit)},1)},addEvent=function(type,fn){void 0==events[type]&&(events[type]=[]);var exists=!1;return $.each(events[type],function(f){return f===fn?void(exists=!0):void 0}),exists||events[type].push(fn),self},fireEvent=function(type,args,delay){return events&&events[type]?($.each(events[type],function(i,fn){!function(){args=void 0!=args?splat(args):Array.prototype.slice.call(arguments);var returns=function(){return fn.apply(self||null,args)};return delay?setTimeout(returns,delay):returns()}()}),self):self},removeEvent=function(type,fn){if(events[type])for(var i=events[type].length;i--;i)events[type][i]===fn&&events[type].splice(i,1);return self},isDuplicate=function(v){return $.inArray(uniqueValue(v),index)};this.onFocus=function(bit){self.disabled||(current&&current.blur(),clearTimeout(blurtimer),current=bit,container.addClass((options.prefixStates?options.prefix+"-":"")+"focused"),focused||(focused=!0,fireEvent("focus",bit)))},this.onAdd=function(bit){if(options.unique&&bit.is("box")&&index.push(uniqueValue(bit.getValue())),bit.is("box")){var prior=getBit(bit.toElement().prev());if(prior&&prior.is("box")&&options.inBetweenEditableBits||!prior&&options.startEditableBit){var priorEl=prior&&prior.toElement().length?prior.toElement():!1,b=create("editable").inject(priorEl||list,priorEl?"after":"top");options.hideEditableBits&&b.hide()}self.onChange()}},this.onRemove=function(bit,fromRemoveButton){if(bit.is("box")&&self.onChange(),options.unique&&bit.is("box")){var i=isDuplicate(bit.getValue());i>-1&&index.splice(i,1)}if("boolean"==typeof fromRemoveButton&&0!=fromRemoveButton||focused){var prior=getBit(bit.toElement().prev());prior&&prior.is("editable")&&prior.remove(),focusRelative("next",bit),"boolean"==typeof fromRemoveButton&&1==fromRemoveButton&&blur()}},this.onBlur=function(bit,all){var values=[],inputValue="";list.children().each(function(){var bit=getBit(this);"undefined"==typeof bit||(bit.is("editable")?inputValue=bit.getValue():values.push(inputValue))}),backTextContainer&&(values.length||inputValue[1]?backTextContainer.addClass("background-text-hidden"):backTextContainer.removeClass("background-text-hidden")),current=null,container.removeClass((options.prefixStates?options.prefix+"-":"")+"focused"),blurtimer=setTimeout(blur,all?0:200)},this.setOptions=function(opt){options=$.extend(!0,options,opt)},this.getOptions=function(){return options},this.getContainer=function(){return container},this.clearContainer=function(){var values=[];return list.children().each(function(){var bit=getBit(this);bit.is("editable")?bit.remove():values.push(bit.remove())}),options.unique&&(index=[]),create("editable",null,{tabIndex:original.tabIndex}).inject(list),values},this.getIndex=function(){return index},this.disable=function(){self.disabled=!0,container.addClass((options.prefixStates?options.prefix+"-":"")+"disabled")},this.enable=function(){self.disabled=!1,container.removeClass((options.prefixStates?options.prefix+"-":"")+"disabled")},this.getWrapperId=function(){return container.attr("id")},this.showError=function(){container.addClass((options.prefixStates?options.prefix+"-":"")+"form-error"),options.hasError=!0},this.hideError=function(){container.removeClass((options.prefixStates?options.prefix+"-":"")+"form-error"),options.hasError=!1},this.getBitClass=function(){return options.prefix+"-bit"+(options.prefixStates?"":" bit")},this.getBitTypeClass=function(type){return(options.prefixStates?self.getBitClass()+"-":"")+type};var replaceTags=function(str){function replaceTag(tag){return toReplace[tag]||tag}var toReplace={"&":"&amp;","<":"&lt;",">":"&gt;"};return str.replace(/[&<>]/g,replaceTag)};return this.isDuplicate=isDuplicate,this.addEvent=addEvent,this.removeEvent=removeEvent,this.fireEvent=fireEvent,this.create=create,this.add=add,this.getValues=getValues,this.hasValue=hasValue,this.replaceTags=replaceTags,this.plugins=[],this.options=options,init(),this}function compareStrings(a,b){var A=a[1].toLowerCase(),B=b[1].toLowerCase(),Alen=A.split(" ").length,Blen=B.split(" ").length;return B>A?Alen>Blen?1:-1:A>B?Blen>Alen?-1:1:0}function CsComponentsThumb(id,options){this.options=options||{},this._parent=options._parent,this.options.url=this.options.url||this._parent._parent.options.site_url+"account/accelerators/set_applicant_rating",this.options.clearUrl=this.options.clearUrl||this._parent._parent.options.site_url+"account/accelerators/clear_applicant_rating",this.options.showClicks=this.options.showClicks||!1,this.options.up=this.options.up||0,this.options.down=this.options.down||0,this.upClicks=this.options.up,this.downClicks=this.options.down,this.buttonClicked=this.options.buttonClicked||!1,this.decreaseOpposite=this.buttonClicked?!0:!1,this.onPost=this.options.onPost||function(){},this.callback=this.options.callback||function(){},this.cancelCallback=this.options.cancelCallback||function(){},this.container={},this.id=id,this.container=$("#"+this.id),this.container.addClass("cs-thumb"),this.buttons={up:{container:{},textContainer:{}},down:{container:{},textContainer:{}}},this.printContainer(),this.buttonClicked&&this.buttons[this.buttonClicked].container.addClass("selected"),this.post={};var self=this;this.buttons.up.container.bind("click",function(){self.buttonClick("up")}),this.buttons.down.container.bind("click",function(){self.buttonClick("down")})}function CsComponentsRating(id,options){this.options=options||{},this._parent=options._parent,this.options.disabled=this.options.disabled||!1,this.options.name=this.options.name||!1,this.options.onClick=this.options.onClick||function(){},this.options.onMouseOver=this.options.onMouseOver||function(e){},this.options.rating=this.options.rating||!1,this.options.recount=this.options.recount||!1,this.options.recountId=this.options.recountId||!1,this.options.maxValue=this.options.maxValue||!1,this.options.size=this.options.size||"",this.options.template=this.options.template||"",this.options.post=this.options.post||{},this.options.recountId&&(this.options.recountContainer=$("#"+this.options.recountId)),this.options.url=this.options.url||this._parent._parent.options.site_url+"account/accelerators/set_applicant_rating",this.options.clearUrl=this.options.clearUrl||this._parent._parent.options.site_url+"account/accelerators/clear_applicant_rating",this.container={},this.id=id,this.container=$("#"+this.id),this.container.addClass("cs-rating"),this.options.size&&this.container.addClass("cs-rating-"+this.options.size),this.options.template&&this.container.addClass("cs-template-"+this.options.template),this.printStars({maxvalue:this.options.maxValue,curvalue:this.options.rating}),this.container.css("visibility","visible"),this.onMouseOver=this.options.onMouseOver;var self=this;this.options.onMouseOver&&this.container.bind("mouseover",function(e){self.onMouseOver(e)})}function CsComponentsDivFixed(id,options){this.options=options||{},this.options.fixTarget=this.options.fixTarget||window,this.container={},this.id=id,this.container=$("#"+this.id),this.options.topBefore=this.options.topBefore||0,this.options.topAfter=this.options.topAfter||0,this.options.rightBefore=this.options.rightBefore||0,this.options.rightAfter=this.options.rightAfter||0;var self=this,top=this.container.offset().top-parseFloat(this.container.css("margin-top").replace(/auto/,0)),tt=void 0;$(this.options.fixTarget).scroll(function(event){var y=$(this).scrollTop();y>=top?$(window).scrollTop()+$(window).height()+600>=$("#account-accelerators-ajax-application-evaluations-content").outerHeight()+top&&$("#csFix").height()>$(window).height()?("undefined"==typeof tt&&(tt=y),$("#csFix").css("position","absolute"),$("#csFix").css("top",tt-top)):($("#csFix").css("position","fixed"),self.options.topAfter&&$(self.container).css("top",self.options.topAfter+"px")):($("#csFix").css("position","absolute"),self.options.topBefore&&$(self.container).css("top",self.options.topBefore+"px"))})}function CsComponentsFixedScroll(id,options){this.options=options||{},this.options.fixTarget=this.options.fixTarget||window,this.container={},this.sideContainerId=this.options.sideContainerId||!1,this.sideContainer=!1,this.options.notFixedCss=this.options.notFixedCss||{},this.options.fixedCss=this.options.fixedCss||{},this.options.useOverflow=this.options.useOverflow||!1,this.options.smartFixedBlock=this.options.smartFixedBlock||!1,this.options.smartFixedBlockMinHeight=this.options.smartFixedBlockMinHeight||100,this.options.smartFixedBlockBottom=this.options.smartFixedBlockBottom||0,this.id=id,this.container=$("#"+this.id),this.sideContainerId&&(this.sideContainer=$("#"+this.sideContainerId)),this.onNotFixed=this.options.onNotFixed||function(){},this.onFixed=this.options.onFixed||function(){},this.styles={},this.styles.position=this.container.css("position"),this.styles.zIndex=this.container.css("z-index"),this.styles["margin-top"]=this.container.css("margin-top"),this.styles["margin-left"]=this.container.css("margin-left"),this.styles["margin-right"]=this.container.css("margin-right"),this.styles["margin-bottom"]=this.container.css("margin-bottom"),this.styles.width=this.container.css("width"),this.styles.offsetTop=this.container.offset().top,this.isInOverflow=!1,this.overflowMade=!1,this.lastScrollTop=0,this.direction="down",this.smartFixedBlockSavedScrollTop=0,this.smartFixedBlockSavedDirection="",this.styles=jQuery.extend(this.styles,this.options.notFixedCss),this.options.extraTop=this.options.extraTop||0,this.options.topBefore=this.options.topBefore||0,this.options.topAfter=this.options.topAfter||0,this.options.rightBefore=this.options.rightBefore||0,this.options.rightAfter=this.options.rightAfter||0;var self=this;$(this.options.fixTarget).scroll(function(event){var y=$(this).scrollTop();if(y>self.lastScrollTop?self.direction="down":self.direction="up",self.lastScrollTop=y,parseInt(y)>=parseInt(parseInt(self.styles.offsetTop)+parseInt(self.options.extraTop))&&!self.isInOverflow){self.container.css("position","fixed"),self.container.css("margin-left","0px"),self.container.css("margin-top","0px"),self.container.css("margin-bottom","0px"),self.container.css("margin-right","0px"),self.container.css("width",self.styles.width);for(var i in self.options.fixedCss)self.container.css(i,self.options.fixedCss[i]);if(self.smartFixedBlockSavedDirection||self.options.topAfter&&$(self.container).css("top",self.options.topAfter+"px"),self.sideContainer&&(self.sideContainer.height()<self.container.height()&&self.sideContainer.height(self.container.height()),self.options.useOverflow)){var sideContainerFromTop=parseInt(self.sideContainer.height())+parseInt(self.sideContainer.offset().top),containerFromTop=(parseInt($(self.options.fixTarget).height())+parseInt($(self.options.fixTarget).scrollTop()),parseInt(self.container.height())+parseInt(self.container.offset().top));self.isInOverflow||containerFromTop>sideContainerFromTop&&(self.isInOverflow=!0)}if(self.options.smartFixedBlock){var height=self.container.outerHeight();if(height>self.options.smartFixedBlockMinHeight){var element_top=parseInt(self.container.css("top").replace("px","")),element_bottom=$(self.options.fixTarget).height()-element_top-self.container.outerHeight();"down"==self.direction?("down"!=self.smartFixedBlockSavedDirection&&(self.smartFixedBlockSavedScrollTop=self.container.offset().top,self.smartFixedBlockSavedDirection="down"),element_bottom<self.options.smartFixedBlockBottom?self.container.css("top",self.smartFixedBlockSavedScrollTop-$(self.options.fixTarget).scrollTop()+"px"):self.container.css("top",parseInt(parseInt(self.container.css("top").replace("px",""))+parseInt(element_bottom-self.options.smartFixedBlockBottom))+"px")):"up"==self.direction&&("up"!=self.smartFixedBlockSavedDirection&&(self.smartFixedBlockSavedScrollTop=self.container.offset().top,self.smartFixedBlockSavedDirection="up"),element_top<self.options.topAfter?self.container.css("top",self.smartFixedBlockSavedScrollTop-$(self.options.fixTarget).scrollTop()+"px"):$(self.container).css("top",self.options.topAfter+"px"))}}self.onFixed()}else self.isInOverflow?self.isInOverflow&&self.options.useOverflow&&(self.overflowMade||(self.container.css("margin-top",parseInt(parseInt($(self.options.fixTarget).scrollTop())-parseInt(self.sideContainer.offset().top))+"px"),self.container.css("position","relative"),self.overflowMade=!0),parseInt(y)<parseInt(parseInt(self.styles.offsetTop)+parseInt(self.options.extraTop)+parseFloat(self.container.css("margin-top").replace(/auto/,0)))&&(self.overflowMade=!1,self.isInOverflow=!1)):(self.container.css("position",self.styles.position),self.container.css("z-index",self.styles.zIndex),self.container.css("margin-top",self.styles["margin-top"]),self.container.css("margin-left",self.styles["margin-left"]),self.container.css("margin-right",self.styles["margin-right"]),self.container.css("margin-bottom",self.styles["margin-bottom"]),self.container.css("width",self.styles.width),self.options.topBefore&&$(self.container).css("top",self.options.topBefore+"px"),self.smartFixedBlockSavedScrollTop=0,self.smartFixedBlockSavedDirection="",self.onNotFixed())})}function CsComponentsDropdownCheckbox(id,list,options){if(this.options=options||{},this.container={},this.id=id,this.container=$("#"+this.id),this.container.addClass(this.options.className||"cs-dropdown-checkbox"),this.container.addClass("r1"),this.options.splitButton&&this.container.addClass("cs-dropdown-checkbox-split"),this.options.small&&this.container.addClass("cs-dropdown-checkbox-small"),this.options.medium&&this.container.addClass("cs-dropdown-checkbox-medium"),this.options.size&&this.container.addClass("cs-dropdown-checkbox-size-"+this.options.size),this.options.color&&this.container.addClass("cs-dropdown-checkbox-color-"+this.options.color),this.list=list,this.options.addClassName&&this.container.addClass(this.options.addClassName),this.options.iconUrl=this.options.iconUrl||!1,this.options.iconHoverUrl=this.options.iconHoverUrl||this.options.iconUrl,this.options.iconTop=this.options.iconTop||0,this.options.iconLeft=this.options.iconLeft||0,this.options.iconHoverTop=this.options.iconHoverTop||this.options.iconTop,this.options.iconHoverLeft=this.options.iconHoverLeft||this.options.iconLeft,this.options.iconTop=-1*this.options.iconTop,this.options.iconLeft=-1*this.options.iconLeft,this.options.iconHoverTop=-1*this.options.iconHoverTop,this.options.iconHoverLeft=-1*this.options.iconHoverLeft,this.options.openedClassName=this.options.openedClassName||"cs-dropdown-checkbox-opened",this.options.openedSplitClassName=this.options.openedSplitClassName||"cs-dropdown-split-opened",this.options.openedSmallClassName=this.options.openedSmallClassName||"cs-dropdown-small-opened",this.options.useIcons=this.options.useIcons||!1,this.options.crop=this.options.crop||!1,this.options.captionTitleAttr=this.options.captionTitleAttr||!1,this.options.splitCaptionTitleAttr=this.options.splitCaptionTitleAttr||!1,this.options.name=this.options.name||!1,this.options.title=this.options.title||!1,this.options.titleStay=this.options.titleStay||!1,this.options.titleMaxElements=this.options.titleMaxElements||1,this.options.titleManySelected=this.options.titleManySelected||"{count} Selected",this.options.id=this.options.id||!1,this.options.splitButton=this.options.splitButton||!1,this.options.invisible=this.options.invisible||!1,this.options.noArrow=this.options.noArrow||!1,this.options.defaultValue="undefined"!=typeof this.options.defaultValue?this.options.defaultValue:!1,this.options.invisibleShowArrow=this.options.invisibleShowArrow||!1,this.options.hideTitle=this.options.hideTitle||!1,this.options.arrowLeft=this.options.arrowLeft||!1,this.options.zIndex=this.options.zIndex||!1,this.options.dropRight=this.options.dropRight||!1,this.options.noSelectable=this.options.noSelectable||!1,this.options.noDropIcons=this.options.noDropIcons||!1,this.options.maxDropHeight=this.options.maxDropHeight||!1,this.options.maxDropWidth=this.options.maxDropWidth||!1,this.options.checkboxNames=0==this.options.checkboxNames?!1:!0,this.options.scrollToSelected=this.options.scrollToSelected||!0,this.options.rightTexts=this.options.rightTexts||!1,this.options.width=this.options.width||!1,this.options.disabled=this.options.disabled||!1,this.options.thin=this.options.thin||!1,this.options.dark=this.options.dark||!1,this.options.rel=this.options.rel||!1,this.options.refreshOnDropdown=this.options.refreshOnDropdown||!1,this.options.croptext=this.options.croptext||!1,
this.options.dropUp=this.options.dropUp||!1,this.options.onChange=this.options.onChange||function(selected_el){},this.options.onButtonClick=this.options.onButtonClick||function(e,obj){},this.options.onClick=this.options.onClick||function(){},this.onElementClickTemp=function(el){},this.searchTimeout=!1,this.preselectedIndex=!1,this.onChange=this.options.onChange,this.isOpened=!1,this.isFocused=!1,this.isClicked=!1,this.selectedCheckboxes=[],this.options.zIndex&&this.container.css("z-index",this.options.zIndex),this.options.dark,this.options.noDropIcons&&this.container.addClass("cs-dropdown-no-drop-icons"),this.options.splitButton){this.splitCaptionContainer=$("<span/>",{"class":"split-caption"}).prependTo(this.container),this.splitCaptionContainer.text(this.options.title||"No title");var self=this;this.splitCaptionContainer.bind("click",function(e){self.options.onButtonClick(e,self)}),this.options.splitCaptionTitleAttr&&(this.splitCaptionContainer.attr("title",this.options.splitCaptionTitleAttr),this.splitCaptionContainer.addClass("cs-title-tip"))}this.options.invisible&&this.container.addClass(this.options.className||"cs-dropdown-invisible"),this.options.rightTexts&&this.container.addClass("cs-dropdown-right-texts");var prioritized=!1;for(var i in this.list)"undefined"!=typeof this.list[i].select_prioritize&&!0===this.list[i].select_prioritize&&(prioritized=!0);for(var i in this.list)this.list[i].selected&&(this.selectedCheckboxes.push(i),!prioritized||!0===this.list[i].select_prioritize);this.selectedIndex=options.selectedIndex||this.selectedIndex||0,this.selectedIndex=null,this.captionContainer=$("<span/>",{"class":"caption"}).appendTo(this.container),this.options.thin&&this.captionContainer.css("font-weight","normal"),this.options.width&&(this.captionContainer.width(this.options.width),this.captionContainer.css("text-align","left")),this.options.hideTitle&&this.captionContainer.addClass("caption-title-hide"),this.options.captionTitleAttr&&(this.captionContainer.attr("title",this.options.captionTitleAttr),this.captionContainer.addClass("cs-title-tip")),this.options.name||this.options.id,this.options.rel,this.searchContainer=$("<input/>",{type:"text","class":"no"}).prependTo(this.container),this.searchContainer.css("width","1px"),this.searchContainer.css("height","1px"),this.searchContainer.css("padding","0px"),this.searchContainer.css("margin","0px"),this.searchContainer.css("border-width","0px"),this.searchContainer.css("position","absolute"),this.searchContainer.css("line-height","1px"),(this.options.iconUrl||this.options.useIcons)&&(this.captionContainer.addClass("caption-with-icon"),this.captionIconContainer=$("<span/>",{"class":"caption-icon"}).appendTo(this.captionContainer),this.options.iconUrl?(this.captionIconContainer.css("background-image","url("+this.options.iconUrl+")"),this.captionIconContainer.css("background-position",this.options.iconLeft+"px "+this.options.iconTop+"px")):this.options.useIcons&&(this.captionIconContainer.css("background-image","url("+this.list[this.selectedIndex].iconUrl+")"),this.captionIconContainer.css("background-position",eval(-1*this.list[this.selectedIndex].iconLeft)+"px "+eval(-1*this.list[this.selectedIndex].iconTop)+"px"))),this.options.noArrow||(this.titleArrowContainer=$("<span/>",{"class":"caption-arrow"}).appendTo(this.captionContainer),this.options.invisibleShowArrow&&this.titleArrowContainer.css("display","block")),this.captionTitleContainer=$("<span/>",{text:this.options.title,"class":"title"}).appendTo(this.captionContainer),this.hiddenContainer=$("<span/>",{"class":"hidden"}).appendTo(this.container),this.options.maxDropHeight&&(this.hiddenContainer.css("max-height",this.options.maxDropHeight+"px"),this.hiddenContainer.css("overflow-y","auto"),this.hiddenContainer.css("overflow-x","hidden")),this.options.dropWidth&&this.hiddenContainer.width(this.options.dropWidth),this.options.croptext&&this.captionTitleContainer.addClass("ellipsis"),this.listContainer=$("<ul/>",{"class":"hidden"}).appendTo(this.hiddenContainer),this.CheckboxesContainer={},this.CheckboxesContainer.elements=[],this.listContainer.elements=[];var replacedText;for(var i in this.list)if(replacedText=this.list[i].text||"",this.list[i].text=replacedText.replace(/&lt;/g,"<").replace(/&gt;/g,">"),this.list[i].breakLine)this.listContainer.elements[i]=$("<li/>",{"class":"break"}).appendTo(this.listContainer),$("<span/>").appendTo(this.listContainer.elements[i]);else{this.listContainer.elements[i]=$("<li/>",{rel:i}).appendTo(this.listContainer),this.listContainer.elements[i].textContainer=$("<span/>",{text:this.list[i].text}).css("padding-left","10px").prependTo(this.listContainer.elements[i]),this.listContainer.elements[i].checkboxContainer=$("<span/>",{id:this.id+"_"+i}).prependTo(this.listContainer.elements[i]);var selected_val=!1;this.list[i].selected&&(selected_val=!0);var ch_inside_name;ch_inside_name=this.options.insideName?this.options.insideName:this.options.name,this.CheckboxesContainer.elements[i]=cs.components().checkbox(this.id+"_"+i,{value:this.list[i].value,checked:selected_val,name:""+this.options.name+(this.options.checkboxNames?"["+ch_inside_name+"]":"")+"["+this.list[i].value+"]",onClick:function(event){this.isChecked()?this.uncheck():this.check(),event.preventDefault()}}),this.list[i].disabled,this.list[i].hidden,this.list[i].itemClass,this.list[i].indent,this.options.noDropIcons,!this.options.useIcons}this.options.disabled&&this.container.addClass("cs-dropdown-disabled");var self=this;$(document).keyup(function(e){if(self.isOpened){var event=e;setTimeout(function(){if(38!=event.which)if(40!=event.which){if(13==event.which)return void(self.preselectedIndex!==!1?self.onElementClick(event,self.preselectedIndex):self.onElementClick(event,self.selectedIndex));var val=self.searchContainer.val();if(val){for(var i in self.list){var searchVal=self.list[i].searchText?self.list[i].searchText:self.list[i].text;if(0==searchVal.toLowerCase().indexOf(val.toLowerCase())){if(self.preselectElement(i),self.options.maxDropHeight){self.hiddenContainer.scrollTop(0);var topPosition=self.listContainer.elements[i].position().top;self.hiddenContainer.scrollTop(topPosition)}break}}clearTimeout(self.searchTimeout),self.searchTimeout=setTimeout(function(){self.clearSearchContainer()},1e3)}}else{if(self.preselectedIndex!==!1&&self.preselectedIndex<self.listContainer.elements.length-1)return void self.preselectElement(parseInt(parseInt(self.preselectedIndex)+1));if(0==self.preselectedIndex)return void self.preselectElement(0)}else{if(self.preselectedIndex!==!1&&self.preselectedIndex>0)return void self.preselectElement(self.preselectedIndex-1);if(0==self.preselectedIndex)return void self.preselectElement(!1)}},1)}}),this.captionContainer.bind("click",function(e){self.isClicked=!0,self.onDropdownClick(e),self.options.onClick.call(e)}),$(document).bind("click",function(e){self.onWindowObjectClick(e)});for(var i in this.listContainer.elements)this.list[i].breakLine||this.list[i].disabled||(this.listContainer.elements[i].bind("click",function(e){self.onElementClick(e,$(this).attr("rel"))}),this.listContainer.elements[i].bind("mouseover",function(e){self.preselectElement($(this).attr("rel"))}),this.list[i].onMouseOver&&this.listContainer.elements[i].bind("mouseover",function(e){self.onListItemMouseOver(i)}),this.list[i].onMouseOut&&this.listContainer.elements[i].bind("mouseout",function(e){self.onListItemMouseOut(i)}));return this.searchContainer.focus(function(e){self.focusTimeout||(self.focusTimeout=setTimeout(function(){self.isFocused=!0,self.isClicked||self.onDropdownClick(e),self.isClicked=!1,clearTimeout(self.focusTimeout),delete self.focusTimeout},1))}),this.searchContainer.bind("blur",function(e){self.isFocused=!1,setTimeout(function(){self.isClicked||self.onBlur(e),self.isClicked=!1},1)}),this.container.bind("mousedown",function(e){self.isClicked=!0}),this}function CsFeedItemMaker(id,blocks,options){this.options=options||{},this.options.url=options.url||"/account/feeds/ajax_add_item",this.options.feedDomPath=options.feedDomPath||!1,this._parent=options._parent,this.absolute_num=1,this.actorId=options.actorId,this.objects={},this.toActorId=options.toActorId||options.actorId,this.toActorType=options.toActorType||!1,this.options.showMegaphone=options.showMegaphone||!1,this.options.isNotFollower=Boolean(options.isNotFollower)||!1,this.options.fileUploaderTitle=options.fileUploaderTitle||"Upload File",this.options.fileUploaderRemoveConfirm=options.fileUploaderRemoveConfirm||"Realy Remove?",this.options.sessionId=options.sessionId||!1,this.options.buttonText=options.buttonText||"Send",this.options.addTextTitle=options.addTextTitle||"Add txt",this.options.addImagesTitle=options.addImagesTitle||"Add img",this.options.objectName=options.objectName||"feedItemMaker",this.options.uploaderObjectName=options.uploaderObjectName||"csPicturesUploader",this.options.defaultText=options.defaultText||"Type here",this.options.blockImagesCloseTip=options.blockImagesCloseTip||"Remove images",this.options.blockTextCloseTip=options.blockTextCloseTip||"Remove text",this.options.publicCoreText=options.publicCoreText||"Share with ...",this.options.publicAllText=options.publicAllText||"Public",this.options.size=options.size||"",this.options.publicPublicText=options.publicPublicText||"Public",this.options.publicTypes=this.options.publicTypes||["public"],this.options.socialOptions="undefined"!=typeof this.options.socialOptions?this.options.socialOptions:!0,this.options.socialNetworksEnabled="undefined"!=typeof this.options.socialNetworksEnabled?this.options.socialNetworksEnabled:[],this.options.startupboard=options.startupboard||0,this.options.private_profile=options.private_profile||0,this.options.permissionControl=options.permissionControl||!1,this.options.permissionControlDefault=options.permissionControlDefault||"everyone",this.options.permissionUpdatesDefault=options.permissionUpdatesDefault||"insiders",this.options.permissionSelector=options.permissionSelector||"cs-permission-selector",this.options.permissionIds=!1,this.options.permissionLists=options.permissionLists||!1,this.options.permissionPage=options.permissionPage||"privateGroups",this.options.tags=options.tags||!1,this.options.tagsSelected=options.tagsSelected||!1,this.options.tagsTitle=options.tagsTitle||"Choose category",this.options.tagsCount=options.tagsCount||"1",this.options.tagsWidth=options.tagsWidth||"418",this.options.tagsError=options.tagsError||"You can only tag "+this.options.tagsCount+" Category.<br /> Unselect the current one to add another.",this.selectedTags=[],this.options.customTags=options.customTags||!1,this.options.colorScheme=options.colorScheme||"light-pink",this.options.colorButton=options.colorButton||"red",this.options.enableUpdates=options.enableUpdates||!1,this.options.showUpdatesButton=options.showUpdatesButton||!1,this.options.defaultShow=options.defaultShow||"discussion",this.publicType=this.options.publicType||"all",this.width=this.options.width||460,this.textareaWidth=this.options.textareaWidth||!1,this.publicParam=this.publicType,this.container={},this.id=id,this.container=$("#"+this.id),this.container.width(this.width),this.container.addClass(this.options.className||"cs-feed-maker cs-feed-maker-default"),this.options.size&&this.container.addClass("cs-feed-maker-size-"+this.options.size),this.blocks=[],this.randId=this.getRandom();var self=this;this.defaultContainer=$("<div/>",{"class":"default-view"}).appendTo(this.container),this.defaultTextContainer=$("<div/>",{"class":"default-text",text:this.options.defaultText}).appendTo(this.defaultContainer),this.defaultTextContainer.bind("click",function(e){self.showFullView(!0),self.getBlocksCount()||self.addBlock("text",{},{focus:!0})}),this.inputStyleContainer=$("<div/>",{"class":"input-style"}).appendTo(this.container),this.blocksContainer=$("<ul/>",{"class":"cs-feed-maker-blocks"}).appendTo(this.inputStyleContainer),this.functionsContainer=$("<div/>",{"class":"cs-feed-maker-functions"}).appendTo(this.container),this.functionsRightContainer=$("<div/>",{"class":"cs-feed-maker-functions-right"}).appendTo(this.functionsContainer),this.functionsLeftContainer=$("<div/>",{"class":"cs-feed-maker-functions-left"}).appendTo(this.functionsContainer),$("<div/>",{"class":"cb"}).appendTo(this.functionsContainer),$("<span/>",{id:"csFeedMakerPublicityDropdown"+this.randId}).appendTo(this.functionsRightContainer),self=this;var dropItems=[];for(i in this.options.publicTypes)dropItems.push({value:this.options.publicTypes[i],text:"all"==this.options.publicTypes[i]?this.options.publicAllText:"core"==this.options.publicTypes[i]?this.options.publicCoreText:"public"==this.options.publicTypes[i]?this.options.publicPublicText:"Unknown value",selected:this.publicParam==this.options.publicTypes[i]?!0:!1});if(this.csFeedMakerPublicityObject=this._parent.dropdown("csFeedMakerPublicityDropdown"+this.randId,dropItems,{addClassName:"cs-feed-maker-publicity-select",invisible:!0,iconUrl:this._parent._parent.options.site_url+"images/components/cs-component-icons.gif",iconTop:79,iconLeft:0,iconHoverTop:79,iconHoverLeft:64,arrowLeft:!0,dark:!0,onChange:function(e){"all"==e.value&&(this.options.iconUrl=self._parent._parent.options.site_url+"images/components/cs-component-icons.gif",this.options.iconTop=-79,this.options.iconLeft=0,this.options.iconHoverTop=-79,this.options.iconHoverLeft=-64,this.updateCaption(),self.publicParam="all"),"core"==e.value&&(this.options.iconUrl=self._parent._parent.options.site_url+"images/components/cs-component-icons.gif",this.options.iconTop=-79,this.options.iconLeft=0,this.options.iconHoverTop=-79,this.options.iconHoverLeft=-64,this.updateCaption(),self.publicParam="core"),"public"==e.value&&(this.options.iconUrl=self._parent._parent.options.site_url+"images/components/cs-components-icons.png",this.options.iconTop=0,this.options.iconLeft=-84,this.options.iconHoverTop=-32,this.options.iconHoverLeft=-84,this.updateCaption(),self.publicParam="public")}}),$("<span/>",{id:"csFeedMakerSendButton"+this.randId}).appendTo(this.functionsLeftContainer),this.sendButtonObject=this._parent.button("csFeedMakerSendButton"+this.randId,{title:this.options.buttonText,loaderUrl:this._parent._parent.options.site_url+"images/components/cs-ajax-loader-circle-white-on-gray-small.gif",color:this.options.colorButton,size:"small",onClick:function(){this.showLoader(),this.disable(),self2=this,self.broadcast=!1,setTimeout(function(){self.send(function(){self2.hideLoader(),self2.enable()})},100)}}),this.options.showMegaphone&&"o"==this.options.toActorType&&this.options.isNotFollower&&($("<span/>",{id:"csFeedMakerMegaphoneButton"+this.randId}).appendTo(this.functionsLeftContainer),this.megaphoneButtonObject=this._parent.button("csFeedMakerMegaphoneButton"+this.randId,{customClassName:"cs-button-megaphone",title:"&nbsp;",captionTitleAttr:"Notify by email",iconUrl:this._parent._parent.options.site_url+"images/components/cs-components-icons.png",iconTop:84,loaderUrl:this._parent._parent.options.site_url+"images/components/cs-ajax-loader-circle-white-on-gray-small.gif",dark:!0,onClick:function(){this.showLoader(),this.disable(),self2=this,self.broadcast=!0,setTimeout(function(){self.send(function(){self2.hideLoader(),self2.enable()})},100)}})),this.addFunctionCaptionContainer=$("<div/>",{"class":"add-bittons-title",text:"add:"}).appendTo(this.functionsRightContainer),this.addImagesButtonContainer=$("<div/>",{"class":"add-button add-images-button cs-title-tip",title:this.options.addImagesTitle}).appendTo(this.functionsRightContainer),this.addImagesButtonIconContainer=$("<span/>",{}).appendTo(this.addImagesButtonContainer),this.addVideoButtonContainer=$("<div/>",{"class":"add-button add-video-button cs-title-tip",title:"Video"}).appendTo(this.functionsRightContainer),this.addVideoButtonIconContainer=$("<span/>",{}).appendTo(this.addVideoButtonContainer),this.fileUploadButtonId="csFileUploadButton"+Math.floor(100000001*Math.random()),this.addFileButtonContainer=$("<div/>",{"class":"add-button add-file-button cs-title-tip",title:"File"}).appendTo(this.functionsRightContainer),this.addFileButtonIconContainer=$("<span/>",{}).appendTo(this.addFileButtonContainer),this.addFileButtonSwfContainer=$("<div/>",{id:this.fileUploadButtonId}).appendTo(this.addFileButtonContainer),this.options.showUpdatesButton){var updatesTitle=this.options.enableUpdates?"KPI Updates":"You've already updated recently",updatesStyle=this.options.enableUpdates?"":"grey-update-icon";this.addUpdatesButtonContainer=$("<div/>",{"class":"add-button add-updates-button switch-update "+updatesStyle+" dashboard-button cs-title-tip",title:updatesTitle}).insertBefore(this.functionsRightContainer),this.addUpdatesButtonIconContainer=$("<span/>",{}).appendTo(this.addUpdatesButtonContainer),this.options.enableUpdates&&this.addUpdatesButtonContainer.bind("click",function(e){self.onAddUpdatesButtonClick(e)})}if(this.options.permissionControl){this.permittionTextContainer=$("<span/>",{text:"with","class":"permissions-text"}).appendTo(this.functionsLeftContainer),this.addControlContainer=$("<span/>",{title:"Privacy Settings","class":"add-control-wrapper",id:"add-control-wrapper"}).appendTo(this.functionsLeftContainer);var privacyUseIcons=!0;if("publicTeams"==self.options.permissionPage?(privacyUseIcons=!1,this.privacyPulldown=[{text:"Public",value:"everyone",selected:"everyone"==self.options.permissionControlDefault?!0:!1,onClick:function(){self.resetPrivacy()}},{text:"Insiders (Team, Investors & Advisors)",value:"insiders",selected:"insiders"==self.options.permissionControlDefault?!0:!1,onClick:function(){self.resetPrivacy(),self.onAddTeams("insiders")}},{text:"Investors Only",value:"investors",selected:"investors"==self.options.permissionControlDefault?!0:!1,onClick:function(){self.resetPrivacy(),self.onAddTeams("investors")}},{text:"Team Only",value:"public_team",selected:"public_team"==self.options.permissionControlDefault?!0:!1,onClick:function(){self.resetPrivacy(),self.onAddTeams("public_team")}}]):this.privacyPulldown=[{text:"Everyone",value:"everyone",iconUrl:this._parent._parent.options.site_url+"images/icons_redesign.png?u=2013-09-20",iconLeft:0,iconTop:248,iconSelectedTop:231,selected:"everyone"==self.options.permissionControlDefault?!0:!1,onClick:function(){self.resetPrivacy(),self.onAddEveryone()}},{text:"Insiders (Team & Members)",value:"teams",iconUrl:this._parent._parent.options.site_url+"images/icons_redesign.png?u=2013-09-20",iconLeft:17,iconTop:248,iconSelectedTop:231,selected:"teams"==self.options.permissionControlDefault?!0:!1,hidden:"everyone"==self.options.permissionControlDefault?!0:!1,onClick:function(){self.resetPrivacy(),self.onAddTeams()}},{text:"Specific People",value:"specific-people",iconUrl:this._parent._parent.options.site_url+"images/icons_redesign.png?u=2013-09-20",iconLeft:34,iconTop:248,iconSelectedTop:231,selected:"specific-people"==self.options.permissionControlDefault?!0:!1,onClick:function(){self.resetPrivacy(),self.onAddSpecificMembers()}}],this.options.permissionLists)for(var list,permissionsLists=JSON.parse(this.options.permissionLists),i=0;i<permissionsLists.length;i++)list={text:permissionsLists[i].list_name,value:permissionsLists[i].list_id,iconUrl:self._parent._parent.options.site_url+"images/icons.png?refresh=1",iconLeft:288,iconTop:244,selected:!1},self.privacyPulldown.push(list);this.csPrivacy=cs.components().dropdown("add-control-wrapper",this.privacyPulldown,{onchange:function(){self.resetPrivacy()},size:"normal",color:self.options.colorScheme,invisible:!0,useIcons:privacyUseIcons,refreshOnDropdown:!0,onMouseOver:function(){this.isOpened||this.changeIconTemporary(!1,eval(-1*this.list[this.selectedIndex].iconTop),eval(-1*this.list[this.selectedIndex].iconLeft))},onMouseOut:function(){this.isOpened||this.changeIconTemporary(!1,eval(-1*this.list[this.selectedIndex].iconSelectedTop),eval(-1*this.list[this.selectedIndex].iconLeft))}})}if("updates"==this.options.defaultShow&&this.options.enableUpdates&&self.onAddUpdatesButtonClick(),this.options.tags&&$.isPlainObject(this.options.tags)){this.tagsTextContainer=$("<span/>",{text:"in:","class":"dropdown-tags-text"}).appendTo(this.functionsLeftContainer),this.tagsDropdownContainer=$("<span/>",{"class":"add-control-wrapper",id:"csFeedMakerTagsDropdown"+this.randId}).appendTo(this.functionsLeftContainer);var current_count=0;this.options.tagsSelected&&$.each(this.options.tagsSelected,function(k,v){self.selectedTags.push(v),current_count++});var dropTagsItems=[];for(i in this.options.tags)dropTagsItems.push({value:this.options.tags[i],text:i,selected:CsAlgorithms.prototype.in_array(this.options.tags[i],this.options.tagsSelected)?!0:!1});this.csFeedMakerTagsDropdownObject=this._parent.dropdown("csFeedMakerTagsDropdown"+this.randId,dropTagsItems,{addClassName:"cs-feed-maker-tags-select",invisible:!0,size:"normal",color:self.options.colorScheme,noSelectable:!0,invisibleShowArrow:!0,title:this.options.tagsTitle,onChange:function(el){self.selectedTags=[],self.selectedTags.push(el.value)}});for(i in this.options.tags)CsAlgorithms.prototype.in_array(this.options.tags[i],this.options.tagsSelected)&&this.csFeedMakerTagsDropdownObject.updateCaption()}if(this.options.customTags&&(this.customTagsContainer=$("<div/>",{"class":"custom-tags-wrapper"}).appendTo(this.inputStyleContainer),$("<input/>",{id:"custom-tags-wrapper",name:"custom-tags"}).appendTo(this.customTagsContainer),$("<div/>",{"class":"clr"}).appendTo(this.customTagsContainer),this.csCustomTagsObj=cs.components().messageAutocomplete("custom-tags-wrapper",{unique:!0,width:"auto",max:2,defaultText:"Enter Tags",showErrorMax:!0,plugins:{autocomplete:{onlyFromValues:!1,width:this.options.width,queryRemote:!0,remote:{url:this._parent._parent.options.site_url+"account/feeds/search_tags/?actor_id="+this.toActorId},placeholder:"Type your own tags or pick one of ours"}}})),1==this.options.socialOptions){$("<span/>",{id:"csPostTwitter","class":"post-tags"}).appendTo(this.functionsLeftContainer);var csPostTwitterObj=cs.components().button("csPostTwitter"+this.randId,{title:"ON",dark:!0,customClassName:"button-link-twitter",iconUrl:this._parent._parent.options.site_url+"images/icons.png",iconLeft:260,iconTop:22,onClick:function(){-1==profileFeedItemMaker.options.socialNetworksEnabled.indexOf("twitter")?profileFeedItemMaker.useTwitterOAuth?(csTwitter=cs.auth().twitter({token_actor_id:this.toActorId}),csTwitter.login()):(profileFeedItemMaker.options.socialNetworksEnabled.push("twitter"),csPostTwitterObj.setTitle("ON")):(profileFeedItemMaker.options.socialNetworksEnabled.splice(profileFeedItemMaker.options.socialNetworksEnabled.indexOf("twitter"),1),csPostTwitterObj.setTitle("OFF"))}});this.csPostTwitterObj=csPostTwitterObj,this.useTwitterOAuth=!1,-1==this.options.socialNetworksEnabled.indexOf("twitter")&&(this.useTwitterOAuth=!0,csPostTwitterObj.setTitle("OFF"))}this.fileBlockNum=!1,this.uploader=cs.components().fileUploader(this.fileUploadButtonId,{title:this.options.fileUploaderTitle,defaultTitle:this.options.fileUploaderTitle,data:{session_id:this.options.sessionId,actor_id:this.options.actorId,image_type:"all",scope:"feed"},removable:!1,allowMultiple:!0,removeText:this.options.fileUploaderRemoveConfirm,useButton:!1,fileId:!1,maxSize:2e4,height:13,width:14,onClearQueue:function(event){},onSelect:function(event,ID,fileObj){self.fileBlockNum=self.addBlock("file",{},{loader:!0})},onProgress:function(event,ID,fileObj,data){return!1},onComplete:function(event,ID,fileObj,response,data){response.data&&response.data.file_id&&(self.blocks[self.fileBlockNum].setData(response.data),self.blocks[self.fileBlockNum].hideLoader())},onDelete:function(){}}),$("<div/>",{"class":"cr"}).appendTo(this.functionsContainer),this.addImagesButtonContainer.bind("click",function(e){self.onAddImagesButtonClick(e)}),this.addVideoButtonContainer.bind("click",function(e){self.onAddVideoButtonClick(e)})}function CsFeedItemMakerImages(data,options){this._parent=options._parent,this.data=data,this.data.type="images",this.options=options,this.containerId=this._parent.id+"_block_"+Math.floor(10000001*Math.random()),this.data.images||(this.data.images=[]),this.imagesContainers=[],this.showUploadPopup()}function CsFeedItemMakerText(data,options){this._parent=options._parent,this.data=data,this.data.type="text",this.options=options,this.containerId=this._parent.id+"_block_"+Math.floor(10000001*Math.random()),data.length,this.display()}function CsFeedItemMakerUpdates(data,options){this._parent=options._parent,this.data=data||{},this.data.updates={},this.data.type="updates",this.options=options,this.display()}function CsFeedItemMakerPrivacy(data,options){this._parent=options._parent,this.data=data,this.data.type="privacy",this.options=options,this.options.loader=this.options.loader||!1,this.containerId=this._parent.id+"_block_"+Math.floor(10000001*Math.random()),this.loaderContainer=!1,this.isEmpty()||this.display(),this.options.loader&&this.showLoader()}function CsFeedItemMakerFile(data,options){this._parent=options._parent,this.data=data,this.data.type="file",this.options=options,this.options.loader=this.options.loader||!1,this.containerId=this._parent.id+"_block_"+Math.floor(10000001*Math.random()),this.loaderContainer=!1,this.display(),this.options.loader&&this.showLoader()}function CsFeedItemMakerVideo(data,options){this._parent=options._parent,this.data=data,this.data.type="video",this.options=options,this.containerId=this._parent.id+"_block_"+Math.floor(10000001*Math.random()),this.display(),this.data.source&&this.data.video_id&&this.downloadVideoData()}function CsComponentsExpandList(options){this._parent=options._parent,this.toggleLinkId=options.toggleLinkId,this.listName=options.listName,this.listContainerId=options.listContainerId||!1,this.linkTextMore=options.linkTextMore||"more",this.linkTextLess=options.linkTextLess||"less",this.hiddenElementsClass=options.hiddenElementClass||"extra-item",this.options=options,this.listParent=$(document),this.listContainerId&&(this.listParent=$("#"+this.listContainerId)),this.toggleLink=$("#"+this.toggleLinkId),this.listParent.find("."+this.hiddenElementsClass+'[data-list="'+this.listName+'"]').hide();var self=this;this.toggleLink.click(function(){"undefined"==typeof self.toggleLink.data("toggle")||"off"==self.toggleLink.data("toggle")?self.expand():(self.collapse(),"function"==typeof options.afterCollapse&&options.afterCollapse())})}function CsComponentsFixedSidebar(options){this._parent=options._parent,this.sidebarId=options.sidebarId,this.sidebar=$("#"+this.sidebarId),this.sHeight=0,this.sOffset=0,this.mainarea=$("#"+options.mainareaId),this.mHeight=0,this.mOffset=0,this.sContent=null,this.offsetTop=options.offsetTop||0,this.offsetBottom=options.offsetBottom||0,this.displayHeight=0,this.stuckTop=!1,this.direction="dowbn",this.lastScrollTop=$(window).scrollTop(),this.scrollHandler=null,this.sidebar.length&&this.mainarea.length&&this.attach()}function CsComponentsToggle(id,items,options){return this.container=$("#"+id),this.items=items,this.switches={},this.value=null,this.options="undefined"!=typeof options?options:{},this.disabled=options.disabled?options.disabled:!1,this.customClass=options.customClass?options.customClass:!1,this.onChange=options.onChange?options.onChange:function(){},this.init(),this}function CsFixedTableHeader(options){return this.containerId=options.containerId,this.container=$("#"+this.containerId),this.tableId=options.tableId,this.table=$("#"+this.tableId),this.tableHeaderId=options.tableHeaderId,this.tableHeader=$("#"+this.tableHeaderId),this.isHtmlTable="undefined"!=typeof options.isHtmlTable?options.isHtmlTable:!1,this.offsetTop=options.offsetTop||0,this.offsetTopSource=options.offsetTopSource||null,this.offsetBottom=options.offsetBottom||0,this.tableHeight=this.table.height(),this.tableHeaderHeight=this.tableHeader.outerHeight(),this.tableHeaderContainer=null,this.tableHeaderPlaceholder=null,this.attach(),this}function csMobileURL(id,options){return this.actor_id=id,this.formObj=options.formObj||!1,this.formObj.pasteFunc=this.checkURL||!1,this.market=options.market||!1,this.detailsContainerId=options.detailsContainerId||!1,this.errorContainerId=options.errorContainerId||!1,this.loaderClass=options.loaderClass||"loading",this.customClass=options.customClass||!1,this.site_url=options._parent._parent.options.site_url||!1,this.resource_url=options._parent._parent.options.resource_url||!1,this.detailsType=options.detailsType||"full",this.onSuccess=options.onSuccess||function(){},this.onError=options.onError||function(){},this.onValidate=options.onValidate||function(){},this.checking=!1,this.urlOK=!1,this.previousURL="",this.formObj._self=this,this}function CsPermissionsSelector(options){return this.permissions={},this.changed=!1,this}function CsComponentsInputV2(id,options){this.objectType="input",this.options=options||{},this._parent=this.options._parent,id instanceof jQuery?(this.container=id,this.containerId=this.container.attr("id")?this.container.attr("id"):"csInput"+Math.floor(100000001*Math.random()),this.container.attr("id",this.containerId)):(this.container=$("#"+id),this.containerId=id),this.options.width=this.options.width?this.options.width:!1,this.options.maxWidth=this.options.maxWidth?this.options.maxWidth:!1,this.options.minWidth=this.options.minWidth?this.options.minWidth:!1,this.options.height=this.options.height?this.options.height:!1,this.options.maxLength=this.options.maxLength?this.options.maxLength:!1,this.options.notShowMaxLength=this.options.notShowMaxLength?this.options.notShowMaxLength:!1,this.options.maxLengthWidth=this.options.maxLengthWidth?this.options.maxLengthWidth:!1,this.options.maxLengthOnSameLine=this.options.maxLengthOnSameLine?this.options.maxLengthOnSameLine:!1,this.options.showTick=this.options.showTick?this.options.showTick:!1,this.options.defaultText=this.options.defaultText?this.options.defaultText:!1,0==this.options.defaultText&&"string"==typeof this.options.placeholder&&(this.options.defaultText=""!=this.options.placeholder?this.options.placeholder:!1),this.options.resizable=this.options.resizable?this.options.resizable:!1,this.options.onFocus=this.options.onFocus?this.options.onFocus:function(){},this.options.onPaste=this.options.onPaste?this.options.onPaste:function(){},this.options.onBlur=this.options.onBlur?this.options.onBlur:function(){},this.options.onEnter=this.options.onEnter?this.options.onEnter:function(){},this.options.name=this.options.name?this.options.name:"",this.options.color=this.options.color?this.options.color:"",this.options.size=this.options.size?this.options.size:"",this.options.fullWidth=this.options.fullWidth?this.options.fullWidth:!1,this.options.customClassName=this.options.customClassName?this.options.customClassName:"",this.options.attachment="undefined"!=typeof this.options.attachment?this.options.attachment:!1,this.options.ignoreEnterKey="undefined"!=typeof this.options.ignoreEnterKey?this.options.ignoreEnterKey:!1,this.options.borderArrow="boolean"==typeof this.options.borderArrow?this.options.borderArrow:!1,this.options.borderArrowPosition="string"==typeof this.options.borderArrowPosition&&-1!=["top","right","bottom","left"].indexOf(this.options.borderArrowPosition)?this.options.borderArrowPosition:"left",this.options.borderArrowIndent="number"==typeof this.options.borderArrowIndent?this.options.borderArrowIndent:!1,this.options.onKeyDown=this.options.onKeyDown?this.options.onKeyDown:function(){},this.options.expandMax=this.options.expandMax?this.options.expandMax:!1,this.options.expandMin=this.options.expandMin?this.options.expandMin:this.options.height,this.options.cropRight=this.options.cropRight?this.options.cropRight:!1,this.options.cropLeft=this.options.cropLeft?this.options.cropLeft:!1,this.options.numberInput=this.options.numberInput?this.options.numberInput:!1,this.options.onlyNumbers=this.options.onlyNumbers?this.options.onlyNumbers:!1,
this.options.negativesAndDecimals="boolean"==typeof this.options.negativesAndDecimals?this.options.negativesAndDecimals:!1,this.options.stopFillOnLimit=this.options.stopFillOnLimit?this.options.stopFillOnLimit:"number"==typeof this.options.maxLength&&0<this.options.maxLength?!0:!1,this.options.formatNumeric=this.options.formatNumeric?this.options.formatNumeric:!1,this.focusFunc=this.options.onFocus,this.blurFunc=this.options.onBlur,this.pasteFunc=this.options.onPaste,this.clickFunc=this.options.onClick||function(){},this.enterFunc=this.options.onEnter,this.keepOnFocus=this.options.keepOnFocus||!1,this.keyDownFunc=this.options.onKeyDown,this.options.disabled="boolean"==typeof this.options.disabled?this.options.disabled:!1,this.options.hasError="boolean"==typeof this.options.hasError?this.options.hasError:!1,this.baseClass=this.options.baseClass?this.options.baseClass:"input",this.maxLength={};var self=this;if(0==this.container.length)return console.log("could not load component for #"+this.containerId),!1;if(this.wrapper=$("<span />",{"class":"component input-wrapper "+this.baseClass,id:this.containerId+"Wrapper"}),this.container.wrap(this.wrapper),this.container.addClass("inner"),this.container.hasClass("no-visibility")&&this.container.removeClass("no-visibility"),this.wrapper=$("#"+this.containerId+"Wrapper"),""!=this.options.customClassName&&this.wrapper.addClass(this.options.customClassName),1==this.options.fullWidth&&(this.wrapper.hasClass("full-width")||this.wrapper.addClass("full-width")),""!=this.options.color&&(this.container.addClass("colored"),this.wrapper.addClass("color-"+this.options.color)),""!=this.options.size&&this.wrapper.addClass("size-"+this.options.size),this.options.cropRight&&this.wrapper.addClass("crop-right"),this.options.cropLeft&&this.wrapper.addClass("crop-left"),this.options.borderArrow&&(this.wrapper.addClass("arrow-"+this.options.borderArrowPosition),this.borderArrowElement=$("<div />",{"class":"arrow"}).appendTo(this.wrapper),"number"!=typeof this.options.borderArrowIndent?this.borderArrowElement.addClass("centered"):-1!=["top","bottom"].indexOf(this.options.borderArrowPosition)?this.borderArrowElement.css("left",this.options.borderArrowIndent+"px"):-1!=["left","right"].indexOf(this.options.borderArrowPosition)&&this.borderArrowElement.css("top",this.options.borderArrowIndent+"px")),this.options.name&&this.container.attr("name",this.options.name),this.options.numberInput&&this.container.css("text-align","right"),""!=this.options.defaultText&&this.container.attr("placeholder",this.options.defaultText),this.options.width&&this.wrapper.width(this.options.width),this.options.minWidth&&this.wrapper.css("min-width",this.options.minWidth+"px"),this.options.maxWidth&&this.wrapper.css("max-width",this.options.maxWidth+"px"),this.options.height&&this.container.height(this.options.height),this.options.attachment&&(this.buildAttachment(),this.buildIcon(this.inputAttachment,this.options.attachment)),this.options.disabled&&this.disable(),this.options.hasError&&this.showError(),this.formatNumber=function(preserveCursorPos){"undefined"==typeof preserveCursorPos&&(preserveCursorPos=!0);var val=self.getValue();if(n=val.replace(/,/g,""),!isNaN(parseFloat(n))&&isFinite(n)){var parts=n.toString().split(".");parts[0]=parts[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");var result=parts.join(".");if(result!=val&&","!=val.charAt(val.length-1)){var diff=result.length-val.length,pos=self.getSelection();self.setValue(parts.join(".")),preserveCursorPos&&self.setSelection(pos.end+diff,pos.end+diff)}}},this.options.maxLength){this.maxLength=this._parent.getInputMaxLength(this.containerId,{version:2,maxLength:this.options.maxLength,showTick:this.options.showTick,fullWidth:this.options.fullWidth,_parentInput:this});var isTextArea="textarea"==this.container[0].nodeName.toLowerCase();if(isTextArea){this.maxLength.fieldOuterContainer.addClass("textarea");var maxLengthContainerHeight=Number(this.maxLength.countContainer.height());this.options.maxLengthOnSameLine||this.container.css("padding-bottom",parseInt(this.container.css("padding-bottom"))+maxLengthContainerHeight)}else{var maxLengthContainerWidth=this.options.maxLengthWidth?this.options.maxLengthWidth:Number(this.maxLength.countContainer.width());this.container.css("padding-right",parseInt(this.container.css("padding-right"))+maxLengthContainerWidth)}}this.options.notShowMaxLength&&(this.maxLength.countContainer.css("display","none"),this.maxLength.countContainer.css("width","0")),this.container.bind("focus.inputDefault",function(e){self.wrapper.addClass("focused"),self.focusFunc(e)}),this.container.bind("blur.inputDefault",function(e){self.wrapper.removeClass("focused"),self.blurFunc()}),this.container.bind("paste.inputDefault",function(e){setTimeout(function(){self.pasteFunc()},10)}),this.container.bind("click.inputDefault",function(e){self.clickFunc()}),this.container.bind("keypress.inputDefault",function(e){if(e&&13==e.keyCode&&self.enterFunc(self.container.val(),e),self.options.onlyNumbers){var evt=e||window.event,keycode=evt.keyCode||evt.which,specialkeys=[46,8,9,27,13];if(-1!=specialkeys.indexOf(keycode))return!0;if(65==keycode&&!0===evt.ctrlKey)return!0;if(keycode>=35&&39>=keycode)return!0;if(self.options.negativesAndDecimals&&-1!=[45,190].indexOf(keycode))return!0;if(navigator.platform.toUpperCase().indexOf("MAC")>=0&&e.metaKey&&97==keycode)return!0;key=String.fromCharCode(keycode);var regex=/[0-9]|\.|,|\s/;return regex.test(key)?!0:(evt.returnValue=!1,evt.preventDefault&&evt.preventDefault(),!1)}}),this.container.bind("keydown.inputDefault",function(e){if(self.options.stopFillOnLimit&&"function"==typeof self.maxLength.getCharactersLeftNum&&self.maxLength.getCharactersLeftNum()<=0){self.container.val(self.container.val().substring(0,self.options.maxLength));var charactesLeft=self.maxLength.getCharactersLeftNum();self.maxLength.updateCountContainer(charactesLeft)}self.options.formatNumeric&&("undefined"!=typeof self.formatTimeout&&clearTimeout(self.formatTimeout),self.formatTimeout=setTimeout(self.formatNumber,200)),setTimeout(function(){self.keyDownFunc(e)},1)}),this.container.bind("keyup.inputDefault",function(e){if(self.options.stopFillOnLimit&&"function"==typeof self.maxLength.getCharactersLeftNum&&self.maxLength.getCharactersLeftNum()<=0){self.container.val(self.container.val().substring(0,self.options.maxLength));var charactesLeft=self.maxLength.getCharactersLeftNum();self.maxLength.updateCountContainer(charactesLeft)}}),this.options.resizable&&(self.resizeHandler=self._parent.resizableTextarea(self.containerId,{_parentInput:this,expandMin:self.options.expandMin,expandMax:self.options.expandMax,debug:self.options.debug,ignoreEnterKey:self.options.ignoreEnterKey})),this.options.formatNumeric&&this.formatNumber()}function CsComponentsInputMaxLengthV2(containerId,options){if(this.options=options||{},this._parent=this.options._parent,this.containerId=containerId,this.options.maxLength=this.options.maxLength?this.options.maxLength:"160",this.options.fullWidth=this.options.fullWidth?this.options.fullWidth:!1,this.container=$("#"+this.containerId),0==this.container.length)return console.log("could not load component for #"+this.containerId),!1;this.fieldOuterContainer=$("#"+this.containerId+"Wrapper"),this.countContainer=$("<span />",{"class":"input-counter",id:"cs-field-length-count-"+this.containerId}).insertAfter(this.container);var isTextArea="textarea"==this.container[0].nodeName.toLowerCase();isTextArea&&this.countContainer.addClass("textarea-counter");var leftValue=this.options.maxLength;this.container.val()!=this.options._parentInput.options.defaultText&&(leftValue=this.getCharactersLeftNum()),this.updateCountContainer(leftValue);var self=this;return this.container.bind("keydown paste",function(e){setTimeout(function(){var charactesLeft=self.getCharactersLeftNum();self.updateCountContainer(charactesLeft)},1)}),this}function CsComponentsDropdownV2(id,list,options){this.objectType="dropdown",this.options=options||{},this._parent=options._parent,id instanceof jQuery?(this.container=id,this.id=this.container.attr("id")?this.container.attr("id"):"csDropdown"+Math.floor(100000001*Math.random()),this.container.attr("id",this.id)):(this.container=$("#"+id),this.id=id),this.list=list,this.options.name=this.options.name?this.options.name:"",this.options.color=this.options.color?this.options.color:"",this.options.size=this.options.size?this.options.size:"",this.options.width=this.options.width||!1,this.options.fullWidth=this.options.fullWidth?this.options.fullWidth:!1,this.options.customClassName=this.options.customClassName?this.options.customClassName:"",this.options.cropLeft=this.options.cropLeft?this.options.cropLeft:!1,this.options.cropRight=this.options.cropRight?this.options.cropRight:!1,this.options.rightTexts=this.options.rightTexts?this.options.rightTexts:!1,this.options.openedClassName=this.options.openedClassName||"opened",this.options.titleStay="boolean"==typeof this.options.titleStay?this.options.titleStay:!1,this.options.titleTooltip="string"==typeof this.options.titleTooltip?this.options.titleTooltip:"string"==typeof this.options.captionTitleAttr?this.options.captionTitleAttr:!1,this.options.useIcons=this.options.useIcons?this.options.useIcons:!1,this.options.icon="undefined"!=typeof this.options.icon?this.options.icon:!1,this.options.name=this.options.name||!1,this.options.title=this.options.title||!1,this.options.id=this.options.id||!1,this.options.croptext=this.options.croptext||!1,this.options.cropTitle=this.options.cropTitle||!1,this.options.noArrow=this.options.noArrow||!1,this.options.arrowLeft=this.options.arrowLeft||!1,this.options.defaultValue="undefined"!=typeof this.options.defaultValue?this.options.defaultValue:!1,this.options.hideTitle=this.options.hideTitle||!1,this.options.noTitle="boolean"==typeof this.options.noTitle?this.options.noTitle:!1,this.options.noTooltip="boolean"==typeof this.options.noTooltip?this.options.noTooltip:!1,this.options.zIndex=this.options.zIndex||!1,this.options.noSelectable=this.options.noSelectable||!1,this.options.showTick="boolean"==typeof this.options.showTick?this.options.showTick:!0,this.options.maxDropHeight=this.options.maxDropHeight||!1,this.options.maxDropWidth=this.options.maxDropWidth||!1,this.options.scrollToSelected=this.options.scrollToSelected||!0,this.options.allowTextSearch="boolean"==typeof this.options.allowTextSearch?this.options.allowTextSearch:!0,this.options.buttonBehaviour="boolean"==typeof this.options.buttonBehaviour?this.options.buttonBehaviour:!1,this.options.buttonUpdateCaption="boolean"==typeof this.options.buttonUpdateCaption?this.options.buttonUpdateCaption:!1,this.options.buttonHideSelected="boolean"==typeof this.options.buttonHideSelected?this.options.buttonHideSelected:!0,this.options.disabled="boolean"==typeof this.options.disabled?this.options.disabled:!1,this.options.hasError="boolean"==typeof this.options.hasError?this.options.hasError:!1,this.options.rel=this.options.rel||!1,this.options.refreshOnDropdown=this.options.refreshOnDropdown||!1,this.options.dropRight=this.options.dropRight||!1,this.options.dropUp=this.options.dropUp||!1,this.options.dropRelativeTo=this.options.dropRelativeTo||!1,this.options.onChange=this.options.onChange||function(selected_el){},this.options.onSelect=this.options.onSelect||function(selected_el){},this.options.onMouseOver=this.options.onMouseOver||function(){},this.options.onMouseOut=this.options.onMouseOut||function(){},this.options.onButtonClick=this.options.onButtonClick||function(e,obj){},this.options.onClick=this.options.onClick||function(){},this.options.onBlur=this.options.onBlur||function(){},this.onElementClickTemp=function(el){},this.searchTimeout=!1,this.preselectedIndex=!1,this.selectedIndex=!1,this.baseClass=this.options.baseClass?this.options.baseClass:"dropdown",this.onChange=this.options.onChange,this.onSelect=this.options.onSelect,this.onMouseOut=this.options.onMouseOut,this.onMouseOver=this.options.onMouseOver,this.isOpened=!1,this.isFocused=!1,this.isClicked=!1,this.container.addClass("component"),this.container.addClass(this.baseClass),""!=this.options.customClassName&&this.container.addClass(this.options.customClassName),1==this.options.fullWidth&&(this.container.hasClass("full-width")||this.container.addClass("full-width")),""!=this.options.color&&this.container.addClass("color-"+this.options.color),""!=this.options.size&&this.container.addClass("size-"+this.options.size),this.options.width&&this.container.width(this.options.width),this.options.cropLeft&&this.container.addClass("crop-left"),this.options.cropRight&&this.container.addClass("crop-right"),this.options.zIndex&&this.container.css("z-index",this.options.zIndex),this.options.arrowLeft&&this.container.addClass("arrow-left"),this.options.dropRight&&this.container.addClass("drop-right");var prioritized=!1;for(var i in this.list)"undefined"!=typeof this.list[i].select_prioritize&&!0===this.list[i].select_prioritize&&(prioritized=!0);for(var i in this.list)if(this.list[i].selected&&(this.selectedIndex=i,!prioritized||!0===this.list[i].select_prioritize))break;if(this.selectedIndex=options.selectedIndex||this.selectedIndex||!1,!1===this.options.title&&!1===this.selectedIndex&&(this.selectedIndex=0,this.options.buttonBehaviour&&this.list[this.selectedIndex].onClick&&(this.options.onClick=this.list[this.selectedIndex].onClick)),this.captionContainer=$("<span/>",{"class":"caption"}).appendTo(this.container),this.options.hideTitle&&this.captionContainer.addClass("hide-title"),this.options.name||this.options.id){var valueContainerParams={};valueContainerParams.type="hidden",this.selectedIndex!==!1&&(valueContainerParams.value=this.list[this.selectedIndex].value),this.options.name&&(valueContainerParams.name=this.options.name),this.options.id&&(valueContainerParams.id=this.options.id),this.options.defaultValue!==!1&&(valueContainerParams.value=this.options.defaultValue),this.valueContainer=$("<input/>",valueContainerParams).prependTo(this.container)}this.options.rel&&this.valueContainer.attr("rel",this.options.rel),!0===this.options.allowTextSearch&&(this.searchContainer=$("<input />",{type:"text","class":"no"}).prependTo(this.container),this.searchContainer.css("width","1px"),this.searchContainer.css("height","1px"),this.searchContainer.css("padding","0px"),this.searchContainer.css("margin","0px"),this.searchContainer.css("border-width","0px"),this.searchContainer.css("position","absolute"),this.searchContainer.css("line-height","1px"));var captionTitle="",titleTooltip=!1;this.options.titleTooltip&&(titleTooltip=this.options.titleTooltip);var useIcon=!1;this.options.icon&&(useIcon=this.options.icon),this.options.title&&!1===this.selectedIndex?captionTitle=this.options.title:(this.selectedIndex||0==this.selectedIndex)&&(captionTitle=this.list[this.selectedIndex].text.replace(/&gt;/g,">"),captionTitle=captionTitle.replace(/&lt;/g,"<"),"number"==typeof this.options.cropTitle&&captionTitle.length>this.options.cropTitle&&(captionTitle=captionTitle.substr(0,this.options.cropTitle)+"..."),"undefined"!=typeof this.list[this.selectedIndex].icon&&(useIcon=this.list[this.selectedIndex].icon)),this.options.noTitle?titleTooltip=captionTitle:(this.captionTitleContainer=$("<span />",{"class":"title"}).appendTo(this.captionContainer),this.options.croptext&&this.captionTitleContainer.addClass("ellipsis"),!1!==this.options.title&&!1===this.selectedIndex?this.setCustomTitle(this.options.title):this.updateCaption()),useIcon&&(this.buildCaptionIcon(),this.buildIcon(this.captionIcon,useIcon)),titleTooltip&&!this.options.noTooltip&&(this.captionContainer.attr("title",titleTooltip),this.captionContainer.addClass("cs-title-tip")),this.options.noArrow||(this.captionArrow=$("<span />",{"class":"arrow"}),this.options.arrowLeft?(this.captionArrow.addClass("left"),this.captionArrow.prependTo(this.captionContainer)):this.captionArrow.appendTo(this.captionContainer)),this.hiddenContainer=$("<span />",{"class":"drop"}).css("min-width",this.container.outerWidth()+"px").appendTo(this.container),this.options.maxDropWidth&&(this.captionContainer.css("max-width",this.options.maxDropWidth+"px"),this.hiddenContainer.css("max-width",this.options.maxDropWidth+"px")),this.options.maxDropHeight&&(this.hiddenContainer.css("max-height",this.options.maxDropHeight+"px"),this.hiddenContainer.css("overflow-y","auto")),this.options.dropWidth&&this.hiddenContainer.width(this.options.dropWidth),this.listContainer=$("<ul/>",{"class":"elements"}).appendTo(this.hiddenContainer),this.listContainer.elements=[];var replacedText;for(var i in this.list)replacedText=this.list[i].text||"",this.list[i].text=replacedText.replace(/&lt;/g,"<").replace(/&gt;/g,">"),this.list[i].breakLine?(this.listContainer.elements[i]=$("<li />",{"class":"break"}).appendTo(this.listContainer),$("<span />").appendTo(this.listContainer.elements[i])):(this.listContainer.elements[i]=$("<li />",{rel:i}).appendTo(this.listContainer),this.listContainer.elements[i].textContainer=$("<span />",{text:this.list[i].text}).addClass("entry").prependTo(this.listContainer.elements[i]),this.list[i].indented&&"number"==typeof this.list[i].indented&&this.list[i].indented>1?this.listContainer.elements[i].textContainer.css("padding-left",parseInt(20*parseInt(this.list[i].indented))+"px"):this.list[i].indented&&this.listContainer.elements[i].addClass("indented"),this.list[i].entryClassName&&this.listContainer.elements[i].textContainer.addClass(this.list[i].entryClassName),this.list[i].disabled&&this.listContainer.elements[i].addClass("disabled"),this.list[i].hidden&&this.listContainer.elements[i].addClass("hidden"),this.list[i].selected&&this.listContainer.elements[i].addClass("selected"),this.list[i].itemClass&&this.listContainer.elements[i].addClass(this.list[i].itemClass),this.list[i].indent&&this.listContainer.elements[i].css("marginLeft",this.list[i].indent),this.options.showTick&&(this.listContainer.elements[i].tick=$("<span />",{"class":"tick"}).prependTo(this.listContainer.elements[i])),"undefined"!=typeof this.list[i].icon&&1==this.options.useIcons&&(this.listContainer.elements[i].icon=$("<span />",{"class":"icon"}),this.options.showTick?this.listContainer.elements[i].icon.insertAfter(this.listContainer.elements[i].tick):this.listContainer.elements[i].icon.prependTo(this.listContainer.elements[i]),this.buildIcon(this.listContainer.elements[i].icon,this.list[i].icon)),this.list[i].rightText&&(this.listContainer.elements[i].textRightContainer=$("<span />",{"class":"alt",text:this.list[i].rightText}).appendTo(this.listContainer.elements[i])),this.selectedIndex==i&&this.options.buttonBehaviour&&this.options.buttonHideSelected&&this.listContainer.elements[i].hide());this.options.disabled&&this.disable();var self=this;$(document).keyup(function(e){if(self.isOpened){var event=e;setTimeout(function(){if(38!=event.which)if(40!=event.which){if(13==event.which)return void(self.preselectedIndex!==!1?self.onElementClick(event,self.preselectedIndex):self.onElementClick(event,self.selectedIndex));if("undefined"!=typeof self.searchContainer){var val=self.searchContainer.val();if(val){for(var i in self.list){var searchVal=self.list[i].searchText?self.list[i].searchText:self.list[i].text;if(0==searchVal.toLowerCase().indexOf(val.toLowerCase())){if(self.preselectElement(i),self.options.maxDropHeight){self.hiddenContainer.scrollTop(0);var topPosition=self.listContainer.elements[i].position().top;self.hiddenContainer.scrollTop(topPosition)}break}}clearTimeout(self.searchTimeout),self.searchTimeout=setTimeout(function(){self.clearSearchContainer()},1e3)}}}else{if(self.preselectedIndex!==!1&&self.preselectedIndex<self.listContainer.elements.length-1)return void self.preselectElement(parseInt(parseInt(self.preselectedIndex)+1));if(0==self.preselectedIndex)return void self.preselectElement(0)}else{if(self.preselectedIndex!==!1&&self.preselectedIndex>0)return void self.preselectElement(self.preselectedIndex-1);if(0==self.preselectedIndex)return void self.preselectElement(!1)}},1)}}),this.options.buttonBehaviour?(this.captionArrow.bind("click.buttonList",function(e){e.stopPropagation(),self.isClicked=!0,self.onDropdownClick(e)}),this.captionContainer.bind("click.default",function(e){self.options.onClick.call(e,self)})):this.captionContainer.bind("click.default",function(e){self.isClicked=!0,self.onDropdownClick(e),self.options.onClick.call(e,self)}),$(document).bind("click",function(e){self.onWindowObjectClick(e)});for(var i in this.listContainer.elements)this.list[i].breakLine||this.list[i].disabled||(this.listContainer.elements[i].on("click.default",function(e){self.onElementClick(e,$(this).attr("rel"))}),this.listContainer.elements[i].bind("mouseover.default",function(e){var currentElement=$(this).attr("rel");"string"==typeof self.list[currentElement].hoverText&&""!=self.list[currentElement].hoverText&&self.listContainer.elements[currentElement].textContainer.text(self.list[currentElement].hoverText),self.preselectElement(currentElement)}),this.listContainer.elements[i].on("mouseout.default",function(e){var currentElement=$(this).attr("rel");"string"==typeof self.list[currentElement].hoverText&&""!=self.list[currentElement].hoverText&&self.listContainer.elements[currentElement].textContainer.text(self.list[currentElement].text)}),this.list[i].onMouseOver&&this.listContainer.elements[i].on("mouseover.custom",function(e){self.onListItemMouseOver($(this).attr("rel"))}),this.list[i].onMouseOut&&this.listContainer.elements[i].on("mouseout.custom",function(e){self.onListItemMouseOut($(this).attr("rel"))}));return"undefined"!=typeof this.searchContainer&&(this.searchContainer.focus(function(e){self.focusTimeout||(self.focusTimeout=setTimeout(function(){self.isFocused=!0,self.isClicked||self.onDropdownClick(e),self.isClicked=!1,clearTimeout(self.focusTimeout),delete self.focusTimeout},1))}),this.searchContainer.bind("blur",function(e){self.isFocused=!1,setTimeout(function(){self.isClicked||self.onBlur(e),self.isClicked=!1},1)})),this.container.on("mousedown.main",function(e){self.isClicked=!0}),this.captionContainer.on("mouseover.main",function(e){self.onMouseOver()}),this.captionContainer.on("mouseout.main",function(e){self.onMouseOut()}),this}function CsComponentsActionMenu(id,list,options){return this.options=$.extend({baseClass:"dropdown action-menu",noArrow:!0,dropRight:!0,noTitle:!0,noTooltip:!0,titleStay:!0,allowTextSearch:!1,showTick:!1,icon:{fa:"fa-ellipsis-v"}},options),new CsComponentsDropdownV2(id,list,this.options)}function CsComponentsCheckboxV2(containerId,options){if(this.objectType="checkbox",this.containerId=containerId,this.options=options||{},this.options.onClick=this.options.onClick||function(){},this.options.rel=this.options.rel||!1,this.checked="boolean"==typeof this.options.checked?this.options.checked:!1,this.disabled="boolean"==typeof this.options.disabled?this.options.disabled:!1,this.onUserClick=this.options.onClick,this.onUserCheck=this.options.onCheck||function(){},this.onUserUncheck=this.options.onUncheck||function(){},this.options.displayBlock="boolean"==typeof this.options.displayBlock?this.options.displayBlock:!1,this.options.size=this.options.size?this.options.size:"",this.options.leftLabel="boolean"==typeof this.options.leftLabel?this.options.leftLabel:!1,this.baseClass=this.options.baseClass?this.options.baseClass:"checkbox",this.value="undefined"!=typeof this.options.value?this.options.value:!1,this.name="string"==typeof this.options.name&&""!=this.options.name?this.options.name:!1,this.label="string"==typeof this.options.label&&""!=this.options.label?this.options.label:!1,this.tooltip="string"==typeof this.options.tooltip&&""!=this.options.tooltip?this.options.tooltip:!1,this.container=$("#"+this.containerId),0==this.container.length)return console.log("could not load component for #"+this.containerId),!1;this.container.addClass("component toggler"),this.container.addClass(this.baseClass),this.label&&("boolean"==typeof this.options.htmlLabel&&this.options.htmlLabel?(this.container.html(this.label),this.container.find("a").bind("click.labelLink",function(e){e.stopPropagation()})):this.container.text(this.label),!1!==this.tooltip&&(this.tooltipContainer=$("<span />").addClass("tooltip-origin").attr("title",this.tooltip).appendTo(this.container),cs.components().titleTips(this.tooltipContainer))),""!=this.options.size&&this.container.addClass("size-"+this.options.size),this.options.displayBlock&&this.container.addClass("block"),this.checkBox=$("<span />",{"class":"check"}),this.options.leftLabel?(this.container.addClass("left-label"),this.checkBox=this.checkBox.appendTo(this.container)):this.checkBox=this.checkBox.prependTo(this.container);var self=this;if(this.container.bind("click",function(e){self.disabled||self.defaultOnClick(e)}),this.name){var checkboxInputParams={type:"checkbox",value:this.value,name:this.name};this.checkboxInput=$("<input />",checkboxInputParams).prependTo(this.container),this.checkboxInput.prop("checked",!1),this.options.rel&&this.checkboxInput.attr("rel",this.options.rel)}this.checked&&(this.container.addClass("checked"),this.checkboxInput&&this.checkboxInput.prop("checked",!0)),this.disabled&&this.disable()}function CsComponentsRadios(idName,options){this._parent=options._parent,this.idName=idName,this.radios=this._parent._parent.radios[this.idName]||{}}function CsComponentsRadioV2(containerId,idName,options){if(this.objectType="radio",this.containerId=containerId,this.options=options||{},this._parent=options._parent,this.idName=idName||!1,this.checked="boolean"==typeof this.options.checked?this.options.checked:!1,this.disabled="boolean"==typeof this.options.disabled?this.options.disabled:!1,this.options.onClick=this.options.onClick||function(){},this.onUserClick=this.options.onClick,this.options.displayBlock="boolean"==typeof this.options.displayBlock?this.options.displayBlock:!1,this.options.size=this.options.size?this.options.size:"",this.baseClass=this.options.baseClass?this.options.baseClass:"radio",this.rel=this.options.rel?this.options.rel:!1,this.name="string"==typeof this.options.name&&""!=this.options.name?this.options.name:!1,this.value="undefined"!=typeof this.options.value?this.options.value:!1,this.label="string"==typeof this.options.label&&""!=this.options.label?this.options.label:!1,this.container=$("#"+this.containerId),0==this.container.length)return console.log("could not load component for #"+this.containerId),!1;if(!1===this.label&&this.container.data("label")&&(this.label=this.container.data("label")),this.container.addClass("component toggler"),this.container.addClass(this.baseClass),this.label)if("boolean"==typeof this.options.htmlLabel&&this.options.htmlLabel)this.container.html(this.label),this.container.find("a").bind("click.labelLink",function(e){e.stopPropagation()});else{var label="";label=this.label.replace(/&gt;/g,">"),label=label.replace(/&lt;/g,"<"),this.container.text(label)}if(this.name){var radioInputParams={type:"radio",value:this.value,name:this.name};this.radioInput=$("<input />",radioInputParams).prependTo(this.container),this.radioInput.prop("checked",!1)}this.checked&&(this.container.addClass("checked"),this.radioInput&&this.radioInput.prop("checked",!0)),this.disabled&&this.disable(),""!=this.options.size&&this.container.addClass("size-"+this.options.size),this.options.displayBlock&&this.container.addClass("block"),this.checkBox=$("<span />",{"class":"check"}).prependTo(this.container);var self=this;this.container.bind("click",function(e){self.disabled||self.defaultOnClick()})}function CsComponentsButtonV2(id,options){if(this.objectType="button",this.options=options||{},this.container={},id instanceof jQuery?(this.container=id,this.id=this.container.attr("id")?this.container.attr("id"):"csButton"+Math.floor(100000001*Math.random()),this.container.attr("id",this.id)):(this.container=$("#"+id),this.id=id),0==this.container.length)return console.log("could not load component for #"+this.id),!1;this.options.color=this.options.color?this.options.color:"",this.options.size=this.options.size?this.options.size:"",this.options.fullWidth=this.options.fullWidth?this.options.fullWidth:!1,this.options.customClassName=this.options.customClassName?this.options.customClassName:"",this.options.cropLeft=this.options.cropLeft?this.options.cropLeft:!1,this.options.cropRight=this.options.cropRight?this.options.cropRight:!1,this.options.width=this.options.width?this.options.width:!1,this.options.disabled=this.options.disabled?this.options.disabled:!1,this.options.title=this.options.title||"",this.options.htmlTitle=this.options.htmlTitle||"",this.options.titleTooltip="string"==typeof this.options.titleTooltip?this.options.titleTooltip:"string"==typeof this.options.captionTitleAttr?this.options.captionTitleAttr:!1,this.options.onClick=this.options.onClick||function(e){},this.options.onMouseOver=this.options.onMouseOver||function(e){},this.options.onMouseOut=this.options.onMouseOut||function(e){},this.options.loaderToggleUrl=this.options.loaderToggleUrl||!1,this.options.icon="undefined"!=typeof this.options.icon?this.options.icon:!1,this.options.loaderUrl=this.options.loaderUrl||!1,this.baseClass="undefined"!=typeof this.options.baseClass?this.options.baseClass:"button",this.loading=!1,this.onMouseOver=this.options.onMouseOver,this.onMouseOut=this.options.onMouseOut,this.disabled=this.options.disabled,this.container.addClass("component "+this.baseClass);var self=this;""!=this.options.customClassName&&this.container.addClass(this.options.customClassName),1==this.options.fullWidth?this.container.hasClass("full-width")||this.container.addClass("full-width"):this.options.width&&this.container.width(this.options.width),""!=this.options.color&&this.container.addClass("color-"+this.options.color),""!=this.options.size&&this.container.addClass("size-"+this.options.size),this.options.cropRight&&this.container.addClass("crop-right"),this.options.cropLeft&&this.container.addClass("crop-left"),this.disabled&&this.disable(),this.captionContainer=$("<span/>",{"class":"caption"}).appendTo(this.container),this.options.titleTooltip&&(this.captionContainer.attr("title",this.options.titleTooltip),this.captionContainer.addClass("cs-title-tip")),""!=this.options.title&&(this.captionTitleContainer=$("<span />",{"class":"title"}).appendTo(this.captionContainer),!0===this.options.htmlTitle?this.captionTitleContainer.html(this.options.title):this.captionTitleContainer.text(this.options.title)),this.options.icon&&(this.buildCaptionIcon(),this.buildIcon(this.captionIcon,this.options.icon)),this.onElementClickTemp=this.options.onClick;var self=this;this.container.on("mouseover.default",function(e){self.options.disabled||self.onMouseOver(e)}),this.container.on("mouseout.default",function(e){self.options.disabled||self.onMouseOut(e)}),this.container.on("click.default",function(e){self.disabled||self.onElementClickTemp(e)}),"string"==typeof this.options.hoverText&&""!=this.options.hoverText&&(this.captionContainer.on("mouseover.captionHoverText",function(){self.captionContainer.css("width",self.captionContainer.outerWidth()+"px"),self.captionTitleContainer.text(self.options.hoverText)}),this.captionContainer.on("mouseout.captionHoverText",function(){self.captionContainer.css("width",""),self.captionTitleContainer.text(self.options.title)})),"string"==typeof this.options.loaderToggleUrl&&""!=$.trim(this.options.loaderToggleUrl)&&this.setupLoaderToggling()}function CsComponentsAutocompleteV2(containerId,options){this.objectType="autocomplete",this.containerId=containerId,this.options=options||{},this.options.url=options.url||null,this.options.data="object"==typeof options.data&&options.data.constructor==Array?options.data:null,this.options.name=this.options.name?this.options.name:!1,this.options.id=this.options.id?this.options.id:!1,this.options.color=this.options.color?this.options.color:"",this.options.size=this.options.size?this.options.size:"",
this.options.fullWidth=this.options.fullWidth?this.options.fullWidth:!1,this.options.customClassName=this.options.customClassName?this.options.customClassName:"",this.options.openedClassName=this.options.openedClassName?this.options.openedClassName:"opened",this.options.loadingClass=this.options.loadingClass?this.options.loadingClass:"pending",this.options.cropRight=this.options.cropRight?this.options.cropRight:!1,this.options.cropLeft=this.options.cropLeft?this.options.cropLeft:!1,this.options.borderArrow="boolean"==typeof this.options.borderArrow?this.options.borderArrow:!1,this.options.borderArrowPosition="string"==typeof this.options.borderArrowPosition&&-1!=["top","right","bottom","left"].indexOf(this.options.borderArrowPosition)?this.options.borderArrowPosition:"left",this.options.borderArrowIndent="number"==typeof this.options.borderArrowIndent?this.options.borderArrowIndent:!1,this.options.disabled=this.options.disabled?this.options.disabled:!1,this.options.inputClass=options.inputClass||"inner",this.options.resultsClass=options.resultsClass||"autocomplete-suggestions",this.options.lineSeparator=options.lineSeparator||"\n",this.options.cellSeparator=options.cellSeparator||"|",this.options.minChars=options.minChars||1,this.options.delay=options.delay||400,this.options.matchCase=options.matchCase||0,this.options.matchSubset=options.matchSubset||1,this.options.matchContains=options.matchContains||0,this.options.cacheLength=options.cacheLength||0,this.options.mustMatch=options.mustMatch||0,this.options.defaultText=options.defaultText||!1,this.options.hideCross=options.hideCross||!1,this.options.value=options.value||"",this.options.text=options.text||"",this.options.extraParams=options.extraParams||{},this.options.loadingClass=options.loadingClass||"",this.options.selectFirst=options.selectFirst||!1,this.options.selectText=options.selectText||!1,this.options.selectOnly=options.selectOnly||!1,this.options.allowEmail=options.allowEmail||!1,this.options.allowText=options.allowText||!1,this.options.afterClear=options.afterClear||function(){},this.options.onClear=options.onClear||function(){},this.options.onBlur=options.onBlur||function(){},this.options.maxItemsToShow=options.maxItemsToShow||-1,this.options.autoFill=options.autoFill||!1,this.options.width=parseInt(options.width,10)||0,this.options.autocompleteWidth=parseInt(options.autocompleteWidth,10)||0,this.options.onChange=this.options.onChange||function(selected_el){},this.options.onSelect=this.options.onSelect||function(selected_el){},this.onChange=this.options.onChange,this.onSelect=this.options.onSelect,this.autocomplete=!1,this.disabled=!1,this.baseClass=this.options.baseClass?this.options.baseClass:"input";var self=(document.getElementById(containerId),this);return this.container=$("#"+this.containerId),0==this.container.length?(console.log("could not load component for #"+this.containerId),!1):(this.options._main=this,this.wrapper=$("<span />",{"class":"component input-wrapper "+this.baseClass,id:this.containerId+"Wrapper"}),this.container.wrap(this.wrapper),this.container.addClass("inner"),this.wrapper=$("#"+this.containerId+"Wrapper"),""!=this.options.customClassName&&this.wrapper.addClass(this.options.customClassName),1==this.options.fullWidth&&(this.wrapper.hasClass("full-width")||this.wrapper.addClass("full-width")),""!=this.options.color&&(this.container.addClass("colored"),this.wrapper.addClass("color-"+this.options.color)),""!=this.options.size&&this.wrapper.addClass("size-"+this.options.size),this.options.cropRight&&this.wrapper.addClass("crop-right"),this.options.cropLeft&&this.wrapper.addClass("crop-left"),this.options.borderArrow&&(this.wrapper.addClass("arrow-"+this.options.borderArrowPosition),this.borderArrowElement=$("<div />",{"class":"arrow"}).appendTo(this.wrapper),"number"!=typeof this.options.borderArrowIndent?this.borderArrowElement.addClass("centered"):-1!=["top","bottom"].indexOf(this.options.borderArrowPosition)?this.borderArrowElement.css("left",this.options.borderArrowIndent+"px"):-1!=["left","right"].indexOf(this.options.borderArrowPosition)&&this.borderArrowElement.css("top",this.options.borderArrowIndent+"px")),""!=this.options.defaultText&&this.container.attr("placeholder",this.options.defaultText),this.options.width&&this.wrapper.width(this.options.width),this.options.selectOnly&&(this.crossContainer=$("<span />",{"class":"clear-input",title:cs.txt("autocomplete :clear value")}),this.options.hideCross&&this.crossContainer.addClass("hidden"),"undefined"!=typeof options.leftClear&&1==options.leftClear?this.crossContainer.insertBefore(this.container):this.crossContainer.insertAfter(this.container)),this.options.disabled&&this.disable(),this.setupAutocomplete(),this.focus=function(){setTimeout(function(){self.container.focus(),self.wrapper.addClass("focused")},1)},"undefined"!=typeof this.crossContainer&&this.crossContainer.bind("click",function(e){self.disabled||(self.clearValue(),self.options.afterClear(),self.container.focus(),self.wrapper.addClass("focused"))}),this)}function CsComponentsPopupV2(options){this._parent=options._parent,this.defaultOptions={},this.defaultOptions.mode=options.mode||"url",this.defaultOptions.width="number"==typeof options.width?options.width:!1,this.defaultOptions.height="number"==typeof options.height?options.height:!1,this.defaultOptions.title=options.title||"",this.defaultOptions.allowUserClose="boolean"==typeof options.allowUserClose?options.allowUserClose:"boolean"==typeof options.hideCross?!options.hideCross:!0,this.defaultOptions.closeOnEscape="boolean"==typeof options.closeOnEscape?options.closeOnEscape:!0,this.defaultOptions.requestMethod=options.requestMethod||"post",this.defaultOptions.postObject=options.postObject||{},this.defaultOptions.onClose=options.onClose||function(el){},this.defaultOptions.onDismiss=options.onDismiss||function(){},this.defaultOptions.onDisplay=options.onDisplay||function(){},this.defaultOptions.topPosition="number"==typeof options.topPosition?options.topPosition:!1,this.defaultOptions.overlayCloseButton="boolean"==typeof options.overlayCloseButton?options.overlayCloseButton:!1,this.defaultOptions.closeOnBlur=!0,this.defaultOptions.fitContent="boolean"==typeof options.fitContent?options.fitContent:!1,this.options=jQuery.extend({},this.defaultOptions),this.visible=!1,"number"==typeof options.version&&(this.version=options.version);var self=this;$("body").on("keydown",function(e){self.closeOnEscape(e)}),$(window).bind("scroll",function(e){self.onWindowScroll(e)})}function CsComponentsAlertV2(options){"undefined"==typeof options&&(options={}),this.options=options,this._parent="undefined"!=typeof options._parent?options._parent:!1,this.options.type="string"==typeof options.type?options.type:"ok",this.options.title="string"==typeof options.title?options.title:"ok"==this.options.type?"Success":"Error",this.options.text="string"==typeof options.text?options.text:!1,this.options.onClick=options.onClick||function(){},this.options.autoclose=options.autoclose||!1,this.options.autocloseTime=options.autocloseTime||1e3,this.options.method=options.method||("err"==this.options.type?"extend":"new"),this.options.onClose=options.onClose||function(){},this.options.onCustom=options.onCustom||function(){},this.options.forceClose=options.forceClose||!1,this.options.autoclose&&"extend"!=this.options.method&&(this.options.method="new"),this.popupOptions={html:!0,allowUserClose:!1},this.onClose=this.options.onClose,this.onButtonClick=this.options.onClick,this.container=$("<div />"),this.headerContainer={},this.footerContainer={},this.layoutContainer={},this.buttonContainer={},this.openPopup()}function CsComponentsConfirmV2(options){this.options=options||{},this._parent=this.options._parent,this.options.text=this.options.text||"",this.options.title=this.options.title||"",this.options.id=this.options.id||"cs-confirm-"+Math.floor(10000001*Math.random()),this.options.buttons=this.options.buttons||[],this.options.showClose=this.options.showClose||!1,this.options.onClose=this.options.onClose||function(){},this.options.onPopupClose=this.options.onPopupClose||function(){},this.options.width=this.options.width||!1,this.options.method=this.options.method||"new",this.container={},this.footerContainer={},this.headerContainer={},this.layoutContainer={},this.buttons=[],this.version=this.options.version||1,this.generateHtml();var self=this;this.popupOptions={html:!0,closeOnBlur:!1,closeOnEscape:!1,width:this.options.width,allowUserClose:this.options.showClose,onClose:function(){self.options.onPopupClose()}},"extend"!=this.options.method||csPopup.visible||(this.options.method="new"),"extend"==this.options.method?csPopup.showTempContent(this.container):csPopup.display(this.container,this.popupOptions)}function CsComponentsDaterV2(containerId,name,options){this.objectType="dater",this.options=options||{},this._parent=this.options._parent,this.containerId=containerId,this.options.color="string"==typeof this.options.color?this.options.color:!1,this.options.size="string"==typeof this.options.size?this.options.size:!1,this.options.customClassName=this.options.customClassName?this.options.customClassName:"",this.options.parentClassName="undefined"!=typeof this.options.parentClassName?this.options.parentClassName:"",this.options.hideDate="undefined"!=typeof this.options.hideDate?this.options.hideDate:!1,this.options.min=this.options.min?this.options.min:"",this.options.max=this.options.max?this.options.max:"",this.options.datePickerName="string"==typeof name&&""!=name?name:"string"==typeof this.options.datePickerName?this.options.datePickerName:!1,this.options.datePickerWidth="number"==typeof this.options.datePickerWidth?this.options.datePickerWidth:"number"==typeof this.options.width?this.options.width:130,this.options.datePickerDefaultText="string"==typeof this.options.datePickerDefaultText?this.options.datePickerDefaultText:"string"==typeof this.options.defaultText?this.options.defaultText:!1,this.options.datePickerAllowEmpty="boolean"==typeof this.options.datePickerAllowEmpty?this.options.datePickerAllowEmpty:!1,this.options.timePicker="boolean"==typeof this.options.timePicker?this.options.timePicker:!1,this.options.timePickerName="string"==typeof this.options.timePickerName?this.options.timePickerName:!1,this.options.dateFormat="string"==typeof this.options.dateFormat&&""!=this.options.dateFormat?this.options.dateFormat:"yyyy-mm-dd",this.options.dateDisplayFormat="string"==typeof this.options.dateDisplayFormat&&""!=this.options.dateDisplayFormat?this.options.dateDisplayFormat:"mmm d, yyyy",this.options.dateValue="string"==typeof this.options.value?this.options.value:"string"==typeof this.options.dateValue?this.options.dateValue:this.options.datePickerAllowEmpty?!1:this.getCurrentDate(),this.options.timeValue="string"==typeof this.options.timeValue?this.options.timeValue:"string"==typeof this.options.time?this.options.time:"00:00",this.options.onChange="function"==typeof this.options.onChange?this.options.onChange:function(newValue,whatChanged){},this.options.onDateChange="function"==typeof this.options.onDateChange?this.options.onDateChange:function(newValue){},this.options.onTimeChange="function"==typeof this.options.onTimeChange?this.options.onTimeChange:function(newValue){},this.onChange=this.options.onChange,this.onDateChange=this.options.onDateChange,this.onTimeChange=this.options.onTimeChange,this.disabled="boolean"==typeof this.options.disabled?this.options.disabled:!1,this.baseClass=this.options.baseClass?this.options.baseClass:"input";var self=this;return this.dateContainer=$("#"+this.containerId),0==this.dateContainer.length?(console.log("could not load component for #"+this.containerId),!1):(0!=this.options.datePickerName&&this.dateContainer.attr("name",this.options.datePickerName),!1!==this.options.datePickerDefaultText&&this.dateContainer.attr("placeholder",this.options.datePickerDefaultText),this.dateWrapper=$("<span />",{"class":"component input-wrapper "+this.baseClass+" dater",id:this.containerId+"DateWrapper"}),this.dateWrapper.width(this.options.datePickerWidth),this.dateContainer.wrap(this.dateWrapper),this.dateContainer.addClass("inner"),this.dateWrapper=$("#"+this.containerId+"DateWrapper"),this.dateArrow=$("<span />",{"class":"divvet"}).appendTo(this.dateWrapper),this.options.timePicker&&(this.overallWrapper=$("<span />",{"class":"component-group advanced-dater "+this.options.parentClassName,id:this.containerId+"OverallWrapper"}),this.dateWrapper.wrap(this.overallWrapper),this.overallWrapper=$("#"+this.containerId+"OverallWrapper"),this.timeWrapper=$("<span />",{"class":"inline-centered",id:this.containerId+"TimeWrapper"}).appendTo(this.overallWrapper),this.hourWrapper=$("<span />",{"class":"component input-wrapper "+this.baseClass+" timer",id:this.containerId+"HourWrapper"}).css("flex","none").css("margin-right","4px").width(40).appendTo(this.timeWrapper),this.hourContainer=$("<input />",{type:"text","class":"inner",id:this.containerId+"Hour"}).css("text-align","center").appendTo(this.hourWrapper),$("<span />").text(":").css("margin-right","4px").appendTo(this.timeWrapper),this.minuteWrapper=$("<span />",{"class":"component input-wrapper "+this.baseClass+" timer",id:this.containerId+"MinuteWrapper"}).css("flex","none").width(40).appendTo(this.timeWrapper),this.minuteContainer=$("<input />",{type:"text","class":"inner",id:this.containerId+"Minute"}).css("text-align","center").appendTo(this.minuteWrapper),this.ampmWrapper=$("<span />",{"class":"component input-wrapper "+this.baseClass+" timer",id:this.containerId+"AmpmWrapper"}).css("flex","none").width(45).appendTo(this.timeWrapper),this.ampmContainer=$("<input />",{type:"text","class":"inner",id:this.containerId+"Ampm"}).css("text-align","center").appendTo(this.ampmWrapper)),""!=this.options.customClassName&&(this.dateWrapper.addClass(this.options.customClassName),this.timeWrapper&&this.timeWrapper.addClass(this.options.customClassName)),this.options.hideDate&&this.dateWrapper.addClass("hide"),""!=this.options.color&&(this.dateContainer.addClass("colored"),this.dateWrapper.addClass("color-"+this.options.color),this.timeWrapper&&this.timeWrapper.addClass("color-"+this.options.color)),""!=this.options.size&&(this.dateWrapper.addClass("size-"+this.options.size),this.timeWrapper&&this.timeWrapper.addClass("size-"+this.options.size)),this.options.disabled&&this.disable(),0!=this.options.dateValue&&this.dateContainer.data("value",this.options.dateValue),this.dateContainer.pickadate({format:this.options.dateDisplayFormat,formatSubmit:this.options.dateFormat,min:this.options.min,max:this.options.max,clear:this.options.datePickerAllowEmpty?"Clear":!1,hiddenName:!0,onSet:function(thingSet){thingSet.hasOwnProperty("select")?self.defaultOnDateChange(thingSet.select):thingSet.hasOwnProperty("clear")&&self.defaultOnDateChange(!1)},onClose:function(){$(document.activeElement).blur()}}),this.datePicker=this.dateContainer.pickadate("picker"),this.dateArrow.on("click",function(e){self.disabled||(self.datePicker.open(),e.stopPropagation(),e.preventDefault())}),void(this.timeWrapper&&(this.hourContainer.pickatime({format:"h",interval:60,min:[1,0],max:[12,0],clear:!1}),this.hourPicker=this.hourContainer.pickatime("picker"),this.minuteContainer.pickatime({format:"i",interval:1,max:[0,59],clear:!1}),this.minutePicker=this.minuteContainer.pickatime("picker"),this.ampmContainer.pickatime({format:"A",interval:720,clear:!1}),this.ampmPicker=this.ampmContainer.pickatime("picker"),0!=this.options.timeValue&&this.setTime(this.options.timeValue))))}function CsCommentBlock(container_id,options){var self=this;return"undefined"==typeof container_id?!1:(this.options=options||{},this._parent=this.options._parent,this.dataAttribute=this.options.data_attribute||"data-post",this.actorId=this.options.actor_id||!1,this.toActorId=this.options.to_actor_id||!1,this.objectId=this.options.object_id||!1,this.objectId?(this.container=$("#"+container_id),this.textareaContainer=this.container.find("*["+this.dataAttribute+"]"),void(self.textareaContainer.length&&(self.textareaObj=cs.components().input(self.textareaContainer.attr("id"),{version:2,fullWidth:!0,defaultText:"Comment and press Enter when done",resizable:!0,expandMax:100,ignoreEnterKey:!0}),self.textareaContainer.off("keypress").on("keypress",function(e){setTimeout(function(){self.onTextareaKeyPress(e)},1)})))):!1)}function CsUploader(containerId,options){return"undefined"==typeof containerId||""==$.trim(containerId)?!1:("object"!=typeof options&&(options={}),this.options=$.extend(!0,{url:"/account/files/ajax-file-upload",method:"overwrite",submit:!0,clearOnComplete:!0,accept:"*",button:{color:"green",title:cs.txt("Uploader: upload"),size:"large",version:2},multiple:!0,inputName:"imgs_for_upload",maxFileSize:3e4,data:[],onLoad:function(){},onSelect:function(files){},onClearQueue:function(){},onRemoveFromQueue:function(index){},beforeSend:function(file){},onSuccess:function(file,response){},onError:function(file,errors){},onComplete:function(){},onProgress:function(file,percentage){}},options),this.containerId=containerId,this.container=$("#"+this.containerId),this.clearQueue({preventCallback:!0}),this.buildContainer(),void this.options.onLoad())}function CsPanelNavigator(options){return"object"!=typeof options&&(options={}),this.options=$.extend(!0,{container:".panel-container"},options),this.panelContainer=$(this.options.container),this.init(),this.initEvents(),this}function CsTextCropper(id,text,options){return"object"!=typeof options&&(options={}),this.options=$.extend(!0,{},options),"undefined"==typeof id?!1:(this.id=id,this.container=$("#"+this.id),this.container.length?"string"!=typeof text||""==$.trim(text)?!1:(this.text=text,this.containerWidth=!1,this.init(),this):!1)}function CsHovercard(containerId,options){if("undefined"==typeof containerId||""==$.trim(containerId))return!1;var self=this;this.containerId=containerId,this.container=$("#"+this.containerId),this.options=$.extend(!0,{url:"undefined"!=typeof this.container.data("url")?this.container.data("url"):!1,html:"undefined"!=typeof this.container.data("html")?this.container.data("html"):!1,title:"undefined"!=typeof this.container.attr("title")?this.container.attr("title"):!1,qtipClasses:"qtip-hovercard",delay:500},options);var content=!1;if(this.options.url?content=function(event,api){return $.ajax({url:self.options.url}).then(function(content){api.set("content.text",content)},function(xhr,status,error){api.set("content.text",status+": "+error)}),cs.txt("Generic loading")}:this.options.html?content=this.options.html:this.options.title&&(content=this.options.title),!content)return!1;var qtipOptions={position:{my:"top center",at:"bottom center"},style:{classes:self.options.qtipClasses},content:{text:content},hide:{fixed:!0,delay:self.options.delay,leave:!1},events:{visible:function(event,api){$("#"+api._id+" .qtip-content").perfectScrollbar()},show:function(){$(".qtip").each(function(){$(this).qtip("hide")})}}};this.container.qtip(qtipOptions)}function CsFeedPoster(options){return"object"!=typeof options&&(options={}),this.options=$.extend({privacySelectorClass:"cs-permission-selector",privacyDefault:"",privacyUpdatesDefault:"",kpiMode:!1},options),this.blocksPopupURL="/account/feeds/popup-add-media",this.blocksKpiURL="/account/feeds/update-kpi",this.postPrivacyId="csPostPrivacy",this.posterBlocksId="csPosterBlocks",this.posterKpiId="posterKpiWrapper",this.posterBlocksWrapperId="csPosterBlocksWrapper",this.posterBlockClass="post-block",this.kpiFields=[],this.resetSettings(),this.validateOptions()?(this.init(),this):(console.log("Invalid options"),!1)}function CsAlgorithms(options){return this._parent=options._parent,this}function CsModules(options){return this._parent=options._parent,this}function CsModulesModule(name,options){return name?(this.options=options||{},this.name=name,this._parent=this.options._parent,this.container_id=this.options.container_id||"module-"+this.name.replace("_","-"),void(this.container=$("#"+this.container_id))):!1}function CsMods(options){return this._parent=options._parent,this.params={},this.loadingMods={},this.callbackInterval=!1,this.lastFilterModList=[],this.lastFilterGroupList=[],this.lastFilterOptions={},this}function CsMessages(options){return this._parent=options._parent,this}function CsMessagesMessageSender(options){if(this._parent=options._parent,this.options={},this.options.url=options.url||this._parent._parent.options.site_url+"account/messages/ajax-add-message",this.options.receiversFieldId=options.receiversFieldId||!1,this.options.subjectFieldId=options.subjectFieldId||"",this.options.value1Id=options.value1Id||!1,this.options.messageFieldId=options.messageFieldId||"",this.options.fromActorId=options.fromActorId||!1,this.options.conversationId=options.conversationId||!1,this.options.contactingTeam=options.contactingTeam||!1,this.options.jobId=options.jobId||!1,this.options.sendButtonId=options.sendButtonId||!1,this.options.maxTextLen=options.maxTextLen||3e4,this.onSend=options.onSend||function(){},this.options.sendButtonDisabledClass=options.sendButtonDisabledClass||!1,this.options.sendButtonObject=options.sendButtonObject||!1,this.onSuccess=options.onSuccess||function(response){},this.receiversVal="",!this.options.messageFieldId)return!1;if(this.options.subjectFieldId&&(this.subjectContainer=$("#"+this.options.subjectFieldId)),this.options.receiversFieldId&&(this.receiversContainer=$("#"+this.options.receiversFieldId)),this.options.messageFieldId&&(this.messageContainer=$("#"+this.options.messageFieldId)),this.options.sendButtonId&&(this.sendButtonContainer=$("#"+this.options.sendButtonId)),this.options.value1Id&&(this.value1Container=$("#"+this.options.value1Id)),this.messageContainer&&this.sendButtonContainer&&this.options.sendButtonDisabledClass){var self=this;this.messageContainer.bind("keydown",function(e){self.enableDisableButton(e)}),this.messageContainer.bind("paste",function(e){self.enableDisableButton(e)})}if(this.messageContainer&&this.options.sendButtonObject){var self=this;this.messageContainer.bind("keydown",function(e){self.enableDisableButton(e)}),this.messageContainer.bind("paste",function(e){self.enableDisableButton(e)})}return this.post={},this.post.subject="",this.post.message="",this.post.receivers="",this.post.from_actor_id=this.options.fromActorId,this.post.conversation_id=this.options.conversationId,this.options.contactingTeam&&(this.post.contacting_team=!0),this.options.jobId&&(this.post.job_id=this.options.jobId),this}function CsMessagesList(container_id,json,options){}function CsInvites(options){return this._parent=options._parent,this}function CsInvitesSender(options){return this._parent=options._parent,this.options={},this.options.sender_id=options.sender_id||"",this.options.url=options.url||this._parent._parent.options.resource_url+"account/organizations/add-users-invitations",this.options.receiversFieldId=options.receiversFieldId||!1,this.options.fromActorId=options.fromActorId||!1,this.options.sendButtonId=options.sendButtonId||!1,this.options.sendButtonDisabledClass=options.sendButtonDisabledClass||!1,this.options.inviteTo=options.inviteTo||!1,this.options.inviteType=options.inviteType||!1,this.options.messageContainerId=options.messageContainerId||!1,this.options.applyTo=options.applyTo||!1,this.options.objects_ids=options.objectsIds||!1,this.options.adminMakeApplicantObj=options.adminMakeApplicantObj||!1,this.onSuccess=options.onSuccess||function(response){},this.onFail=options.onFail||function(response){},this.options.applicationId=options.applicationId||!1,this.options.firstNameObj=options.firstNameObj||!1,this.options.lastNameObj=options.lastNameObj||!1,this.options.receiversFieldId&&(this.receiversVal="",this.receiversContainer=$("#"+this.options.receiversFieldId)),this.options.sendButtonId&&(this.sendButtonContainer=$("#"+this.options.sendButtonId)),this.options.messageContainerId&&(this.message="",this.messageContainer=$("#"+this.options.messageContainerId)),this.post={},this.post.message="",this.post.request_type=this.options.request||"associate",this.post.receivers="",this.post.from_actor_id=this.options.fromActorId,this.post.application_id=this.options.applicationId,this}function CsInvitesSenderV2(options){return this._parent=options._parent,this.options={},this.options.sender_id=options.sender_id||"",this.options.url=options.url||this._parent._parent.options.resource_url+"account/organizations/add-users-invitations",this.options.receiversFieldId=options.receiversFieldId||!1,this.options.fromActorId=options.fromActorId||!1,this.options.sendButton=options.sendButton||!1,this.options.inviteTo=options.inviteTo||!1,this.options.inviteType=options.inviteType||!1,this.options.messageContainerId=options.messageContainerId||!1,this.options.applyTo=options.applyTo||!1,this.options.objects_ids=options.objectsIds||!1,this.options.adminMakeApplicantObj=options.adminMakeApplicantObj||!1,this.onSuccess=options.onSuccess||function(response){},this.onFail=options.onFail||function(response){},this.options.applicationId=options.applicationId||!1,this.options.firstNameObj=options.firstNameObj||!1,this.options.lastNameObj=options.lastNameObj||!1,this.options.makeParticipant=options.makeParticipant||!1,this.sendButton=this.options.sendButton,this.options.receiversFieldId&&(this.receiversVal="",this.receiversContainer=$("#"+this.options.receiversFieldId)),this.sendButton||console.log("Cannot initialize InviteSender: missing parameters"),this.options.messageContainerId&&(this.message="",this.messageContainer=$("#"+this.options.messageContainerId)),this.post={},this.post.message="",this.post.request_type=this.options.request||"associate",this.post.receivers="",this.post.from_actor_id=this.options.fromActorId,this.post.application_id=this.options.applicationId,this}function extend(base,sub){var origProto=sub.prototype;sub.prototype=Object.create(base.prototype);for(var key in origProto)sub.prototype[key]=origProto[key];sub.prototype.constructor=sub,Object.defineProperty(sub.prototype,"constructor",{enumerable:!1,value:sub})}function Block(options){return"object"!=typeof options&&(options={}),this.options=$.extend(!0,{color:!1,size:!1,customClassName:!1,disabled:!1},options),this.disabled=this.options.disabled,this.events={},"undefined"==typeof this.eventTarget&&(this.eventTarget=null),this.mapParametricEvents(),this}function Component(componentType,container,options){return this.buildErr=!1,("string"!=typeof componentType||""==$.trim(componentType))&&(this.buildErr=!0),this.componentType=componentType,container instanceof jQuery?(this.container=container,this.id=this.container.attr("id")?this.container.attr("id"):"component-"+Math.floor(100000001*Math.random()),this.container.attr("id",this.id)):"string"==typeof container&&""!=$.trim(container)?(this.container=$("#"+container),this.id=container,this.container.length||(this.buildErr=!0)):this.buildErr=!0,this.buildErr?(console.log("Could not instantiate "+componentType+" Component from #"+container),!1):("object"!=typeof this.eventTarget&&(this.eventTarget=this.container),this.topLevel=!1,Block.call(this,options),this)}function Clickable(componentType,containerId,options){return"object"!=typeof options&&(options={}),options=$.extend(!0,{useIcons:!0},options),Component.call(this,componentType,containerId,options),this.buildErr?!1:(this.topLevel=!0,this._init(),this.bindDefaultEvents(),this)}function Droppable(parentObject,options){return parentObject instanceof Component?("object"!=typeof options&&(options={}),this.options=$.extend(!0,{dropOnHover:!1,dropWidth:!1,minDropWidth:!1,maxDropWidth:!1,maxDropHeight:!1,dropOffsetX:!1,dropOffsetY:!1,forceFullWidth:!0,padding:0},options),this._parent=parentObject,this.parentContainer=this._parent.container,this.container=$("<div />",{"class":"droppable"}).css({display:"none",position:"absolute","z-index":"2100"}).appendTo("body"),Component.call(this,"droppable",this.container,this.options),this.buildErr?!1:(this.displayed=!1,this.dropHoverTimer=null,this.allowHideOnHoverOut=!0,this.contentType=null,this.contentInitialized=!1,this.scrollerInitialized=!1,this.padding={top:0,right:0,bottom:0,left:0},this._init(),this.bindDefaultEvents(),this)):(console.log("Cannot instantiate Droppable without attaching it to a parent."),!1)}function Listable(parentObject,options,list){return parentObject instanceof Component?(this._parent=parentObject,this.parentContainer=this._parent.container,this.container=$("<ul />",{"class":"listable"}),Component.call(this,"listable",this.container,options),this.buildErr?!1:(this.listContent=null,this.listElements=[],this.selectedIndex=!1,this.highlightedIndex=!1,this.initialized=!1,this._init(list),this)):(console.log("Cannot instantiate Listable without attaching it to a parent."),!1)}function Typable(componentType,targetId,options){"object"!=typeof options&&(options={}),options=$.extend(!0,{hideCounter:!1,enforceLimit:!0,inlineCounter:!0},options),targetId instanceof jQuery?targetId.length?(this.input=targetId,this.inputId=this.input.attr("id")?this.input.attr("id"):"input-"+Math.floor(100000001*Math.random()),this.input.attr("id",this.inputId)):this.buildErr=!0:"string"==typeof targetId&&""!=$.trim(targetId)?(this.input=$("#"+targetId),this.inputId=targetId,this.input.length||(this.buildErr=!0)):this.buildErr=!0,this.eventTarget=this.input,this.isTextArea="textarea"==this.input[0].nodeName.toLowerCase(),this.input.addClass("inner");var container=$("<span />").attr("id",this.inputId+"Wrapper");return this.input.wrap(container),Component.call(this,componentType,this.inputId+"Wrapper",options),this.buildErr?!1:(this.topLevel=!0,this._init(),this.bindDefaultEvents(),this.bindKeyEvents(),this)}function Autocomplete(componentType,targetId,options){return"object"!=typeof options&&(options={}),options=$.extend(!0,{placeholder:"Start typing to get suggestions",queryParam:"q",extraParams:{},minChars:2,selectAllOnFocus:!0,allowFreeText:!1,delay:200,cacheSize:10,matchCase:!1,matchSubset:!0,matchContains:!1},options),this.cache={},this.flushCache(),this.currentRequest=!1,this.searchTimeout=!1,Typable.call(this,componentType,targetId,options),this._build(),this}function CsBuilder(options){return this._parent=options._parent,this}function CsButton(containerId,options){return Clickable.call(this,"button",containerId,options),this.buildErr?!1:("string"==typeof this.options.loaderToggleUrl&&""!=$.trim(this.options.loaderToggleUrl)&&this.setupLoaderToggling(),this)}function CsDropdown(containerId,list,options){return"undefined"!=typeof list&&$.isArray(list)&&0!=list.length?("object"!=typeof options&&(options={}),options=$.extend(!0,{allowCaptionUpdate:!0,showTick:!0},options),Clickable.call(this,"dropdown",containerId,options),this.buildErr?!1:(this.value=!1,this.listContent=list,this.initDropdown(),this)):(console.log("Cannot instantiate dropdown "+containerId+" without list"),!1)}function CsDropPanel(containerId,targetId,options){return"object"!=typeof options&&(options={}),options=$.extend(!0,{customClassName:"drop-panel"},options),Clickable.call(this,"dropdown",containerId,options),this.buildErr?!1:(this.initDropPanel(targetId),this)}function CsInput(targetId,options){return Typable.call(this,"input",targetId,options),this.buildErr?!1:(this.initInput(),this)}function CsAutocomplete(targetId,options){return"object"!=typeof options&&(options={}),options=$.extend(!0,{containerClass:"input"},options),this.value=null,Autocomplete.call(this,"autocomplete",targetId,options),this.buildErr?!1:(this.initAutocomplete(),this)}function CsTaglist(targetId,options){return"object"!=typeof options&&(options={}),options=$.extend(!0,{tagPlaceholder:"Search",deletableTags:!0,allowDuplicates:!1},options),Autocomplete.call(this,"taglist",targetId,options),this.buildErr?!1:(this.tags={},this.initTaglist(),this)}function CsUISlider(targetId,options){return"object"!=typeof options&&(options={}),
this.options=$.extend(!0,{range:!1,min:0,max:100,step:1,value:0,values:null,disabled:!1,addWrapper:!1,proportional:!1,proportionalMin:0,proportionalMax:100,ignoreEdges:!1,outputTarget:null,outputFormatting:{valueFormatter:null,unit:"",prependUnit:!1,minEdgeReached:"<",prependMinEdgeReached:!0,maxEdgeReached:">",prependMaxEdgeReached:!0,includeEdgeValues:!1,maxEdgeSuffix:"+",noValuesPlaceholder:""}},options),Component.call(this,"slider",targetId,this.options),this.buildErr?!1:(this.initSlider(),this)}function CsUIDater(targetId,options){return"object"!=typeof options&&(options={}),this.options=$.extend(!0,{hasDate:!0,dateFormat:"M d, yy",hasTime:!0,timeFormat:"g:i A",value:null,defaultToday:!0,pickerData:{droppable:!0,parent:targetId}},options),Component.call(this,"advanced-dater",targetId,this.options),this.buildErr?!1:(this.initDater(),this)}Cs.prototype.feedbackSender=function(options){return options||(options={}),options._parent=this,new CsFeedbackSender(options)},Cs.prototype.displayLoginPopup=function(options){this.options.return_url=options.return_url||window.location.href,this.options.encode_return_url=this.algorithms().urlEncode(this.options.return_url),csPopup.display(this.options.site_url+"main/frontpage/popup_login?return_url="+this.options.encode_return_url,{})},Cs.prototype.link=function(attribute){var self=this,obj=attribute instanceof jQuery?attribute:$(attribute);$(obj).each(function(i){$(this).attr("href")&&$(this).bind("click",function(e){e.preventDefault();var href=$(this).attr("href"),defaultHref=href,data=$(this).data("hash");""!=data&&data||(data={}),href=href.replace(self.options.site_url,""),"/"==href.charAt(0)&&(href=href.substring(1,href.length));var parts=href.split("/"),parts2=location.href.replace(self.options.site_url,"").split(/[\#\/]+/);if(data.leave){var regex=new RegExp("^"+self.options.site_url,"g");data.leave=data.leave.replace(regex,"");var regex=new RegExp("^/","g");data.leave=data.leave.replace(regex,"")}else parts[0]==parts2[0]&&(data.leave=parts[0]),-1==["profile","account","system","main","admin","api","events","modules","newsletters","jobs"].indexOf(parts[0])?data.leave=parts[0]:data.leave="";var regex=new RegExp("^"+data.leave,"ig");href=href.replace(regex,""),"undefined"==typeof window.history.pushState||data.useHash?location.href=self.options.site_url+(data.leave?data.leave:"")+"#"+(data.exclamation===!1?"":"!")+href:window.history.pushState({hash:href,href:defaultHref},"1",defaultHref)})})},Cs.prototype.setUrl=function(url){"undefined"!=typeof window.history.pushState&&-1==url.indexOf("#")?window.history.pushState({hash:url,href:url},"1",url):location.href=url},Cs.prototype.popupVideo=function(url){if(url){var content=$("<div/>",{"class":"video"}),cross=($("<iframe/>",{width:640,height:390,src:url,frameborder:"0",allowfullscreen:!0}).appendTo(content),$("<span/>",{"class":"cross r3tr r3br t60"}).appendTo(content));$("<span/>",{}).appendTo(cross),cross.bind("click",function(){csPopup.close()}),csPopup.display(content,{html:!0,width:760})}},Cs.prototype.txt=function(text,from,to){var txt=this.languageTexts.texts[text];if("string"==typeof from&&"string"==typeof to){var re=new RegExp("{"+from+"}","g");txt=txt.replace(re,to)}if("object"==typeof from&&"object"==typeof to&&from.length==to.length)for(i in from){var re=new RegExp("{"+from[i]+"}","g");txt=txt.replace(re,to[i])}return txt?txt:"Text{"+text+"}"},Cs.prototype.err=function(error,from,to){var err=this.languageTexts.errors[error];return err?err:"Text{"+error+"}"},Cs.prototype.setupErrors=function(options){var self=this;$.ajaxSetup({dataFilter:function(response){var json_response=!1;try{json_response=$.parseJSON(response||"null")}catch(err){}if(json_response&&json_response.status){if("err"==json_response.status){if(1001==json_response.status_code&&window.location.pathname!="/"+self.options.login_page_path)return location.href=self.options.site_url+self.options.login_page_path,"";if(7776==json_response.status_code){var message=decodeURIComponent(json_response.status_desc);return cs.components().alert(message,{title:"D'oh!",type:"err",method:"inline",onClick:function(){location.href=self.options.site_url}}),""}if(1002==json_response.status_code&&window.location.pathname!="/"+self.options.login_page_path)return self.displayLoginPopup(self.options.site_url+self.options.login_page_path),""}if(301==json_response.status_code){var redirect_url=location.href,reload=!1;json_response.data&&(json_response.data.redirect_url&&(redirect_url=json_response.data.redirect_url),"undefined"!=typeof json_response.data.reload_page&&json_response.data.reload_page&&(reload=!0)),location.href==redirect_url&&(reload=!0),hash_pos=redirect_url.indexOf("#");var first_part=redirect_url;-1!=hash_pos&&(first_part=redirect_url.substring(0,hash_pos)),href_hash_pos=location.href.indexOf("#");var href_first_part=location.href;return-1!=href_hash_pos&&(href_first_part=location.href.substring(0,href_hash_pos)),href_first_part!=first_part&&(reload=!1),location.href=redirect_url,reload&&location.reload(),""}}return response}})},Cs.prototype.getPager=function(containerId,options){if(!options)var options={};if(options._parent=this,options.containerId=containerId,options.removeOldPager&&this.pagers[containerId]&&delete this.pagers[containerId],this.pagers[containerId])options?this.pagers[containerId].setTempOptions(options):this.pagers[containerId].clearTempOptions();else{if(options.check)return!1;this.pagers[containerId]=new CsPager(options)}return this.pagers[containerId]},CsFeedbackSender=function(options){this._parent=options._parent,this.options={},this.options.url=options.url||this._parent.options.site_url+"main/frontpage/ajax-save-feedback",this.options.actorId=options.actorId||!1,this.options.emailFieldId=options.emailFieldId||"csFeedbackEmail",this.options.messageFieldId=options.messageFieldId||"csFeedbackMessage",this.options.nameFieldId=options.nameFieldId||!1,this.options.type=options.type||"feedback",this.onSuccess=options.onSuccess||function(){},this.onSend=options.onSend||function(){}},CsFeedbackSender.prototype.send=function(callback){var self=this,email=$("#"+this.options.emailFieldId).val(),message=$("#"+this.options.messageFieldId).val(),post_data={email:email,message:message,actor_id:this.options.actorId,type:this.options.type};if(this.options.nameFieldId){var name=$("#"+this.options.nameFieldId).val();post_data.name=name}$.post(this.options.url,post_data,function(response){self.onSuccess()}),self.onSend()},Cs.prototype.addCommentsBlock=function(object_id,object_type,options){if(!options)var options={};return options._parent=this,this.comments[object_id+"_"+object_type]=new CsCommentsBlock(object_id,object_type,options),this.comments[object_id+"_"+object_type]},Cs.prototype.getCommentsBlock=function(object_id,object_type){return this.comments[object_id+"_"+object_type]?this.comments[object_id+"_"+object_type]:!1},Cs.prototype.generalComment=function(object_id,object_type,options){return options||(options={}),options._parent=this,new CsGeneralComment(object_id,object_type,options)},Cs.prototype.auth=function(options){return options||(options={}),options._parent=this,new CsAuth(options)},CsAuth.prototype.facebook=function(containerId,options){return containerId?(options||(options={}),options._parent=this,options.appId=this._parent.options.fbAppId,options.userData=this._parent.options.fbUserData,new CsAuthFacebook(containerId,options)):!1},CsAuth.prototype.linkedin=function(options){return options||(options={}),options._parent=this,new CsAuthLinkedin(options)},CsAuth.prototype.twitter=function(options){return options||(options={}),options._parent=this,new CsAuthTwitter(options)},CsAuthLinkedin.prototype.login=function(params){window.cs.linkedin=this;var url="https:"!=location.protocol?this._parent._parent.options.site_url:this._parent._parent.options.site_url_ssl,params_defined="undefined"!=typeof params&&"object"==typeof params,return_url=params_defined&&"undefined"!=typeof params.return_url?params.return_url:null;w=600,h=300,w+=32,h+=96,wleft=(screen.width-w)/2,wtop=(screen.height-h)/2,wleft<0&&(w=screen.width,wleft=0),wtop<0&&(h=screen.height,wtop=0);var queryParams={};null!=return_url&&""!=$.trim(return_url)&&(queryParams.return_url=return_url),"undefined"!=typeof csMods&&"undefined"!=typeof csMods.params&&"undefined"!=typeof csMods.params.actor_id&&(queryParams.actor_id=csMods.params.actor_id);var rUrl=url+"main/authorization/ajax-linkedin-window";jQuery.isEmptyObject(queryParams)||(rUrl+="?"+$.param(queryParams)),this.popupWindow=window.open(rUrl,"linkedin","width="+w+", height="+h+", left="+wleft+", top="+wtop+", width=600,height=400,menubar=0,location=0,directories=0,toolbar=0")},CsAuthLinkedin.prototype.returning=function(oauth,verifier){if(this.popupWindow.close(),!oauth)return!1;if(!verifier)return!1;this.post={},this.post.access_token=oauth,this.post.verifier=verifier,this.post.here=1,"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","LinkedIn Login","Successful OAuth"]),csPopup.display('<div class="popup-loader">Loading...</div>',{width:250,html:!0,allowUserClose:!1});var url="https:"!=location.protocol?this._parent._parent.options.site_url:this._parent._parent.options.site_url_ssl;$.post(url+"main/authorization/RespondFromLinkedin",this.post,function(response){try{jQuery.parseJSON(response||"null");return csPopup.close(),!1}catch(err){csPopup.display(response,{html:!0})}})},CsAuthTwitter.prototype.login=function(){window.cs.twitter=this;var url=this._parent._parent.options.site_url;w=580,h=480,w+=32,h+=96,wleft=(screen.width-w)/2,wtop=(screen.height-h)/2,wleft<0&&(w=screen.width,wleft=0),wtop<0&&(h=screen.height,wtop=0),url+="main/authorization/ajax-twitter-window",this.token_actor_id&&(url+="?token_actor_id="+this.token_actor_id),this.popupWindow=window.open(url,"twitter","width="+w+", height="+h+", left="+wleft+", top="+wtop+", menubar=0,location=0,directories=0,toolbar=0")},CsAuthTwitter.prototype.returning=function(twitter_account_url,profile_actor_id){this.popupWindow.close();var alertTitle="Twitter Posting Enabled!",alertContent="Only you and other Leaders can now post your f6s Public Posts to your Twitter Feed.<br/><br/>You can stop any f6s Public Post from going to Twitter by clicking the 'Twitter ON' icon in any Post.";if(0==$("#csProfileFeedItemMaker").length){window.csLinkTwitterObj.container.unbind("click").bind("click",function(){removeTwitter()}),window.csLinkTwitterObj.setTitle(window.csLinkTwitterObj.options.title.replace("OFF","ON"));var twitter_input=$("#csLinkTwitter").parent().find(" > input"),twitter_dropdown=$("#csLinkTwitter").parent().find(' input[type="hidden"][value="twitter"]');twitter_input.val(twitter_account_url);var params={};params.all=!0;var Obj=cs.algorithms(),edit_form_elements=document.csAjaxProfileEditMode.elements,selected_form_elements=new Array;for(i in edit_form_elements)"object"==typeof edit_form_elements[i]&&(edit_form_elements[i]==twitter_input[0]||edit_form_elements[i]==twitter_dropdown[0])&&selected_form_elements.push(edit_form_elements[i]);var formArrays=Obj.formToArray(selected_form_elements,params),postObject={};postObject=formArrays,$.post(cs.options.site_url+"profile/"+profile_actor_id+"/main/ajax-save-profile-modules-data",Obj.objectToPost(postObject),function(response){},"json"),cs.components().alert(alertContent,{title:alertTitle,type:"ok"})}else profileFeedItemMaker.useTwitterOAuth=!1,profileFeedItemMaker.options.socialNetworksEnabled.push("twitter"),profileFeedItemMaker.csPostTwitterObj.setTitle("ON"),cs.components().alert(alertContent,{title:alertTitle,type:"ok"})},CsAuthFacebook.prototype.windowInit=function(){var self=this;window.fbAsyncInit=function(){FB.init({appId:self.appId,xfbml:!0,status:!0,cookie:!0,version:"v2.2"}),self.onLoad()}},CsAuthFacebook.prototype.sendRequests=function(to,callback){var tt=to.join(",");FB.ui({method:"apprequests",message:"Invite your friends to join F6s",data:"test-data-here",to:tt},function(response){callback&&callback(response)})},CsAuthFacebook.prototype.createScriptTag=function(){!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];d.getElementById(id)||(js=d.createElement(s),js.id=id,js.src="//connect.facebook.net/en_US/sdk.js",fjs.parentNode.insertBefore(js,fjs))}(document,"script","facebook-jssdk")},CsAuthFacebook.prototype.permissionGranted=function(resp,permission){if("undefined"==typeof resp||""==$.trim(resp))return!1;if("object"!=typeof resp.data)return!1;for(i in resp.data){var perm=resp.data[i];if("undefined"!=typeof perm.permission&&"undefined"!=typeof perm.status&&permission==perm.permission&&"granted"==perm.status)return!0}return!1},CsAuthFacebook.prototype.login=function(params){var self=this,rUrl=this._parent._parent.options.site_url,returnUrl="undefined"==typeof params||"object"!=typeof params||"undefined"==typeof params.returnUrl?!1:params.returnUrl,params_defined="undefined"!=typeof params&&"object"==typeof params,purpose=params_defined&&"undefined"!=typeof params.purpose?params.purpose:"register",return_url=params_defined&&"undefined"!=typeof params.return_url?params.return_url:null;"register"==purpose?(rUrl+="main/authorization/fb",null!=return_url&&(rUrl+="?return_url="+encodeURIComponent(return_url))):"application_social_share"==purpose&&(rUrl+="profile/"+params.programActorID+"/programs/ajax-application-social-share"),obj={},returnUrl&&(obj.return_url=returnUrl),FB.login(function(response){return"undefined"!=typeof params&&"undefined"!=typeof params.callback&&params.callback.call(this,response),response.authResponse&&response.authResponse.accessToken?(obj.access_token=response.authResponse.accessToken,obj.expires_in=response.authResponse.expiresIn,obj.signed_request=response.authResponse.signedRequest,obj.user_id=response.authResponse.userID,obj.current_location=window.location,void("register"==purpose?FB.api("/me/permissions",function(resp){self.permissionGranted(resp,"email")?("connected"==response.status&&"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","Facebook Login","Successful OAuth"]),self._parent._parent.window().postToURL(rUrl,obj)):(csPopup.display("/main/authorization/popup-fb-email"),FB.api("/me/permissions","delete",function(){}))}):"application_social_share"==purpose&&$.post(rUrl,obj,function(data){"undefined"!=typeof params.callbackPost&&params.callbackPost.call(this,data)},"json"))):void 0},{scope:self.userData})},CsGeneralComment.prototype.send=function(){if(this.textareaContainer.val()){var self=this,post={};post.object_type=this.objectType,post.object_id=this.objectId,post.layout=this.options.layout||"",post.actor_id=this.options.actorId||!1,post.message=this.textareaContainer.val(),$.post(this.url,post,function(response){self.sendCallback(response),self.options.keepOnFocus||self.textareaContainer.val(""),1==self.enterkeypress&&self.textareaContainer.blur()})}},CsGeneralComment.prototype.hide=function(note_id,actor_id,object_type,options){var self=this,post={},url="";if(!note_id)return!1;switch(post.object_id=this.objectId,post.object_type=object_type||"profile",post.note_id=note_id,post.actor_id=actor_id||!1,url=options.url||"",this.options.type){case"note":url=this._parent.options.resource_url+"account/control/ajax-hide-note"}$.post(url,post,function(response){"application"==object_type?self.onHide(response):self.sendCallback(response)})},CsCommentsBlock.prototype.hideComment=function(comment_id){this.comment=$("#message-"+comment_id);var self=this.comment;comment_id&&this.comment.fadeOut("fast",function(){self.remove()})},CsCommentsBlock.prototype.deleteComment=function(comment_id,actor_id){return comment_id?(post={},post.type="feed",post.comment_id=comment_id,post.actor_id=actor_id,this.hideComment(comment_id),void $.post(this._parent.options.site_url+"system/comments/ajax-delete-comment",post,function(response){},"json")):!1},CsCommentsBlock.prototype.setActor=function(actorId){actorId&&(this.actorId=actorId,this.options.actorId=actorId)},CsCommentsBlock.prototype.onTextareaKeyPress=function(e){if(e.keyCode&&13==e.keyCode&&!e.shiftKey){var rez=this.addMessage(this.textareaContainer.val());rez&&(this.textareaContainer.val(""),this.textareaContainer.height(this.options.height))}},CsCommentsBlock.prototype.showHiddenComments=function(e){this.container.find("ul.csCommentsList").find("li").each(function(){$(this).removeClass("hidden")}),this.container.find("ul.csCommentsList").find(".csShowAll").addClass("hidden")},CsCommentsBlock.prototype.addMessage=function(text){if(!text)return!1;var self=this,url="";switch(this.type){case"feed":url=this._parent.options.site_url+"account/feeds/ajax_add_item_comment";break;case"public":url=this._parent.options.site_url+"system/comments/ajax_add_public_comment"}var $parent=this.textareaContainer.closest(".add-message");return $parent.hide(),$.post(url,{object_id:this.objectId,message:text,object_type:this.objectType,actor_id:this.options.actorId,size:self.options.size},function(response){$parent.show(),self.container.find("ul.csCommentsList").append(response)}),!0},CsPager.prototype.react=function(hash){var host="https:"==location.protocol?this._parent.options.site_url_ssl:this._parent.options.site_url;this.canLoadAnchor(hash)?(this.onAnchorChange(),this.load(host+hash,{beforeLoad:this.options.beforeLoad,afterLoad:this.options.afterLoad})):this.getAnchor()||this.previousAnchor&&this.options.defaultAnchor&&this.load(host+this.options.defaultAnchor,{beforeLoad:this.options.beforeLoad,afterLoad:this.options.afterLoad}),hash&&(this.previousAnchor=hash)},CsPager.prototype.getAnchor=function(customHash){if(customHash)var hash=customHash;else var hash=location.hash;if(!hash)return"";"#"==hash.substring(0,1)&&(hash=hash.substring(1,hash.length)),"!"==hash.substring(0,1)&&(hash=hash.substring(1,hash.length)),"/"==hash.substring(0,1)&&(hash=hash.substring(1,hash.length)),-1!=hash.indexOf(this._parent.options.site_url)&&(hash=hash.replace(this._parent.options.site_url,"")),-1!=hash.indexOf(this._parent.options.site_url_ssl)&&(hash=hash.replace(this._parent.options.site_url_ssl,""));var hash_query_str=CsAlgorithms.prototype.getQueryString(hash),hash_obj=CsAlgorithms.prototype.getToObject(hash_query_str);if(CsAlgorithms.prototype.isset(hash_obj.anchor_prefix))hash=hash_obj.anchor_prefix+hash;else{if(this.anchorPrefixesList)for(var i in this.anchorPrefixesList)if(hash.match("^"+this.anchorPrefixesList[i])||hash==this.anchorPrefixesList[i]){hash=hash.replace(this.anchorPrefixesList[i],""),"#"==hash.substring(0,1)&&(hash=hash.substring(1,hash.length)),"!"==hash.substring(0,1)&&(hash=hash.substring(1,hash.length)),"/"==hash.substring(0,1)&&(hash=hash.substring(1,hash.length));break}this.options.anchorPrefix&&(hash=this.options.anchorPrefix+hash)}return hash},CsPager.prototype.validateAnchorPrefix=function(){return this.options.anchorPrefix?("/"==this.options.anchorPrefix.substring(0,1)&&(this.options.anchorPrefix=this.options.anchorPrefix.substring(1,this.options.anchorPrefix.length)),void("/"!=this.options.anchorPrefix.substring(this.options.anchorPrefix.length-1,this.options.anchorPrefix.length)&&(this.options.anchorPrefix=this.options.anchorPrefix+"/"))):void(this.options.anchorPrefix="")},CsPager.prototype.validateAnchorsOption=function(anchors){if(!this.options.anchors)return void(this.options.anchors=!1);if(!CsAlgorithms.prototype.isArray(this.options.anchors)){var temp=this.options.anchors;this.options.anchors=[],this.options.anchors.push(temp)}for(i in this.options.anchors)"/"==this.options.anchors[i].substring(0,1)&&(this.options.anchors[i]=this.options.anchors[i].substring(1,this.options.anchors[i].length))},CsPager.prototype.canLoadAnchor=function(hash){var anchors=this.options.anchors;if(!anchors)return!1;for(i in anchors)if(hash.match("^"+anchors[i])||hash==anchors[i])return!0;return!1},CsPager.prototype.unbind=function(){if(this.container)for(i in this._parent.checkboxes)this.container.has(this._parent.checkboxes[i].container)&&delete this._parent.checkboxes[i]},CsPager.prototype.matchAnchor=function(match_str){var hash=this.getAnchor();return"/"==match_str.substring(0,1)&&(match_str=match_str.substring(1,match_str.length)),"/"==match_str.substring(match_str.length-1,match_str.length)&&(match_str=match_str.substring(0,match_str.length-1)),hash.match("^"+match_str)?!0:!1},CsPager.prototype.setTempOptions=function(options){this.tempOptions=options},CsPager.prototype.clearTempOptions=function(){this.tempOptions={}},CsPager.prototype.setOption=function(key,value){this.options[key]=value},CsPager.prototype.getOption=function(key){return this.options[key]},CsPager.prototype.unsetOption=function(key){delete this.options[key]},CsPager.prototype.showLoader=function(){this.onLoaderStart(),this.options.noLoader||($("#"+this.containerId).html(""),this.loaderContainer=$("<div/>",{height:100}).appendTo("#"+this.containerId),this.loaderContainer.css("background","url("+this._parent.options.resource_url+"images/components/ajax-loader-horizontal-small.gif) center center transparent no-repeat"),this.currentGoodHeight>0?$("#"+this.containerId).height(this.currentGoodHeight):$("#"+this.containerId).css("height","auto"))},CsPager.prototype.showScrollLoader=function(){var loader_tag="div";"ul"==$("#"+this.containerId).get(0).tagName.toLowerCase()&&(loader_tag="li"),"tbody"==$("#"+this.containerId).get(0).tagName.toLowerCase()&&this.options.loaderColspan&&(loader_tag="tr"),"tr"==loader_tag?(this.loaderContainer=$("<"+loader_tag+"/>",{}).css({padding:0,width:"100%"}).appendTo("#"+this.containerId),this.loaderContainer.singleTd=$("<td/>",{height:30,cellpadding:0,cellspacing:0,colspan:this.options.loaderColspan}).css({padding:0,width:"100%"}).appendTo(this.loaderContainer),this.loaderContainer.singleTd.css("background","url("+this._parent.options.site_url+"images/components/ajax-loader-horizontal-small.gif) center center no-repeat")):(this.loaderContainer=$("<"+loader_tag+"/>",{height:30}).css({padding:0,width:"100%",border:0}).appendTo("#"+this.containerId),this.loaderContainer.css("background","url("+this._parent.options.site_url+"images/components/ajax-loader-horizontal-small.gif) center center no-repeat")),this.loaderContainer.css("background","url("+this._parent.options.site_url+"images/components/ajax-loader-horizontal-small.gif) center center no-repeat")},CsPager.prototype.hideScrollLoader=function(){this.loaderContainer&&this.loaderContainer.remove()},CsPager.prototype.load=function(url,options){if(this.loading=!0,!options)var options={};if(this.unbind(),options.div)return void $("#"+url).show();this.clearHash&&(window.location.hash=""),this.options.loadMethod=options.loadMethod||"reload","reload"==this.options.loadMethod?this.showLoader():"append"==this.options.loadMethod&&this.showScrollLoader(),this.currentGetRequest&&(this.currentGetRequest.abort(),this.currentGetRequest=!1);var stopScroll=options.stopScroll||this.options.stopScroll||!1,self=this,hash=url.replace(this._parent.options.site_url,"");hash=hash.replace(this._parent.options.site_url_main,""),hash=hash.replace(this._parent.options.site_url_ssl,""),"/"!=hash.substring(0,1)&&(hash="/"+hash);var scrollTop=this.tempOptions.scrollTop||this.options.scrollTop||options.scrollTop;scrollTop&&!stopScroll&&setTimeout(function(){var scrollTarget=options.scrollTarget||self.tempOptions.scrollTarget||self.options.scrollTarget;("div"==scrollTarget||"all"==scrollTarget)&&$("html, body").animate({scrollTop:$("#"+self.containerId).offset().top},"fast"),("window"==scrollTarget||"all"==scrollTarget)&&($(window).scrollTop(0),$("html").scrollTop(0)),"window"!=scrollTarget&&"all"!=scrollTarget&&scrollTarget&&$("html, body").animate({scrollTop:$("#"+scrollTarget).offset().top},"fast")},1);var scrollTo=this.tempOptions.scrollTo||this.options.scrollTo||options.scrollTo;if(scrollTo&&!stopScroll)var interval_scroll=setInterval(function(){self.loading||($("html, body").animate({scrollTop:$("#"+scrollTo).offset().top},"fast"),clearInterval(interval_scroll))},100);var data="undefined"!=typeof options.data?options.data:{},beforeLoad=options.beforeLoad||self.tempOptions.beforeLoad||self.beforeLoad;"function"==typeof beforeLoad&&beforeLoad(hash);var pagerCall="undefined"!=typeof options.requestMethod&&"post"==options.requestMethod?$.post:$.get;this.currentGetRequest=pagerCall(hash,data,function(response){self.currentGetRequest=!1,"reload"==self.options.loadMethod?(self.onLoaderStop(),$("#"+self.containerId).html(response).promise().done(function(){self.onComplete()})):"append"==self.options.loadMethod&&(self.hideScrollLoader(),$("#"+self.containerId).append(response)),self.adjustHeight(),self._parent.components().titleTips("#"+self.containerId+" .cs-title-tip[title]"),self._parent.components().hovercards("data-hovercard",{}),cs.link($("#"+self.containerId).find("a[data-hash]"),{}),self.loading=!1,options.afterLoad&&options.afterLoad(hash),cs.gaTracking()}),this.url=hash},CsPager.prototype.reload=function(options){var url=this.url||this.options.currentUrl;this.load(url,options)},CsPager.prototype.adjustHeight=function(){if($("#"+this.containerId).height("auto"),this.minHeightDiv){var height=$("#"+this.containerId).height(),div_height=this.minHeightDiv.height();div_height>height?$("#"+this.containerId).height(div_height):$("#"+this.containerId).height("auto")}this.checkMinHeight(),this.currentGoodHeight=$("#"+this.containerId).height()},CsPager.prototype.checkMinHeight=function(){if(this.options.minHeight){var height=$("#"+this.containerId).height();if(height<this.options.minHeight)return void $("#"+this.containerId).height(this.options.minHeight)}},Cs.prototype.popupsList=function(defaultList){var self=this;return defaultList||(defaultList=[]),new CsPopupsList({_parent:self,list:defaultList})},CsPopupsList.prototype.add=function(type,options){var obj={type:type,options:options};switch(type){case"popup":this.list.push(obj)}},Cs.prototype.gaTracking=function(){$("*[data-ga]").unbind("click.gatracking").bind("click.gatracking",function(){"number"!=typeof ga_click_no&&(window.ga_click_no=0),ga_click_no++;var ga;if((ga=$(this).data("ga"))&&"string"==typeof ga.section&&"string"==typeof ga.feature){if("undefined"==typeof _gaq)return;_gaq.push(["_trackEvent",ga.section,"Click "+ga_click_no,ga.feature])}})},Cs.prototype.switchTab=function(url,options){if("undefined"==typeof url)return!1;var params={};"string"==typeof options&&""!=$.trim(options)?params.tab=options:"object"==typeof options&&(params=options);var ajax="boolean"==typeof params.ajax?params.ajax:!0;return ajax?("undefined"!=typeof params.tab&&""!=$.trim(params.tab)&&"undefined"!=typeof csProfileMenu&&csProfileMenu.selectItemType(params.tab),void this.setUrl(url)):void(window.location.href==url?location.reload():location.href=url)},Cs.prototype.currentDevice=function(){var device="mobile";return $(window).width()>=600&&$(window).height()>400&&(device="tablet"),$(window).width()>=1024&&(device="desktop"),device},Cs.prototype.window=function(){var self=this;return new CsWindow({_parent:self})},CsWindow.prototype.reloadHash=function(current_hash){"#"+current_hash==location.hash&&$(window).trigger("hashchange")},CsWindow.prototype.deleteCookie=function(name,path,domain){name&&(document.cookie=name+"="+(path?";path="+path:"")+(domain?";domain="+domain:"")+";expires=Thu, 01 Jan 1970 00:00:01 GMT")},CsWindow.prototype.setCookie=function(c_name,value,exdays,domain){if(c_name){this.deleteCookie(c_name);var exdate=new Date;exdate.setDate(exdate.getDate()+exdays);var c_value=escape(value)+(null==exdays?"":"; expires="+exdate.toUTCString())+(null==domain?"":"; domain="+domain);document.cookie=c_name+"="+c_value}},CsWindow.prototype.getCookie=function(c_name){var c_value=document.cookie,c_start=c_value.indexOf(" "+c_name+"=");if(-1==c_start&&(c_start=c_value.indexOf(c_name+"=")),-1==c_start)c_value=null;else{c_start=c_value.indexOf("=",c_start)+1;var c_end=c_value.indexOf(";",c_start);-1==c_end&&(c_end=c_value.length),c_value=unescape(c_value.substring(c_start,c_end))}return c_value},CsWindow.prototype.postToURL=function(url,values){var method="post",form=document.createElement("form");form.setAttribute("method",method),form.setAttribute("action",url);for(var key in values)if(values.hasOwnProperty(key)){var hiddenField=document.createElement("input");hiddenField.setAttribute("type","hidden"),hiddenField.setAttribute("name",key),hiddenField.setAttribute("value",values[key]),form.appendChild(hiddenField)}document.body.appendChild(form),form.submit(),document.body.removeChild(form)},CsWindow.prototype.scrollToElement=function(selector,options){if("undefined"==typeof selector||""==$.trim(selector))return!1;var self=this;if("undefined"!=typeof options.selectTab&&""!=$.trim(options.selectTab)){if("undefined"==typeof csProfileMenu)return!1;if(options.selectTab!=csProfileMenu.currentItem){var tabURL=csProfileMenu.getItemURL(options.selectTab);if(!tabURL)return!1;csProfileMenu.selectItemType(options.selectTab),cs.setUrl(tabURL);var interval=setInterval(function(){cs.getPager("csBlockLoader").loading||(clearInterval(interval),delete options.selectTab,self.scrollToElement(selector,options))},100);return!0}}if(1!=$(selector).length)return!1;if(options||(options={}),"undefined"!=typeof options.position&&-1!=["top","bottom"].indexOf(options.position))var pos=options.position;else var pos="top";if("undefined"!=typeof options.offset&&cs.algorithms().isNumber(options.offset))var offset=options.offset;else var offset=0;var obj=$(selector),scroll_top="top"==pos?obj.offset().top:obj.offset().top+obj.height()-$(window).height();$("body, html").animate({scrollTop:scroll_top+offset+"px"}),"function"==typeof options.onScroll&&options.onScroll()},Cs.prototype.components=function(){var self=this;return new CsComponents({_parent:self})},CsComponents.prototype.dropdown=function(id,list,options){return options._parent=this,"undefined"==typeof options.version||1==options.version?new CsComponentsDropdown(id,list,options):2==options.version?new CsComponentsDropdownV2(id,list,options):void 0},CsComponents.prototype.commentBlock=function(object_id,options){if(!options)var options={};return options._parent=this,new CsCommentBlock(object_id,options)},CsComponents.prototype.uploader=function(container_id,options){if(!options)var options={};return options._parent=this,new CsUploader(container_id,options)},CsComponents.prototype.actionMenu=function(id,list,options){return options._parent=this,new CsComponentsActionMenu(id,list,options)},CsComponents.prototype.expandList=function(options){return options._parent=this,new CsComponentsExpandList(options)},CsComponents.prototype.fixedSidebar=function(options){return options._parent=this,new CsComponentsFixedSidebar(options)},CsComponents.prototype.toggle=function(id,list,options){return options._parent=this,new CsComponentsToggle(id,list,options)},CsComponents.prototype.dropdownCheckboxes=function(id,list,options){return new CsComponentsDropdownCheckbox(id,list,options)},CsComponents.prototype.fixedTableHeader=function(options){return new CsFixedTableHeader(options)},CsComponents.prototype.profileMenu=function(id,options){return options._parent=this,new CsComponentsProfileMenu(id,options)},CsComponents.prototype.rating=function(id,options){return options._parent=this,new CsComponentsRating(id,options)},CsComponents.prototype.thumb=function(id,options){return options._parent=this,new CsComponentsThumb(id,options)},CsComponents.prototype.ratings=function(identifier,options){var self=this,ratingObjects=new Array;return $(identifier).each(function(i){var rOptions={};rOptions=jQuery.extend({},options);var id=$(this).attr("id");if(!id)var id=$(this).attr("id","csRating_"+Math.floor(10000000001*Math.random())).attr("id");if($(this).data("options")){var rez=$(this).data("options");rez&&(rOptions=jQuery.extend(rOptions,rez))}var ratingObj=self.rating(id,rOptions);ratingObjects.push(ratingObj)}),ratingObjects},CsComponents.prototype.checkbox=function(id,options){return(!this._parent.checkboxes[id]||"undefined"!=typeof options&&"undefined"!=typeof options.clearCache&&options.clearCache)&&("undefined"==typeof options.version||1==options.version?this._parent.checkboxes[id]=new CsComponentsCheckbox(id,options):2==options.version&&(this._parent.checkboxes[id]=new CsComponentsCheckboxV2(id,options))),
this._parent.checkboxes[id]},CsComponents.prototype.expandable=function(id,options){if(!options)var options={};return options._parent=this,new CsComponentsExpandable(id,options)},CsComponents.prototype.checkboxes=function(identifier,options){var self=this,checkboxObjects=new Array;return $(identifier).each(function(i){var chOptions={};chOptions=jQuery.extend({},options);var id=$(this).attr("id");if(!id)var id=$(this).attr("id","csCheckbox_"+Math.floor(10000000001*Math.random())).attr("id");if($(this).data("options")){var rez=$(this).data("options");rez&&(chOptions=jQuery.extend(chOptions,rez))}var checkboxObj=self.checkbox(id,chOptions);checkboxObjects.push(checkboxObj)}),checkboxObjects},CsComponents.prototype.autocomplete=function(id,options){if(!options)var options={};return options._parent=this,"undefined"==typeof options.version||1==options.version?new CsComponentsAutocomplete(id,options):2==options.version?new CsComponentsAutocompleteV2(id,options):void 0},CsComponents.prototype.mobileUrl=function(id,options){if(!options)var options={};return options._parent=this,new csMobileURL(id,options)},CsComponents.prototype.radio=function(idClass,idName,options){if(!options)var options={};return options._parent=this,this._parent.radios[idName]||(this._parent.radios[idName]={}),"undefined"==typeof options.version||1==options.version?this._parent.radios[idName][idClass]=new CsComponentsRadio(idClass,idName,options):2==options.version&&(this._parent.radios[idName][idClass]=new CsComponentsRadioV2(idClass,idName,options)),this._parent.radios[idName][idClass]},CsComponents.prototype.radios=function(identifier,options){if(!options)var options={};options._parent=this;var self=this,groupName=!1,useGroupName=!1;return $(identifier).each(function(i){var chOptions={};chOptions=jQuery.extend({},options);var id=$(this).attr("id");if(!id)var id=$(this).attr("id","csRadio_"+Math.floor(10000000001*Math.random())).attr("id");if($(this).data("options")){var rez=$(this).data("options");rez&&(chOptions=jQuery.extend(chOptions,rez))}if(chOptions.name){var idName=chOptions.name;return!groupName&&idName&&(useGroupName=!0),groupName&&groupName!=idName&&(useGroupName=!1),groupName=idName,self._parent.radios[idName]||(self._parent.radios[idName]={}),"undefined"==typeof chOptions.version||2==chOptions.version?self._parent.radios[idName][id]=new CsComponentsRadioV2(id,idName,chOptions):self._parent.radios[idName][id]=new CsComponentsRadio(id,idName,chOptions),self._parent.radios[idName][id]}}),useGroupName&&groupName?new CsComponentsRadios(groupName,options):void 0},CsComponents.prototype.popup=function(options){if(!options)var options={};return options._parent=this,"undefined"==typeof options.version||1==options.version?new CsComponentsPopup(options):2==options.version?new CsComponentsPopupV2(options):void 0},CsComponents.prototype.alert=function(text,options){return"object"==typeof text&&0<Object.keys(text).length?options=text:("object"!=typeof options&&(options={}),options.text=text),options._parent=this,"undefined"==typeof csPopup.version||1==csPopup.version?new CsComponentsAlert(options):2==csPopup.version?new CsComponentsAlertV2(options):void 0},CsComponents.prototype.slidePanel=function(text,options){if(!options)var options={};return options.text=text,new CsComponentsSlidePanel(options)},CsComponents.prototype.tip=function(targetId,options){return options||(options={}),options._parent=this,this._parent.tips[targetId]?this._parent.tips[targetId].options.noCache?this._parent.tips[targetId]=new CsComponentsTip(targetId,options):this._parent.tips[targetId]:this._parent.tips[targetId]=new CsComponentsTip(targetId,options),this._parent.tips[targetId]},CsComponents.prototype.getGroupedTips=function(className){var tips={};for(var i in this._parent.tips)this._parent.tips[i].options&&this._parent.tips[i].options.groupClass&&this._parent.tips[i].options.groupClass==className&&(tips[i]=this._parent.tips[i]);return tips},CsComponents.prototype.hovercards=function(attribute,options){options||(options={});var defaultOptions=jQuery.extend({},options);if(options.srcAttribute=attribute||!1,options.srcAttribute){var hovercardOptions=[];$("*["+options.srcAttribute+"]").each(function(i){if($(this).attr(""+options.srcAttribute)){var id=$(this).attr("id");if(!id)var id=$(this).attr("id","csHovercardTarget_"+Math.floor(10000000001*Math.random())).attr("id");if(hovercardOptions[id]={},hovercardOptions[id]=jQuery.extend({},defaultOptions),$(this).data("hovercard-options")){var rez=$(this).data("hovercard-options");rez&&(hovercardOptions[id]=jQuery.extend(hovercardOptions[id],rez))}$(this).data("hovercard-template")&&(hovercardOptions[id].template=$(this).data("hovercard-template")),hovercardOptions[id].url=$(this).attr(options.srcAttribute)||hovercardOptions[id].url||!1,"#"==hovercardOptions[id].url.substring(0,1)&&(hovercardOptions[id].div=hovercardOptions[id].url.substring(1),hovercardOptions[id].url=!1),hovercardOptions[id].groupClass=hovercardOptions[id].groupClass||"csHovercardDefaultGroupClass",cs.components().tip(id,hovercardOptions[id])}})}},CsComponents.prototype.confirm=function(options){if(!options)var options={};return options._parent=this,"undefined"==typeof csPopup.version||1==csPopup.version?new CsComponentsConfirm(options):2==csPopup.version?new CsComponentsConfirmV2(options):void 0},CsComponents.prototype.messageAutocomplete=function(id,options){return"undefined"==typeof options.version||1==options.version?new CsMessageAutocomplete(id,options):2==options.version?(options.prefix="autocomplete",options.prefixStates=!1,"undefined"==typeof options.customClassName?options.customClassName="component":options.customClassName="component "+options.customClassName,new CsMessageAutocomplete(id,options)):void 0},CsComponents.prototype.feedItemMaker=function(id,blocks,options){if(!options)var options={};return options._parent=this,new CsFeedItemMaker(id,blocks,options)},CsComponents.prototype.switcher=function(id,list,options){if(!options)var options={};return options._parent=this,new CsSwitcher(id,list,options)},CsComponents.prototype.switcher2=function(id,list,options){if(!options)var options={};return options._parent=this,new CsSwitcher2(id,list,options)},CsComponents.prototype.sortable=function(id,options){if(!options)var options={};return options._parent=this,new CsComponentsSortable(id,options)},CsComponents.prototype.fileUploader=function(id,options){if(!options)var options={};return options._parent=this,new CsComponentsFileUploader(id,options)},CsComponents.prototype.resizableTextarea=function(id,options){if(!options)var options={};return options._parent=this,new CsComponentsResizableTextarea(id,options)},CsComponents.prototype.button=function(id,options){if(!options)var options={};return options._parent=this,"undefined"==typeof options.version||1==options.version?new CsComponentsButton(id,options):2==options.version?new CsComponentsButtonV2(id,options):void 0},CsComponents.prototype.titleTips=function(query,options){if(!options)var options={};return options._parent=this,new CsComponentsTitleTips(query,options)},CsComponents.prototype.hiddenTips=function(query,options){if(!options)var options={};return options._parent=this,new CsComponentsHiddenTips(query,options)},CsComponents.prototype.listTips=function(query,options){if(!options)var options={};return options._parent=this,new CsComponentsListTips(query,options)},CsComponents.prototype.getNotificator=function(containerId,options){if(!options)var options={};return options._parent=this,new CsComponentsNotificator(containerId,options)},CsComponents.prototype.getRequestBlock=function(containerId,options){if(!options)var options={};return options._parent=this,new CsComponentsRequestBlock(containerId,options)},CsComponents.prototype.input=function(containerId,options){if(!options)var options={};return options._parent=this,"undefined"==typeof options.version||1==options.version?new CsComponentsInput(containerId,options):2==options.version?new CsComponentsInputV2(containerId,options):void 0},CsComponents.prototype.dater=function(containerId,idName,options){if(!options)var options={};return options._parent=this,"undefined"==typeof options.version||1==options.version?new CsComponentsDater(containerId,idName,options):2==options.version?new CsComponentsDaterV2(containerId,idName,options):void 0},CsComponents.prototype.getInputMaxLength=function(containerId,options){if(!options)var options={};return options._parent=this,"undefined"==typeof options.version||1==options.version?new CsComponentsInputMaxLength(containerId,options):2==options.version?new CsComponentsInputMaxLengthV2(containerId,options):void 0},CsComponents.prototype.displayError=function(containerId,value){if(!options)var options={};return options._parent=this,new CsComponentsDisplayError(containerId,value)},CsComponents.prototype.panelNavigator=function(options){return"object"!=typeof options&&(options={}),options._parent=this,new CsPanelNavigator(options)},CsComponents.prototype.hovercard=function(containerId,options){return"object"!=typeof options&&(options={}),options._parent=this,new CsHovercard(containerId,options)},CsComponentsFileUploader.prototype.onSelectDefault=function(event,ID,fileObj){return this.options.maxSize&&fileObj.size>1e3*this.options.maxSize?(this.cancel(ID),!1):(this.fileId&&!this.options.allowMultiple&&this.deleteFile(),this.options.useButton&&(this.button.disable(),this.button.showLoader()),this.fileId=!1,void this.onSelect(event,ID,fileObj))},CsComponentsFileUploader.prototype.cancel=function(ID){this.container.cancelFileUpload(ID),this.container.uploadifyClearQueue()},CsComponentsFileUploader.prototype.onCompleteDefault=function(event,ID,fileObj,response,data){var tr=this._parent._parent.algorithms().parseJson(response);response=tr,response.data&&response.data.file_id&&(this.fileId=response.data.file_id,this.setTitle(response.data.name),this.options.useButton&&this.container.width(this.button.container.width()),this.options.removable&&this.showCross()),this.onComplete(event,ID,fileObj,response,data)},CsComponentsFileUploader.prototype.onAllCompleteDefault=function(event,data){this.options.useButton&&(this.button.enable(),this.button.hideLoader()),this.onAllComplete(event,data)},CsComponentsFileUploader.prototype.setTitle=function(title){title&&this.options.useButton&&this.button.setTitle(title)},CsComponentsFileUploader.prototype.setBytesTotal=function(total){this.bytesTotal=total},CsComponentsFileUploader.prototype.hideCross=function(){this.crossContainer.hide()},CsComponentsFileUploader.prototype.showCross=function(){this.crossContainer.show()},CsComponentsFileUploader.prototype.deleteFile=function(){if(this.fileId){var postData=this.options.data;postData.file_id=this.fileId,$.post(this.options.removeUrl,this.options.data,function(response){},"json"),this.fileId=!1,this.options.useButton&&(this.setTitle(this.options.defaultTitle),this.container.width(this.button.container.width())),this.options.removable&&this.hideCross()}this.onDelete(postData)},CsComponentsExpandable.prototype.getRealHeight=function(){var realHeight=0;return this.container.css("height","auto"),this.container.css("max-height","none"),realHeight=this.container.height(),this.container.height(this.options.height),realHeight},CsComponentsExpandable.prototype.expand=function(){var self=this;this.container.animate({height:this.options.realHeight},400,function(){self.arrowContainer.text("hide"),self.arrowContainer.attr("title","Hide")}),this.container.css("max-height","none")},CsComponentsExpandable.prototype.collapse=function(){var self=this;this.container.animate({height:this.options.height},400,function(){self.arrowContainer.text("more..."),self.arrowContainer.attr("title","Show more...")})},CsComponentsConfirm.prototype.onElementClick=function(e,i){this.options.buttons[i].onClick(e),this.options.buttons[i].disableOnClick&&this.buttons[i].disable()},CsComponentsConfirm.prototype.close=function(){csPopup.close(),this.options.onClose()},CsComponentsConfirm.prototype.generateHtml=function(){this.container=$("<div/>",{id:this.options.id}),this.options.title&&(this.headerContainer=$("<div/>",{"class":"popup-header",text:this.options.title}).appendTo(this.container),this.options.showClose&&$("<span/>").appendTo(this.headerContainer).addClass("cross").click(function(){self.options.onClose()})),this.layoutContainer=$("<div/>",{"class":"popup-layout"}).appendTo(this.container),this.options.text?this.layoutContainer.append("<div>"+this.options.text+"</div>"):this.layoutContainer.css("padding-top","0px");var self=this;if(this.options.buttons){this.footerContainer=$("<div/>",{"class":"popup-footer"}).appendTo(this.container);for(var i in this.options.buttons){var buttonId="csConfirmButton"+Math.floor(10000001*Math.random()),buttonObj=$("<span/>",{id:buttonId,style:"margin-right: 10px",rel:i,version:this.version}).appendTo(this.footerContainer),buttonOptions={title:this.options.buttons[i].text?this.options.buttons[i].text:"No text",color:"grey",size:"regular",version:this.version};this.options.buttons[i].width&&(buttonOptions.innerWidth=this.options.buttons[i].width),this.options.buttons[i].color&&(buttonOptions.color=this.options.buttons[i].color),this.options.buttons[i].onClick&&(buttonOptions.onClick=function(e){self.onElementClick(e,this.container.attr("rel"))}),this.buttons[i]=cs.components().button(buttonObj,buttonOptions)}}},CsComponentsConfirm.prototype.disableButtons=function(){if("object"!=typeof this.buttons||0==this.buttons.length)return!1;for(i in this.buttons)this.buttons[i].disable()},CsComponentsConfirm.prototype.enableButtons=function(){if("object"!=typeof this.buttons||0==this.buttons.length)return!1;for(i in this.buttons)this.buttons[i].enable()},CsComponentsAlert.prototype.openPopup=function(){return this.options.autoclose&&"extend"!=this.options.method?(this.container=$("<div/>",{}),this.generateAutocloseLayout(),csPopup.display(this.container,{html:!0,fitText:this.options.fitText}),void setTimeout(function(){csPopup.close()},this.options.autocloseTime)):this.options.autoclose_style&&"extend"!=this.options.method?(this.container=$("<div/>",{}),this.generateAutocloseLayout(),void csPopup.display(this.container,{html:!0})):void(csPopup.isOpened()?("new"==this.options.method&&(this.container=$("<div/>",{}),this.generateTitle(),this.generateLayout(),this.generateFooter(),this.buttonContainer.bind("click",function(e){csPopup.close()}),csPopup.display(this.container,{html:!0})),"extend"==this.options.method&&(this.options.autoclose?(this.container=$("<div/>",{}),this.generateAutocloseLayout(),csPopup.showTempContent(this.container),setTimeout(function(){csPopup.hideTempContent()},this.options.autocloseTime)):(this.container=$("<div/>",{}),this.generateTitle(),this.generateLayout(),this.generateFooter(),this.buttonContainer.bind("click",function(e){csPopup.hideTempContent()}),csPopup.showTempContent(this.container))),"inline"==this.options.method&&(this.container=$("<div/>",{"class":"popup-inline-"+this.options.type}),this.generateInlineLayout(),csPopup.contentContainer.find(".popup-inline-err").remove(),csPopup.contentContainer.find(".popup-inline-ok").remove(),csPopup.contentContainer.find(".popup-layout").before(this.container))):(this.container=$("<div/>",{}),this.generateTitle(),this.generateLayout(),this.generateFooter(),this.buttonContainer.bind("click",function(e){csPopup.close()}),csPopup.display(this.container,{html:!0})))},CsComponentsAlert.prototype.generateTitle=function(){this.headerContainer=$("<div/>",{"class":"popup-header",text:this.options.title}).appendTo(this.container)},CsComponentsAlert.prototype.generateLayout=function(){this.layoutContainer=$("<div/>",{"class":"popup-layout"}).appendTo(this.container),this.layoutContainer.append("<div>"+this.options.text+"</div>")},CsComponentsAlert.prototype.generateAutocloseLayout=function(){this.layoutContainer=$("<div/>",{"class":"popup-autoclose-layout"}).appendTo(this.container),this.layoutContainer.append("<div>"+this.options.text+"</div>")},CsComponentsAlert.prototype.generateInlineLayout=function(){this.layoutContainer=$("<div/>",{}).appendTo(this.container),this.layoutContainer.append("<div>"+this.options.text+"</div>")},CsComponentsAlert.prototype.generateFooter=function(){this.footerContainer=$("<div/>",{"class":"popup-footer"}).appendTo(this.container);var self=this;this.buttonContainer=$("<span/>",{"class":"cs-button cs-button-size-regular cs-button-color-grey"}).appendTo(this.footerContainer),this.buttonContainer.html('<span class="caption"><span class="caption-text">OK</span></span>'),this.options.onClick&&this.buttonContainer.bind("click",function(e){self.onButtonClick(e)})},CsComponentsProfileMenu.prototype.selectItemType=function(selected_type){"undefined"!=typeof selected_type&&""!=selected_type&&(this.currentItem=selected_type,this.list.find("li").removeClass("selected"),this.list.find("li").each(function(){if($(this).attr("rel")==selected_type)$(this).addClass("selected");else{var data_item=$(this).data("item");data_item.temp&&$(this).remove()}}))},CsComponentsProfileMenu.prototype.addItem=function(type,params){var exists=!1;if(this.list.find("li").each(function(){$(this).attr("rel")==type&&(exists=!0)}),exists)return!1;var li=$("<li/>",{rel:type}).appendTo(this.list),a=$("<a/>",{href:params.href,text:params.title,"class":"r3tr r3tl"}).appendTo(li);a.data("hash",params.data_hash),li.data("item",params),this.items.push(type)},CsComponentsProfileMenu.prototype.selectItem=function(num){},CsComponentsProfileMenu.prototype.getItemURL=function(type){var link=this.list.find('li[rel="'+type+'"] > a');return link.length?link.attr("href"):!1},CsComponentsSlidePanel.prototype.onWindowScroll=function(e){if(this.container){var scrollTop=$(window).scrollTop();this.container.css("top",scrollTop+"px")}},CsComponentsSlidePanel.prototype.display=function(href,options){this.container&&this.destroy(),options||(options={}),this.options=jQuery.extend({},this.defaultOptions);for(var i in options)this.options[i]=options[i];this.options.html||(this.options.html=!1);var self=this,leftPosition=parseInt($(window).width()/2);this.container=$("<div/>",{"class":"cs-slide-panel",id:"csSlidePanelContainer"}).appendTo(document.body).css("left",leftPosition+"px");var scrollTop=parseInt(eval($(window).scrollTop())),topPosition=scrollTop-this.options.height;if(this.container.css("top",topPosition+"px"),this.windowContainer=$("<div/>",{"class":"slide-panel-window"}).css("width",this.options.width).appendTo(this.container),this.windowInsideContainer=$("<div/>",{"class":"slide-panel-window-inside"}).appendTo(this.windowContainer),this.options.hideCross||(this.closeButton=$("<div/>").appendTo(this.windowContainer).addClass("slide-panel-close"),this.closeButton.bind("click",function(){self.close()})),this.options.customClassName&&this.windowInsideContainer.addClass(this.options.customClassName),this.options.div?this.loadDiv(href):this.options.html?this.loadHtml(href):(this.showLoader(),this.loadUrl(href)),"undefined"!=typeof this.options.button&&this.options.button){var buttonName="string"==typeof this.options.buttonName?this.options.buttonName:"Done",buttonPosition="string"==typeof this.options.buttonPosition&&"right"==this.options.buttonPosition?"right":"left";this.windowContainer.append('<span id="csSliderButton"></span>');var buttonParams={version:2,title:buttonName,color:"green",size:"regular",onClick:function(e){"function"==typeof self.options.buttonClick?self.options.buttonClick(e):self.close()}};"string"==typeof this.options.buttonColor&&(buttonParams.color=this.options.buttonColor),"string"==typeof this.options.buttonSize&&(buttonParams.size=this.options.buttonSize),"number"==typeof this.options.buttonInnerWidth&&(buttonParams.innerWidth=this.options.buttonInnerWidth),"string"==typeof this.options.buttonCustomClassName&&(buttonParams.customClassName=this.options.buttonCustomClassName),"string"==typeof this.options.buttonIconUrl&&(buttonParams.iconUrl=this.options.buttonIconUrl),"number"==typeof this.options.buttonIconLeft&&(buttonParams.iconLeft=this.options.buttonIconLeft),"number"==typeof this.options.buttonIconTop&&(buttonParams.iconTop=this.options.buttonIconTop),"boolean"==typeof this.options.buttonIconMirror&&(buttonParams.iconMirror=this.options.buttonIconMirror);var csSliderButtonObj=cs.components().button("csSliderButton",buttonParams);if("right"==buttonPosition){this.windowInsideContainer.css("float","right");var buttonPaddingLeft=$("#csSliderButton").css("margin-left");$("#csSliderButton").css("margin-left",$("#csSliderButton").css("margin-right")),$("#csSliderButton").css("margin-right",buttonPaddingLeft)}this.windowInsideContainer.width(this.windowContainer.width()-$("#csSliderButton").width()-parseInt($("#csSliderButton").css("margin-left"))-parseInt($("#csSliderButton").css("margin-right"))),$("#csSliderButton").css("top",(this.windowContainer.height()-$("#csSliderButton").height())/2+"px")}this.container.animate({top:scrollTop},400,function(){}),this.options.autoclose&&setTimeout(function(){self.close()},this.options.autocloseTime)},CsComponentsSlidePanel.prototype.closeOnEscape=function(e){this.options.hideCross||27==e.keyCode&&this.close()},CsComponentsSlidePanel.prototype.loadUrl=function(url){var self=this;$.post(url,this.options.postObject,function(response){self.urlResponse(response)})},CsComponentsSlidePanel.prototype.loadDiv=function(divId){var self=this;if($("#"+divId).attr("id")){var div_val=$("#"+divId).html();$("#"+divId).hide(),self.urlResponse(div_val)}},CsComponentsSlidePanel.prototype.loadHtml=function(html){var self=this;html&&self.urlResponse(html)},CsComponentsSlidePanel.prototype.showLoader=function(url){this.loaderContainer=$("<div/>",{"class":"slide-panel-loader"}).appendTo(this.windowInsideContainer),this.loaderContainer.text(cs.txt("js popup window : loading")),this.centerContent()},CsComponentsSlidePanel.prototype.hideLoader=function(url){this.loaderContainer&&this.loaderContainer.remove()},CsComponentsSlidePanel.prototype.urlResponse=function(response){try{var result=jQuery.parseJSON(response);if(null!=result&&"undefined"!=typeof result.status&&"err"==result.status)return this.close(),!1}catch(err){}if(this.options.div||this.options.html)this.constructContent(response);else{var self=this;setTimeout(function(){self.constructContent(response)},500)}},CsComponentsSlidePanel.prototype.centerContent=function(){var leftPosition=parseInt($(window).width()-this.container.width())/2;this.container.css("left",leftPosition+"px")},CsComponentsSlidePanel.prototype.constructContent=function(data){this.contentContainer&&this.contentContainer.remove(),this.contentContainer=$("<div/>",{"class":"slide-panel-content"}).appendTo(this.windowInsideContainer).hide(),this.contentContainer.html(data),this.hideLoader(),this.centerContent(),this.contentContainer.show()},CsComponentsSlidePanel.prototype.close=function(callback){var self=this;if(this.container){var scrollTop=parseInt(eval($(window).scrollTop()));this.container.animate({top:scrollTop-this.options.height},200,function(){self.destroy(),callback&&callback()})}},CsComponentsSlidePanel.prototype.isOpened=function(){return this.container&&"block"==this.container.css("display")?!0:!1},CsComponentsSlidePanel.prototype.destroy=function(){this.container.remove()},CsComponentsTip.prototype.setTemplate=function(name){var templates={"small-image":{showOn:"mouseover",targetPosition:"bottom-center",horizontalShift:-40,arrowHorizontalShift:40,verticalShift:-5,showDelay:500},"mini-image":{showOn:"mouseover",targetPosition:"bottom-center",horizontalShift:-40,arrowHorizontalShift:40,verticalShift:0,showDelay:500},link:{showOn:"mouseover",targetPosition:"bottom-left",horizontalShift:15,arrowHorizontalShift:10,verticalShift:0,showDelay:500,width:307},"photo-title":{showOn:"mouseover",hideOn:"mouseout",targetPosition:"bottom-center",horizontalShift:-30,verticalShift:0,showDelay:500,hideDelay:500,width:307},evaluations:{showOn:"mouseover",hideOn:"mouseout",targetPosition:"bottom-center",horizontalShift:10,verticalShift:0,showDelay:500,hideDelay:500,width:300},button:{showOn:"click",targetPosition:"bottom-center",horizontalShift:0,arrowHorizontalShift:0,verticalShift:0,width:307}};templates[""+name]&&(this.options=$.extend(this.options,templates[""+name]),this.options.template=name)},CsComponentsTip.prototype.closeTipsGroup=function(e){if(this.options.groupClass){var groupedTips=this._parent.getGroupedTips(this.options.groupClass);for(var i in groupedTips)groupedTips[i].close()}},CsComponentsTip.prototype.onWindowObjectClick=function(e){if(this.container&&this.opened){var close_drop=!0;if(e.target.id==this.containerId)return void(close_drop=!1);var el_id2=$(e.target).parents("#"+this.containerId).attr("id");if(el_id2)return void(close_drop=!1);close_drop&&this.close()}},CsComponentsTip.prototype.close=function(){this.options.noCache&&this.clear(),this.onClose(),this.container&&this.container.hide(),this.opened=!1},CsComponentsTip.prototype.show=function(options){options||(options={}),this.close();var self=this;if(this.options.noCache=options.noCache||this.options.noCache||!1,this.options.div=options.div||!1,this.options.url=options.url||!1,this.options.height=options.height||"auto",this.options.width=options.width||300,this.options.targetPosition=options.targetPosition||"bottom-left",this.options.tipPosition=options.tipPosition||"top-left",this.options.horizontalShift=options.horizontalShift||0,this.options.verticalShift=options.verticalShift||0,this.options.arrowHorizontalShift=options.arrowHorizontalShift||0,this.options.arrowVerticalShift=options.arrowVerticalShift||0,!this.options.noCache&&this.container&&this.container.attr("id"))return self.container.show(),self.container.css("visibility","hidden"),self.setTipPosition(),self.container.css("visibility","visible"),void setTimeout(function(){self.opened=!0},1);if(this.container||(this.container=$("<div/>",{"class":"cs-tip",id:this.containerId}).appendTo(document.body).css("top","0px")),"mouseout"==this.hideOn&&(this.container.bind("mouseout",function(e){"undefined"==typeof hideTimeout&&(self.hideTimeout=setTimeout(function(){self.close()},self.options.hideDelay))}),this.container.bind("mouseover",function(e){clearTimeout(self.hideTimeout)})),this.beforeShow(),this.container.show(),this.container.css("visibility","hidden"),this.clear(),this.tipContainer=$("<div/>",{"class":"cs-tip-container outset-shadow r1"}).appendTo(this.container),this.tipArrowContainer=$("<div/>",{"class":"tip-arrow tip-arrow-top"}).appendTo(this.tipContainer),this.tipContainerInside=$("<div/>",{"class":"cs-tip-container-inside"}).appendTo(this.tipContainer),this.tipContainer.height(this.options.height),this.tipContainer.width(this.options.width),this.tipContainerInside.height(this.options.height),this.tipContainerInside.width(this.options.width),this.showLoader&&this.options.url&&($("<div>",{"class":"cs-tip-loader"}).appendTo(this.tipContainerInside),this.setTipPosition(),this.container.css("visibility","visible"),this.loaderTimeout=setTimeout(function(){clearTimeout(self.loaderTimeout),self.loaderTimeout=!1,self.requestUrlCallback()},500)),this.options.div)this.tipContainerInside.html($("#"+this.options.div).html()),this.setTipPosition(),this.container.css("visibility","visible"),setTimeout(function(){self.opened=!0},1);else if(this.options.url){var urlQueryString=this._parent._parent.algorithms().parseUrl(this.options.url).search;$.get(this.options.url+(urlQueryString?"&":"?")+"tip_id="+this.containerId,function(response){self.response=response,self.requestUrlCallback()})}},CsComponentsTip.prototype.requestUrlCallback=function(){if(this.response&&!this.loaderTimeout){this.container.css("visibility","hidden"),this.tipContainerInside.html(this.response),this.setTipPosition(),this.container.css("visibility","visible");var self=this;this.response=!1,setTimeout(function(){self.opened=!0},1)}},CsComponentsTip.prototype.calculateTipPosition=function(){if(!this.tipContainer)return{top:0,left:0};var offset=this.targetContainer.offset(),top=offset.top,left=offset.left,additionals=this.calculateAdditionalTipTopLeft();top=parseInt(parseInt(top)+parseInt(additionals.top)),left=parseInt(parseInt(left)+parseInt(additionals.left));var additionals2=this.calculateAdditionalTargetTopLeft();return top=parseInt(parseInt(top)+parseInt(additionals2.top)),left=parseInt(parseInt(left)+parseInt(additionals2.left)),{top:top,left:left}},CsComponentsTip.prototype.setTipPosition=function(){if(this.tipContainer){var pos=this.calculateTipPosition();this.setTipArrowPosition(),this.tipContainer.css("top",pos.top+"px"),this.tipContainer.css("left",pos.left+"px")}},CsComponentsTip.prototype.setTipArrowPosition=function(){var allow=["top-left","top-center","top-right","right-top","right-middle","right-bottom","bottom-right","bottom-center","bottom-left","left-bottom","left-middle","left-top"],def=!1;for(i in allow)if(allow[i]==this.options.tipPosition){def=!0;break}def||(this.options.tipPosition="top-left");var tl=this.options.tipPosition.split("-"),half=Math.floor(parseInt(this.arrowMaxDimention)/2);switch(this.tipArrowContainer.removeClass("tip-arrow-bottom"),this.tipArrowContainer.removeClass("tip-arrow-top"),this.tipArrowContainer.removeClass("tip-arrow-left"),this.tipArrowContainer.removeClass("tip-arrow-right"),tl[0]){case"top":this.tipArrowContainer.addClass("tip-arrow-top");break;case"right":this.tipArrowContainer.addClass("tip-arrow-right");break;case"bottom":this.tipArrowContainer.addClass("tip-arrow-bottom");break;case"left":this.tipArrowContainer.addClass("tip-arrow-left")}switch(tl[1]){case"left":this.tipArrowContainer.css("left",parseInt(this.inlineVirtualPadding)+"px"),this.tipArrowContainer.css("margin-left",-1*parseInt(half+-1*parseInt(this.options.arrowHorizontalShift))+"px");break;case"center":this.tipArrowContainer.css("left","50%"),this.tipArrowContainer.css("margin-left",-1*parseInt(half+-1*parseInt(this.options.arrowHorizontalShift))+"px");break;case"right":this.tipArrowContainer.css("right",parseInt(this.inlineVirtualPadding)+"px"),this.tipArrowContainer.css("margin-left",parseInt(half+-1*parseInt(this.options.arrowHorizontalShift))+"px");break;case"top":this.tipArrowContainer.css("top",parseInt(this.inlineVirtualPadding)+"px"),this.tipArrowContainer.css("margin-top","-"+parseInt(half+-1*parseInt(this.options.arrowVerticalShift))+"px");break;case"middle":this.tipArrowContainer.css("top","50%"),this.tipArrowContainer.css("margin-top","-"+parseInt(half+-1*parseInt(this.options.arrowVerticalShift))+"px");break;case"bottom":this.tipArrowContainer.css("bottom",parseInt(this.inlineVirtualPadding)+"px"),this.tipArrowContainer.css("margin-top",parseInt(half+-1*parseInt(this.options.arrowVerticalShift))+"px")}},CsComponentsTip.prototype.calculateAdditionalTipTopLeft=function(){var allow=["top-left","top-center","top-right","right-top","right-middle","right-bottom","bottom-right","bottom-center","bottom-left","left-bottom","left-middle","left-top"],def=!1;for(i in allow)if(allow[i]==this.options.tipPosition){def=!0;break}def||(this.options.tipPosition="top-left");var tl=this.options.tipPosition.split("-"),top=0,left=0,width=this.tipContainer.width(),height=this.tipContainer.height();switch(tl[0]){case"top":top=this.arrowOutlineMargin;break;case"right":left=parseInt(-1*width-parseInt(this.arrowOutlineMargin));break;case"bottom":top=parseInt(-1*height-parseInt(this.arrowOutlineMargin));break;case"left":left=this.arrowOutlineMargin}switch(tl[1]){case"left":left=parseInt(-1*parseInt(this.inlineVirtualPadding));break;case"center":left=Math.floor(-1*width/2);break;case"right":left=parseInt(-1*width+parseInt(this.inlineVirtualPadding));break;case"top":top=-1*parseInt(this.inlineVirtualPadding);break;case"middle":top=Math.floor(-1*height/2);break;case"bottom":top=parseInt(-1*height+parseInt(this.inlineVirtualPadding))}return{
top:top,left:left}},CsComponentsTip.prototype.calculateAdditionalTargetTopLeft=function(){var allow=["top-left","top-center","top-right","right-top","right-middle","right-bottom","bottom-right","bottom-center","bottom-left","left-bottom","left-middle","left-top"],def=!1;for(i in allow)if(allow[i]==this.options.targetPosition){def=!0;break}def||(this.options.targetPosition="top-left");var tl=this.options.targetPosition.split("-"),top=0,left=0,width=this.targetContainer.width(),height=this.targetContainer.height();switch(tl[0]){case"top":top=0;break;case"right":left=width;break;case"bottom":top=height;break;case"left":left=0}switch(tl[1]){case"left":left=0;break;case"center":left=Math.floor(width/2);break;case"right":left=width;break;case"top":top=0;break;case"middle":top=Math.floor(height/2);break;case"bottom":top=height}return top=parseInt(parseInt(top)+parseInt(this.options.verticalShift)),left=parseInt(parseInt(left)+parseInt(this.options.horizontalShift)),{top:top,left:left}},CsComponentsTip.prototype.clear=function(){this.tipContainer&&(this.tipArrowContainer.remove(),this.tipContainer.remove())},CsComponentsAutocomplete.prototype.disable=function(){this.autocomplete.clearValue(),this.input.addClass("cs-input-field-design-disabled"),this.input.prop("disabled",!0)},CsComponentsAutocomplete.prototype.enable=function(){this.input.removeClass("cs-input-field-design-disabled"),this.input.prop("disabled",!1)},CsComponentsAutocomplete.prototype.autocomplete=function(input,options){function flushCache(){cache={},cache.data={},cache.length=0}function onChange(){if(46==lastKeyPressCode||lastKeyPressCode>8&&32>lastKeyPressCode&&"none"!=$results.css("display"))return $results.hide();options.selectOnly&&(hiddenInput.val(""),styleSet());var v=$input.val();v!=prev&&(prev=v,v.length>=options.minChars?($input.addClass(options.loadingClass),requestData(v)):($input.removeClass(options.loadingClass),$results.hide()))}function styleSet(){options.selectOnly&&(hiddenInput.val()?($input.addClass("cs-autocomplete-input-set"),me._main.crossContainer&&me._main.crossContainer.show()):($input.removeClass("cs-autocomplete-input-set"),me._main.crossContainer&&me._main.crossContainer.hide()))}function moveSelect(step){var lis=$("div",results);lis&&(active+=step,$(lis[active]).hasClass("full-list")&&(active+=step),0>active?active=1:active>=lis.size()&&(active=lis.size()-1),lis.removeClass("ac_over"),$(lis[active]).addClass("ac_over"))}function selectCurrent(){var li=$("div.ac_over",results)[0];if(!li){var $li=$("div",results);options.selectOnly?(1==$li.length&&(li=$li[0]),options.selectFirst&&(li=$li[1])):options.selectFirst&&(li=$li[0])}return li?(selectItem(li),!0):!1}function selectItem(li){li||(li=document.createElement("li"),li.extra=[],li.selectValue="");var v=$.trim(li.selectValue?li.selectValue:li.innerHTML);input.lastSelected=v,prev=v,$results.html(""),setValue(v,li.selectId?li.selectId:li.selectValue),hideResultsNow(),options.onItemSelect&&setTimeout(function(){options.onItemSelect(li)},1),options.onChange()}function createSelection(start,end){var field=$input.get(0);if(field.createTextRange){var selRange=field.createTextRange();selRange.collapse(!0),selRange.moveStart("character",start),selRange.moveEnd("character",end),selRange.select()}else field.setSelectionRange?field.setSelectionRange(start,end):field.selectionStart&&(field.selectionStart=start,field.selectionEnd=end);field.focus()}function autoFill(sValue){8!=lastKeyPressCode&&($input.val($input.val()+sValue.substring(prev.length)),createSelection(prev.length,sValue.length))}function showResults(){var pos=findPos($input);if(options.autocompleteWith>0)var iWidth=options.autocompleteWith;else{var iWidth=$input.width();iWidth+=parseInt($input.css("padding-left"),10)+parseInt($input.css("padding-right"),10)}$results.css({width:parseInt(iWidth)+"px",top:pos.y+input.offsetHeight-1+"px",left:pos.x+"px"}).show()}function hideResults(){timeout&&clearTimeout(timeout),timeout=setTimeout(hideResultsNow,200)}function hideResultsNow(){if(timeout&&clearTimeout(timeout),$input.removeClass(options.loadingClass),$results.is(":visible")&&$results.hide(),options.mustMatch){var v=$input.val();v!=input.lastSelected&&selectItem(null)}}function receiveData(q,data){if(data){if($input.removeClass(options.loadingClass),results.innerHTML="",!hasFocus||0==data.length)return hideResultsNow();/msie/i.test(navigator.userAgent)&&$results.append(document.createElement("iframe"));var ulD=dataToDom(data);results.appendChild(ulD),options.autoFill&&$input.val().toLowerCase()==q.toLowerCase()&&autoFill(data[0][0]),showResults()}else hideResultsNow()}function parseData(data){if(!data)return null;for(var parsed=[],rows=data.split(options.lineSeparator),i=0;i<rows.length;i++){var row=$.trim(rows[i]);row&&(parsed[parsed.length]=row.split(options.cellSeparator))}return parsed}function dataToDom(data){var ul=document.createElement("div");$(ul).addClass("full-list");var num=data.length;options.maxItemsToShow>0&&options.maxItemsToShow<num&&(num=options.maxItemsToShow);for(var i=0;num>i;i++){var row=data[i];if(row){var li=document.createElement("div");options.formatItem?(li.innerHTML=options.formatItem(row,i,num),li.selectValue=row[0],li.selectId=row[1]):(li.innerHTML=row[0],li.selectId=row[1]);var extra=null;if(row.length>1){extra=[];for(var j=1;j<row.length;j++)extra[extra.length]=row[j]}li.extra=extra,ul.appendChild(li),$(li).hover(function(){$("div",ul).removeClass("ac_over"),$(this).addClass("ac_over"),active=$("div",ul).indexOf($(this).get(0))},function(){$(this).removeClass("ac_over")}).click(function(e){$input.get(0).focus(),selectItem(this),e.preventDefault(),e.stopPropagation()})}}return ul}function requestData(q){options.matchCase||(q=q.toLowerCase());var data=options.cacheLength?loadFromCache(q):null;options.alwaysQuery&&data&&0==data.length&&(data=null),data?receiveData(q,data):"string"==typeof options.url&&options.url.length>0?(currentGetRequest&&currentGetRequest.abort(),currentGetRequest=$.get(makeUrl(q),function(data){data=parseData(data),addToCache(q,data),receiveData(q,data)})):$input.removeClass(options.loadingClass)}function makeUrl(q){var urlQueryString=options._parent._parent.algorithms().parseUrl(options.url).search,url=options.url+(urlQueryString?"&":"?")+"q="+encodeURI(q);for(var i in options.extraParams)url+="&"+i+"="+encodeURI(options.extraParams[i]);return url}function loadFromCache(q){if(!q)return null;if(cache.data[q])return cache.data[q];if(options.matchSubset)for(var i=q.length-1;i>=options.minChars;i--){var qs=q.substr(0,i),c=cache.data[qs];if(c){for(var csub=[],j=0;j<c.length;j++){var x=c[j],x0=x[0];matchSubset(x0,q)&&(csub[csub.length]=x)}return csub}}return null}function matchSubset(s,sub){options.matchCase||(s=s.toLowerCase());var i=s.indexOf(sub);return-1==i?!1:0==i||options.matchContains}function findValueCallback(q,data){data&&$input.removeClass(options.loadingClass);for(var num=data?data.length:0,li=null,i=0;num>i;i++){var row=data[i];if(row[0].toLowerCase()==q.toLowerCase()){li=document.createElement("li"),options.formatItem?(li.innerHTML=options.formatItem(row,i,num),li.selectValue=row[0],li.selectId=row[1]):(li.innerHTML=row[0],li.selectValue=row[0],li.selectId=row[1]);var extra=null;if(row.length>1){extra=[];for(var j=1;j<row.length;j++)extra[extra.length]=row[j]}li.extra=extra}}options.onFindValue&&setTimeout(function(){options.onFindValue(li)},1)}function addToCache(q,data){data&&q&&options.cacheLength&&(!cache.length||cache.length>options.cacheLength?(flushCache(),cache.length++):cache[q]||cache.length++,cache.data[q]=data)}function getValue(){return[$input.val(),hiddenInput?hiddenInput.val():""]}function clearValue(){hiddenInput.val(""),$input.val(""),styleSet()}function setValue(string,id){$input.val(string),hiddenInput&&hiddenInput.val(id),styleSet()}function findPos(obj){var offset=(obj.offsetLeft||0,obj.offsetTop||0,obj.offset()),top=offset.top,left=offset.left;return{x:left,y:top}}this._main=options._main;var me=this,$input=$(input).attr("autocomplete","off"),hiddenInput=!1;if(options.name||options.id){var hiddenInput=$("<input/>",{value:options.value||"",type:"hidden"}).insertAfter(input);options.name&&(hiddenInput.attr("name",options.name),hiddenInput.attr("id",options.id))}options.width&&$input.width(options.width),options.stopRedesign||($input.addClass("cs-input-field-design"),options.color&&$input.addClass("cs-input-field-color-"+options.color),options.size&&$input.addClass("cs-input-field-size-"+options.size),$input.addClass("no"),styleSet()),options.text&&$input.val(options.text),options.inputClass&&$input.addClass(options.inputClass);var results=document.createElement("div");options.stopRedesign||$(results).addClass("r3b");var $results=$(results);$results.hide().addClass(options.resultsClass).css("position","absolute"),options.autocompleteWith>0&&$results.css("width",options.autocompleteWith),0!=options.alwaysQuery&&(options.alwaysQuery=!0),$("body").append(results),input.autocompleter=me;var timeout=null,prev="",active=-1,cache={},hasFocus=!1,hasFocusDelayed=!1,lastKeyPressCode=null,currentGetRequest=null;if(flushCache(),null!=options.data){var sFirstChar="",stMatchSets={},row=[];"string"!=typeof options.url&&(options.cacheLength=1);for(var i=0;i<options.data.length;i++)row="string"==typeof options.data[i]?[options.data[i]]:options.data[i],row[0].length>0&&(sFirstChar=row[0].substring(0,1).toLowerCase(),stMatchSets[sFirstChar]||(stMatchSets[sFirstChar]=[]),stMatchSets[sFirstChar].push(row));for(var k in stMatchSets)options.cacheLength++,addToCache(k,stMatchSets[k])}$input.keydown(function(e){switch(lastKeyPressCode=e.keyCode,e.keyCode){case 38:e.preventDefault(),moveSelect(-1);break;case 40:e.preventDefault(),moveSelect(1);break;case 9:case 13:case 33:case 34:selectCurrent()&&($input.get(0).focus(),e.preventDefault());break;default:active=-1,timeout&&clearTimeout(timeout),timeout=setTimeout(function(){onChange()},options.delay)}}).mouseup(function(e){hasFocusDelayed||e.preventDefault()}).focus(function(){options.defaultText&&!$input.val()&&options.placeholderText&&$(options.placeholderText).css("display","none"),hasFocus=!0,setTimeout(function(){hasFocusDelayed=!0},500),(options.selectText||options.selectOnly)&&input.select(),options.stopRedesign||$input.addClass("cs-input-field-design-focused")}).blur(function(){hasFocus=!1,hasFocusDelayed=!1,$input.val()||(clearValue(),options.defaultText&&options.placeholderText&&$(options.placeholderText).css("display","block")),options.selectOnly&&(options.allowEmail&&cs.algorithms().validateEmail($input.val())||options.allowText||hiddenInput.val()||clearValue()),options.stopRedesign||$input.removeClass("cs-input-field-design-focused"),hideResults(),options.onBlur()}),hideResultsNow(),this.flushCache=function(){flushCache()},this.setExtraParams=function(p){options.extraParams=p},this.findValue=function(){var q=$input.val();options.matchCase||(q=q.toLowerCase());var data=options.cacheLength?loadFromCache(q):null;data?findValueCallback(q,data):"string"==typeof options.url&&options.url.length>0?$.get(makeUrl(q),function(data){data=parseData(data),addToCache(q,data),findValueCallback(q,data)}):findValueCallback(q,null)},this.clearValue=clearValue,this.getValue=getValue,this.setValue=setValue,this.clearValue=clearValue,this.onChange=onChange},jQuery.fn.indexOf=function(e){for(var i=0;i<this.length;i++)if(this[i]==e)return i;return-1},CsComponentsInput.prototype.getSelection=function(){var position={},that=this.container.get(0);if(void 0===that.selectionStart){that.focus();var select=document.selection.createRange();position.length=select.text.length,select.moveStart("character",-that.value.length),position.end=select.text.length,position.start=position.end-position.length}else position.start=that.selectionStart,position.end=that.selectionEnd,position.length=position.end-position.start;return position},CsComponentsInput.prototype.setSelection=function(start,end){var that=this.container.get(0);if(void 0===that.selectionStart){that.focus();var r=that.createTextRange();r.collapse(!0),r.moveEnd("character",end),r.moveStart("character",start),r.select()}else that.selectionStart=start,that.selectionEnd=end},CsComponentsInput.prototype.putDefaultText=function(defaultText){defaultText&&(this.options.defaultText=defaultText),this.options.defaultText&&(this.container.val(this.options.defaultText),this.container.addClass("cs-input-field-design-default-text"),this.options.height&&this.container.height(this.options.height))},CsComponentsInput.prototype.disable=function(newValue){this.container.prop("disabled",!0),this.options.stopRedesign||this.container.addClass("cs-input-field-design-disabled"),newValue&&this.container.val(newValue)},CsComponentsInput.prototype.readonly=function(active,newValue){"undefined"!=typeof active&&active?(this.container.attr("readonly",!0),this.options.stopRedesign||this.container.addClass("cs-input-field-design-disabled")):(this.container.removeAttr("readonly"),this.options.stopRedesign||this.container.removeClass("cs-input-field-design-disabled")),"undefined"!=typeof newValue&&newValue&&this.container.val(newValue)},CsComponentsInput.prototype.setValue=function(newValue){this.container.val(newValue),this.options.formatNumeric&&this.formatNumber(!1)},CsComponentsInput.prototype.getValue=function(){return this.options.defaultText&&$.trim(this.container.val())==$.trim(this.options.defaultText)?"":this.container.val()},CsComponentsInput.prototype.enable=function(newValue){this.container.prop("disabled",!1),this.options.stopRedesign||this.container.removeClass("cs-input-field-design-disabled"),newValue?this.container.val(newValue):this.container.val("")},CsComponentsInput.prototype.reset=function(){this.container.val(""),this.options.maxLength&&this.maxLength.updateCountContainer(this.options.maxLength),this.container.get(0)!=document.activeElement&&this.options.defaultText&&(" "!=this.container.val()&&this.container.val()||this.putDefaultText())},CsComponentsInput.prototype.getValueCount=function(){return this.container.val().length},CsComponentsInput.prototype.validateField=function(params){return this.options.maxLength&&this.container.val().length>this.options.maxLength?(this.container.focus(),!1):this},CsComponentsInput.prototype.focus=function(params){this.container.focus()},CsComponentsInput.prototype.setMaxLength=function(val){this.options.maxLength||(this.options.maxLength=val,this.maxLength=this._parent.getInputMaxLength(this.containerId,{maxLength:this.options.maxLength,showTick:this.options.showTick})),this.maxLength.options.maxLength=val,this.options.maxLength=val,this.reset()},CsComponentsInputMaxLength.prototype.getValueLength=function(e){return this.container.val().length},CsComponentsInputMaxLength.prototype.getCharactersLeftNum=function(e){return this.options.maxLength-this.getValueLength()},CsComponentsInputMaxLength.prototype.getCharacterCountValidation=function(e){return this.options.maxLength-this.getValueLength()>=0?!0:!1},CsComponentsInputMaxLength.prototype.updateCountContainer=function(val){val>=0?this.countContainer.removeClass("cs-field-length-count-negative").addClass("cs-field-length-count-positive"):this.countContainer.removeClass("cs-field-length-count-positive").addClass("cs-field-length-count-negative"),this.countContainer.text(val)},CsComponentsRequestBlock.prototype.respondRequest=function(status){var post={};post.request_id=this.options.requestId,post.status=status;var self=this;$.post(this._parent._parent.options.site_url+"account/contacts/ajax-respond-request",post,function(response){setTimeout(function(){self.setMyStatus(status)},2e3)},"json")},CsComponentsRequestBlock.prototype.setMyStatus=function(status){"new"==status?(this.acceptedButtonContainer.hide(),this.ignoredButtonContainer.hide(),this.acceptButtonContainer.show(),this.ignoreButtonContainer.show()):"accepted"==status?(this.acceptButtonContainer.hide(),this.ignoreButtonContainer.hide(),this.ignoredButtonContainer.hide(),this.acceptedButtonContainer.show()):"ignored"==status&&(this.acceptButtonContainer.hide(),this.ignoreButtonContainer.hide(),this.acceptedButtonContainer.hide(),this.ignoredButtonContainer.show())},CsComponentsResizableTextarea.prototype.keyDownEvent=function(e){this.resizeTextarea(e)},CsComponentsResizableTextarea.prototype.resizeTextarea=function(e){var self=this,value=this.container.val();this.hiddenContainer.text(value+"a"),this.setHiddenContainerWidth();var height=null;setTimeout(function(){height="border-box"==self.boxSizing?self.hiddenContainer.outerHeight():self.hiddenContainer.height(),self.container.css("overflow","hidden"),self.hasCounter&&self._parentInput.maxLength.countContainer.removeClass("shifted"),height>self.options.expandMax?(height=self.options.expandMax,self.container.css("overflow","auto"),self.hasCounter&&self._parentInput.maxLength.countContainer.addClass("shifted")):height<self.options.expandMin&&(height=self.options.expandMin),self.container.css("height",height+"px")},1)},CsComponentsResizableTextarea.prototype.setHiddenContainerWidth=function(){"border-box"==this.boxSizing?this.hiddenContainer.width(this.container.outerWidth()):this.hiddenContainer.width(this.container.width())},CsComponentsResizableTextarea.prototype.watchHiddenParents=function(){var self=this,watchedResizableTextareas=this._parent._parent.watchedResizableTextareas;this.container.parents().filter(function(){if("none"==$(this).css("display")){var watchId=Math.floor(100000001*Math.random());if("string"!=typeof $(this).attr("id")||""==$(this).attr("id"))var watchedElemId="csWatchedElem"+watchId;else var watchedElemId=$(this).attr("id");watchedResizableTextareas.hasOwnProperty(watchedElemId)||(watchedResizableTextareas[watchedElemId]=[]),watchedResizableTextareas[watchedElemId].push(self),$(this).watch({properties:"display",interval:2e4,id:"displayWatcher"+watchId,watchChildren:!1,callback:function(data,i){var affectedTextareas=watchedResizableTextareas[watchedElemId];for(var i in affectedTextareas)affectedTextareas[i].resizeTextarea()}})}})},CsComponentsSortable.prototype.onElementClick=function(e){var sort=e.target.id;sort=sort.replace("sort_",""),document.location.href=this.site_url+"accelerators?order="+sort},CsComponentsButton.prototype.changeIcon=function(url,top,left){url&&(this.options.iconUrl=url),this.options.iconLeft=-1*left||0,this.options.iconTop=-1*top||0,this.captionIconContainer.css("background-image","url("+this.options.iconUrl+")"),this.captionIconContainer.css("background-position",this.options.iconLeft+"px "+this.options.iconTop+"px")},CsComponentsButton.prototype.changeIconTemporary=function(url,top,left){url&&this.captionIconContainer.css("background-image","url("+url+")"),this.captionIconContainer.css("background-position",left+"px "+top+"px")},CsComponentsButton.prototype.showLoader=function(){this.options.loaderUrl&&(this.loading=!0,this.captionTextContainer.css("visibility","hidden"),this.captionIconContainer&&this.captionIconContainer.css("visibility","hidden"),this.loaderContainer.show())},CsComponentsButton.prototype.disable=function(){this.container.addClass("cs-button-disabled"),this.options.dark&&this.container.addClass("cs-button-dark-disabled"),this.options.customClassName&&this.container.addClass(this.options.customClassName+"-disabled"),this.options.disabled=!0},CsComponentsButton.prototype.enable=function(){this.container.removeClass("cs-button-disabled"),this.options.dark&&this.container.removeClass("cs-button-dark-disabled"),this.options.customClassName&&this.container.removeClass(this.options.customClassName+"-disabled"),this.options.disabled=!1},CsComponentsButton.prototype.hideLoader=function(){this.options.loaderUrl&&(this.loading=!1,this.captionTextContainer.css("visibility","visible"),this.captionIconContainer&&this.captionIconContainer.css("visibility","visible"),this.loaderContainer.hide())},CsComponentsButton.prototype.setTitle=function(title){title&&this.captionTextContainer.text(title)},CsComponentsButton.prototype.getTitle=function(){return this.captionTextContainer.text()},CsComponentsButton.prototype.hide=function(){this.container.hide()},CsComponentsButton.prototype.show=function(){this.container.show()},CsComponentsButton.prototype.click=function(){this.container.trigger("click")},CsComponentsNotificator.prototype.checkNotifications=function(){var self=this;$.get(this.options.checkUrl,function(response){response&&response.count&&response.count>0&&(self.newNotificationsCount=response.count,self.updateCaption()),setTimeout(function(){self.checkNotifications()},self.options.period)},"json")},CsComponentsNotificator.prototype.updateCaption=function(){this.newNotificationsCount>0?this.container.addClass("cs-notificator-alert"):this.container.hasClass("cs-notificator-alert")&&this.container.removeClass("cs-notificator-alert"),this.captionTextContainer.text(this.newNotificationsCount)},CsComponentsNotificator.prototype.setAllOld=function(){var self=this;$.get(this.options.setOldUrl,function(response){response&&"ok"==response.status&&(self.newNotificationsCount=0,self.updateCaption())},"json")},CsComponentsNotificator.prototype.showNotifications=function(page){page||(page=1),this.tip.show({url:this.options.notificationsUrl+"?page="+page,tipPosition:"top-center",targetPosition:"bottom-center",width:370,horizontalShift:-36,arrowHorizontalShift:36})},CsComponentsNotificator.prototype.showNotificationsList=function(page){page||(page=1),this.tip.show({url:this.options.notificationsListUrl+"?page="+page,tipPosition:"top-center",targetPosition:"bottom-center",width:370,horizontalShift:-36,arrowHorizontalShift:36})},CsComponentsDater.prototype.getDate=function(format){var date=this.daterWrapperField.datepicker("getDate");return format&&(date=$.datepicker.formatDate(format,date)),"false"!=this.daterWrapperField.val()?date:""},CsComponentsDater.prototype.empty=function(){this.daterWrapper.addClass("grey-text"),this.daterWrapper.text(this.options.emptyDateText),this.timerWrapper.text(this.options.emptyTimeText),this.options.date=!1,this.options.time=!1,this.daterWrapperField.val(""),this.timerWrapperField.val("")},CsComponentsDater.prototype.setDate=function(date,time){return date?(date&&this.daterWrapper.text(date),void(time&&this.timerWrapper.text(time))):!1},CsComponentsDater.prototype.setValue=function(date){this.daterWrapperField.attr("value",date),this.setDate($.datepicker.formatDate(this.options.defaultDateFormat,this.daterWrapperField.datepicker("getDate")))},CsComponentsDater.prototype.getValue=function(){if(this.daterWrapper.text()==this.options.emptyDateText)return null;var value=this.daterWrapper.text();if(this.timerWrapper){if(this.timerWrapper.text()==this.options.emptyTimeText)return null;value+=" "+this.timerWrapper.text()}return value},CsComponentsDater.prototype.getTime=function(){return this.timerWrapper&&this.timerWrapper.text()!=this.options.emptyTimeText?this.timerWrapper.text():null},CsComponentsDater.prototype.setTime=function(time){this.timerWrapper&&this.timerWrapper.text(time)},CsComponentsDater.prototype.disable=function(){this.disabled=!0},CsComponentsDater.prototype.enable=function(){this.disabled=!1},CsComponentsDater.prototype.daterOnClick=function(idName,containerId){if(!this.disabled){var daterComponent=this,elem=this.daterWrapperField;elem.datepicker("show"),elem.unbind("change").bind("change",function(){var data=elem.val();daterComponent.options.updateDefault&&(elem.attr("value",data),data=$.datepicker.formatDate(daterComponent.options.defaultDateFormat,elem.datepicker("getDate")));var dater_wrapper=$("#"+containerId+" span.dater-wrapper");dater_wrapper.length&&dater_wrapper.text(data),daterComponent.onUserChange()}),this.onUserClick()}},CsComponentsDater.prototype.timerOnClick=function(idName,containerId){if(!this.disabled){var daterComponent=this,elem=$("#"+idName+"-timer");elem.timepicker("show"),elem.unbind("change").bind("change",function(){var data=elem.val(),timer_wrapper=$("#"+containerId+" span.timer-wrapper");timer_wrapper.length&&timer_wrapper.text(data),$.timepicker._hideTimepicker(),daterComponent.onUserChange()}),this.onUserClick()}},CsComponentsRadio.prototype.defaultOnClick=function(){if(this.options.disabled)return!0;var initial_state=this.container.hasClass("cs-radio-checked");this.check(),this.onUserClick(initial_state)},CsComponentsRadio.prototype.getValue=function(){return this.checkboxContainer.val()},CsComponentsRadio.prototype.triggerClick=function(){this.defaultOnClick()},CsComponentsRadio.prototype.check=function(e){if(this._parent._parent.radios[this.idName])for(var i in this._parent._parent.radios[this.idName])this._parent._parent.radios[this.idName][i].uncheck();this.container.addClass("cs-radio-checked"),this.checkboxContainer&&this.checkboxContainer.prop("checked",!0),this.checked=!0},CsComponentsRadio.prototype.uncheck=function(e){this.checked=!1,this.container.removeClass("cs-radio-checked"),this.checkboxContainer&&this.checkboxContainer.prop("checked",!1)},CsComponentsRadio.prototype.isChecked=function(){return this.checked},CsComponentsCheckbox.prototype.defaultOnClick=function(e){return this.disabled?!1:(this.checked?this.uncheck():this.check(),void this.onUserClick(e))},CsComponentsCheckbox.prototype.isChecked=function(){return this.checked},CsComponentsCheckbox.prototype.getValue=function(forceReturn){return this.value?this.isChecked()?this.value:"boolean"==typeof forceReturn&&1==forceReturn?this.value:"":""},CsComponentsCheckbox.prototype.triggerClick=function(){this.defaultOnClick()},CsComponentsCheckbox.prototype.check=function(e){this.checked=!0,this.container.addClass("cs-checkbox-checked"),this.checkboxContainer&&this.checkboxContainer.prop("checked",!0),this.onUserCheck()},CsComponentsCheckbox.prototype.uncheck=function(e){this.checked=!1,this.container.removeClass("cs-checkbox-checked"),this.checkboxContainer&&this.checkboxContainer.prop("checked",!1),this.onUserCheck()},CsComponentsCheckbox.prototype.disable=function(){this.disabled=!0,this.container.attr("disabled",!0),this.container.addClass("cs-checkbox-disabled")},CsComponentsCheckbox.prototype.enable=function(){this.disabled=!1,this.container.attr("disabled",!1),this.container.removeClass("cs-checkbox-disabled")},CsSwitcher.prototype.switchSelection=function(){this.list[parseInt(parseInt(this.selectedIndex)+1)]?this.selectedIndex=parseInt(parseInt(this.selectedIndex)+1):this.selectedIndex=0,this.inputContainer&&this.inputContainer.val(this.list[this.selectedIndex].value),this.onChange&&this.onChange(this.list[this.selectedIndex].value),this.options.cssSwitch?this.updateClass():this.updateCaption()},CsSwitcher.prototype.updateCaption=function(){this.captionContainer.text(this.list[this.selectedIndex].text)},CsSwitcher.prototype.updateClass=function(){for(var i in this.list)this.container.removeClass(this.list[i].css);this.container.addClass(this.list[this.selectedIndex].css)},CsSwitcher.prototype.getValue=function(){return this.list[this.selectedIndex].value},CsSwitcher.prototype.enable=function(){return this.options.enabled=!0,this.options.disabled=!1,this.container.removeClass("disabled"),!0},CsSwitcher.prototype.disable=function(){return this.options.enabled=!1,this.options.disabled=!0,this.container.addClass("disabled"),!0},CsSwitcher2.prototype.switchSelection=function(){this.list[parseInt(parseInt(this.selectedIndex)+1)]?this.selectedIndex=parseInt(parseInt(this.selectedIndex)+1):this.selectedIndex=0,this.inputContainer&&this.inputContainer.val(this.list[this.selectedIndex].value),this.onChange&&this.onChange(this.list[this.selectedIndex].value),this.options.cssSwitch?this.updateClass():this.updateCaption()},CsSwitcher2.prototype.updateCaption=function(){if(this.showAllItems)for(var i in this.list)this.list[i].selected,this.elementContainer=$("<span/>",{"class":"switcher-element",text:this.list[i].text}).prependTo(this.captionContainer);else this.captionContainer.text(this.list[this.selectedIndex].text)},CsSwitcher2.prototype.updateClass=function(){for(var i in this.list)this.container.removeClass(this.list[i].css);this.container.addClass(this.list[this.selectedIndex].css)},CsSwitcher2.prototype.getValue=function(){return this.list[this.selectedIndex].value},CsSwitcher2.prototype.enable=function(){return this.options.enabled=!0,this.container.removeClass("disabled"),!0},CsSwitcher2.prototype.disable=function(){return this.options.enabled=!1,this.container.addClass("disabled"),!0},CsComponentsDropdown.prototype.preselectElement=function(num){this.preselectedIndex=num;for(var i in this.listContainer.elements)this.listContainer.elements[i].removeClass("hover");num!==!1&&this.listContainer.elements[this.preselectedIndex].addClass("hover")},CsComponentsDropdown.prototype.clearSearchContainer=function(){this.searchContainer&&this.searchContainer.val("")},CsComponentsDropdown.prototype.onElementClick=function(e,i){var old_index=this.selectedIndex;return this.selectedIndex=i,this.list[this.selectedIndex].href?void(location.href=this.list[this.selectedIndex].href):(this.list[this.selectedIndex].onClick&&(this.onElementClickTemp=this.list[this.selectedIndex].onClick,this.onElementClickTemp(this.list[this.selectedIndex])),this.valueContainer&&this.valueContainer.val(this.list[this.selectedIndex].value),this.isOpened=!1,this.container.removeClass(this.options.openedClassName),this.options.splitButton&&this.container.removeClass(this.options.openedSplitClassName),this.options.small&&this.container.removeClass(this.options.openedSmallClassName),this.captionIconContainer&&this.captionIconContainer.css("background-position",this.options.iconLeft+"px "+this.options.iconTop+"px"),this.updateCaption(),old_index!=i&&this.onChange(this.list[this.selectedIndex]),void this.onSelect(this.list[this.selectedIndex]))},CsComponentsDropdown.prototype.setDropItemText=function(i,text){return this.list[i]?(this.list[i].text=text,void this.listContainer.elements[i].textContainer.text(text)):!1},CsComponentsDropdown.prototype.setDropItemRightText=function(i,text){return this.list[i]&&this.options.rightTexts?(this.list[i].rightText=text,void this.listContainer.elements[i].textRightContainer.text(text)):!1},CsComponentsDropdown.prototype.onListItemMouseOver=function(i){this.listItemMouseOverTemp=this.list[i].onMouseOver,this.listItemMouseOverTemp(this.list[i],i)},CsComponentsDropdown.prototype.onListItemMouseOut=function(i){this.onListItemMouseOutTemp=this.list[i].onMouseOut,this.onListItemMouseOutTemp(this.list[i],i)},CsComponentsDropdown.prototype.getValue=function(){return this.list[this.selectedIndex].value},CsComponentsDropdown.prototype.getIndexByValue=function(value){if("undefined"==typeof value)return!1;for(var j in this.list)if(this.list[j].value==value)return j;return!1},CsComponentsDropdown.prototype.getText=function(){return this.list[this.selectedIndex].text},CsComponentsDropdown.prototype.selectOption=function(i){this.selectedIndex=i,this.valueContainer&&this.valueContainer.val(this.list[this.selectedIndex].value),this.isOpened=!1,this.container.removeClass(this.options.openedClassName),this.options.splitButton&&this.container.removeClass(this.options.openedSplitClassName),this.options.small&&this.container.removeClass(this.options.openedSmallClassName),this.updateCaption()},CsComponentsDropdown.prototype.onWindowObjectClick=function(e){if(this.isOpened){var close_drop=!0;if(e.target.id==this.id)return void(close_drop=!1);var el_id2=$(e.target).parents("#"+this.id).attr("id");if(el_id2)return void(close_drop=!1);close_drop&&this.onBlur(e)}},CsComponentsDropdown.prototype.onBlur=function(e){this.isOpened=!1,this.isFocused=!1,this.isClicked=!1,this.container.removeClass(this.options.openedClassName),this.options.splitButton&&this.container.removeClass(this.options.openedSplitClassName),this.options.small&&this.container.removeClass(this.options.openedSmallClassName),this.captionIconContainer&&!this.options.refreshOnDropdown&&this.captionIconContainer.css("background-position",this.options.iconLeft+"px "+this.options.iconTop+"px"),
("undefined"!=typeof this.list[this.selectedIndex].iconSelectedLeft||"undefined"!=typeof this.list[this.selectedIndex].iconSelectedTop)&&this.captionIconContainer.css("background-position",eval(-1*("undefined"!=typeof this.list[this.selectedIndex].iconSelectedLeft?this.list[this.selectedIndex].iconSelectedLeft:this.list[this.selectedIndex].iconLeft))+"px "+eval(-1*("undefined"!=typeof this.list[this.selectedIndex].iconSelectedTop?this.list[this.selectedIndex].iconSelectedTop:this.list[this.selectedIndex].iconTop))+"px"),this.options.onBlur.call(e,this)},CsComponentsDropdown.prototype.onDropdownClick=function(e){if(this.options.disabled)return!1;if(this.isOpened)this.container.removeClass(this.options.openedClassName),this.options.splitButton&&this.container.removeClass(this.options.openedSplitClassName),this.options.small&&this.container.removeClass(this.options.openedSmallClassName),this.captionIconContainer&&this.captionIconContainer.css("background-position",this.options.iconLeft+"px "+this.options.iconTop+"px"),this.isOpened=!1,this.isFocused||this.searchContainer.focus(),this.options.titleStay||this.updateCaption();else{if(this.container.addClass(this.options.openedClassName),this.options.splitButton&&this.container.addClass(this.options.openedSplitClassName),this.options.small&&this.container.addClass(this.options.openedSmallClassName),this.captionIconContainer&&!this.options.refreshOnDropdown&&this.captionIconContainer.css("background-position",this.options.iconHoverLeft+"px "+this.options.iconHoverTop+"px"),this.isOpened=!0,this.isFocused||this.searchContainer.focus(),!this.options.noSelectable){for(var i in this.listContainer.elements)this.listContainer.elements[i].removeClass("selected");this.listContainer.elements[this.selectedIndex].addClass("selected")}var contWidth=this.container.width(),dropWidth=this.hiddenContainer.width();if(contWidth>dropWidth&&this.hiddenContainer.width(contWidth),this.options.scrollToSelected&&this.options.maxDropHeight){this.hiddenContainer.scrollTop(0);var topPosition=this.listContainer.elements[parseInt(this.selectedIndex)].position().top;this.hiddenContainer.scrollTop(topPosition)}if(this.options.dropUp){this.hiddenContainer.removeClass("top");var winBottom=$(window).scrollTop()+$(window).height(),eleBottom=this.hiddenContainer.offset().top+this.hiddenContainer.height(),compareBottom=this.options.dropRelativeTo?this.options.dropRelativeTo.offset().top+this.options.dropRelativeTo.height():winBottom;eleBottom>compareBottom&&this.hiddenContainer.addClass("top")}}},CsComponentsDropdown.prototype.setCustomTitle=function(text){this.options.cropTitle&&text.length>this.options.cropTitle?this.captionTitleContainer.text(text.substr(0,this.options.cropTitle)+"..."):this.captionTitleContainer.text(text)},CsComponentsDropdown.prototype.updateCaption=function(){this.options.titleStay||(this.setCustomTitle(this.list[this.selectedIndex].text),this.options.useIcons?this.captionIconContainer&&(this.captionIconContainer.css("background-image","url("+this.list[this.selectedIndex].iconUrl+")"),this.captionIconContainer.css("background-position",eval(-1*("undefined"!=typeof this.list[this.selectedIndex].iconSelectedLeft?this.list[this.selectedIndex].iconSelectedLeft:this.list[this.selectedIndex].iconLeft))+"px "+eval(-1*("undefined"!=typeof this.list[this.selectedIndex].iconSelectedTop?this.list[this.selectedIndex].iconSelectedTop:this.list[this.selectedIndex].iconTop))+"px")):this.options.iconUrl&&this.captionIconContainer&&(this.options.iconUrl&&this.captionIconContainer.css("background-image","url("+this.options.iconUrl+")"),this.captionIconContainer.css("background-position",this.options.iconLeft+"px "+this.options.iconTop+"px")))},CsComponentsDropdown.prototype.changeIconTemporary=function(url,top,left){this.captionIconContainer&&(url&&this.captionIconContainer.css("background-image","url("+url+")"),this.captionIconContainer.css("background-position",left+"px "+top+"px"))},CsComponentsDropdown.prototype.disable=function(){this.container.addClass("cs-dropdown-disabled"),this.options.disabled=!0},CsComponentsDropdown.prototype.enable=function(){this.container.removeClass("cs-dropdown-disabled"),this.options.disabled=!1},CsComponentsPopup.prototype.onWindowScroll=function(e){if(this.options.autoPosition&&$(window).width()>599&&this.container){var self=this;this.scrollTimeout&&(clearTimeout(this.scrollTimeout),this.scrollTimeout=!1),this.scrollTimeout=setTimeout(function(){self.windowContainer.hide(0,function(){var scrollTop=$(window).scrollTop(),topPosition=parseInt(parseInt(eval(scrollTop))+parseInt(eval(self.options.topPosition)));self.container.css("top",topPosition+"px"),self.windowContainer.fadeIn(300)})},100)}},CsComponentsPopup.prototype.onWindowObjectClick=function(e){if(this.closeOnBlur&&this.container){var close_drop=!0;if("csPopupContainer"==e.target.id)return void(close_drop=!1);var el_id2=$(e.target).parents("#csPopupContainer").attr("id");if(el_id2)return void(close_drop=!1);close_drop&&this.close()}},CsComponentsPopup.prototype.secondsSincePopupOpened=function(href,options){var lastPopupOpened=this._parent._parent.window().getCookie("last-time-any-popup-opened");if(!lastPopupOpened)return 999999999999999;var lastOpenedDate=new Date(lastPopupOpened),nowDate=new Date,difference=nowDate.getTime()-lastOpenedDate.getTime();return difference?Math.floor(difference/1e3):void 0},CsComponentsPopup.prototype.display=function(href,options){var now=new Date;document.cookie="last-time-any-popup-opened="+now.toUTCString()+";path=/",this.container&&this.destroy(),this.scrollTimeout=!1,options||(options={}),this.options=jQuery.extend({},this.defaultOptions);for(var i in options)this.options[i]=options[i];this.options.closeOnBlur||(this.options.closeOnBlur=!1),this.options.onTop||(this.options.onTop=!1),this.options.html||(this.options.html=!1),this.options.autoPosition||(this.options.autoPosition=!1),this.closeOnBlur=!1;var self=this;this.options.closeOnBlur&&setTimeout(function(){self.closeOnBlur=!0},5);var scrollTop=$(window).scrollTop(),topPosition=parseInt(parseInt(eval(scrollTop))+parseInt(eval(this.options.topPosition)));if(this.container=$("<div/>",{"class":"cs-popup",id:"csPopupContainer"}).appendTo(document.body).css("top",topPosition+"px"),(this.options.onTop||!this.options.onTop)&&(this.documentShadowContainer=$("<div/>",{"class":"popup-document-shadow t60"}).appendTo(this.container)),this.windowContainer=$("<div/>",{"class":"popup-window"}).css("width",this.options.width).appendTo(this.container),this.options.fitText&&this.options.fitText&&(this.windowContainer.css("width","auto"),this.windowContainer.css("max-width","70%"),this.windowContainer.css("display","inline-block"),this.container.css("text-align","center")),this.shadowContainer=$("<div/>",{"class":"popup-shadow t60 r"}).appendTo(this.windowContainer),this.windowInsideContainer=$("<div/>",{"class":"popup-window-inside r3"}).appendTo(this.windowContainer),this.options.div)"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","Popup openings",href,"div"]),this.loadDiv(href);else if(this.options.html)"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","Popup openings",href,"html"]),this.loadHtml(href);else{if("undefined"!=typeof _gaq){var el=document.createElement("a");el.href=href;var string=el.pathname.replace(/\-/g,"_");string=string.replace(/[0-9]+/g,""),string=string.replace(/^\/|\/$/g,""),first_word=("/"+string).replace(/^\/([^\/]*).*$/,"$1"),-1==["account","profile","main"].indexOf(first_word)&&(string=string.replace(/^\/([^\/]*).*$/,""),string=string.replace(first_word+"/","profile//")),_gaq.push(["_trackEvent","Popup openings",string,"ajax"])}this.showLoader(),this.loadUrl(href)}},CsComponentsPopup.prototype.resize=function(width,height){this.options.width=width,this.windowContainer.css("width",this.options.width),this.options.height=height,this.windowContainer.css("height",this.options.height)},CsComponentsPopup.prototype.closeOnEscape=function(e){this.options.hideCross||27==e.keyCode&&this.close()},CsComponentsPopup.prototype.loadUrl=function(url){var self=this;"post"==this.options.requestMethod?$.post(url,this.options.postObject,function(response){self.urlResponse(response,!0)}):$.get(url,function(response){self.urlResponse(response,!0)})},CsComponentsPopup.prototype.loadDiv=function(divId){var self=this;if($("#"+divId).attr("id")){var div_val=$("#"+divId).html();self.urlResponse(div_val)}},CsComponentsPopup.prototype.loadHtml=function(html){var self=this;html&&self.urlResponse(html)},CsComponentsPopup.prototype.showProcessText=function(text){this.contentContainer&&this.contentContainer.hide(),this.processContainer&&this.processContainer.remove(),this.processContainer=$("<div/>",{"class":"popup-process"}).appendTo(this.windowInsideContainer),this.processContainer.text(text)},CsComponentsPopup.prototype.hideProcessText=function(){this.contentContainer&&this.contentContainer.show(),this.processContainer&&this.processContainer.remove()},CsComponentsPopup.prototype.showTempContent=function(html){this.contentContainer&&this.contentContainer.hide(),this.tempConteiner&&this.tempConteiner.remove(),this.tempConteiner=$("<div/>",{"class":"popup-content"}).appendTo(this.windowInsideContainer),this.tempConteiner.append(html)},CsComponentsPopup.prototype.hideTempContent=function(){this.contentContainer&&this.contentContainer.show(),this.tempConteiner&&this.tempConteiner.remove()},CsComponentsPopup.prototype.showLoader=function(url){this.loaderProperties={container:{textalign:this.container.css("text-align")},windowContainer:{display:this.windowContainer.css("display")},windowInsideContainer:{height:0!=parseInt(this.windowInsideContainer.css("height"))?this.windowInsideContainer.css("height"):"",hasFlexWrapper:this.windowInsideContainer.hasClass("flex-wrapper"),hasCentered:this.windowInsideContainer.hasClass("centered-items"),hasAlignCenter:this.windowInsideContainer.hasClass("align-center")}},this.windowContainer.css("width","215px"),this.windowInsideContainer.css("height","100px"),this.windowContainer.css("display","inline-block"),this.container.css("text-align","center"),this.windowInsideContainer.hasClass("flex-wrapper")||this.windowInsideContainer.addClass("flex-wrapper"),this.windowInsideContainer.hasClass("centered-items")||this.windowInsideContainer.addClass("centered-items"),this.windowInsideContainer.hasClass("align-center")||this.windowInsideContainer.addClass("align-center"),this.loaderContainer=$("<div/>",{"class":"popup-loader"}).appendTo(this.windowInsideContainer),this.loaderContainer.text(cs.txt("js popup window : loading"))},CsComponentsPopup.prototype.restoreLoaderProperties=function(windowContainer,restoreContainer){"undefined"==restoreContainer&&(restoreContainer=!0);var windowInsideContainerSelector="."+this.windowInsideContainer.attr("class").split(" ").join("."),windowInsideContainer=windowContainer.find(windowInsideContainerSelector);restoreContainer&&this.container.css("text-align",this.loaderProperties.container.textalign),windowContainer.css("width",this.options.width),windowContainer.css("display",this.loaderProperties.windowContainer.display),windowInsideContainer.css("height",this.loaderProperties.windowInsideContainer.height),this.loaderProperties.windowInsideContainer.hasFlexWrapper||windowInsideContainer.removeClass("flex-wrapper"),this.loaderProperties.windowInsideContainer.hasCentered||windowInsideContainer.removeClass("centered-items"),this.loaderProperties.windowInsideContainer.hasAlignCenter||windowInsideContainer.removeClass("align-center")},CsComponentsPopup.prototype.hideLoader=function(url){this.restoreLoaderProperties(this.windowContainer,!0),this.loaderContainer&&this.loaderContainer.remove()},CsComponentsPopup.prototype.urlResponse=function(response,ajax){"undefined"==typeof ajax&&(ajax=!1);try{var result=jQuery.parseJSON(response);if(null!=result&&"undefined"!=typeof result.status&&"err"==result.status)return this.close(),!1}catch(err){}if(this.options.div||this.options.html)this.constructContent(response,ajax);else{var self=this;setTimeout(function(){self.constructContent(response,ajax)},100)}},CsComponentsPopup.prototype.getContentSize=function(){var clone=this.windowContainer.clone().appendTo(this.container);this.restoreLoaderProperties(clone,!1),clone.css("width",this.options.width);var loaderContainerSelector="."+this.loaderContainer.attr("class").split(" ").join(".");clone.find(loaderContainerSelector).remove();var contentSelector="."+this.contentContainer.attr("class").split(" ").join(".");clone.find(contentSelector).show();var ret={width:clone.width(),height:clone.height()};return clone.remove(),ret},CsComponentsPopup.prototype.constructContent=function(data,ajax){var self=this;if("undefined"==typeof ajax&&(ajax=!1),this.contentContainer&&this.contentContainer.remove(),this.contentContainer=$("<div/>",{"class":"popup-content"}).appendTo(this.windowInsideContainer).hide(),this.contentContainer.html(data),ajax){if(""!=$.trim(data)){var loaderSize={width:this.windowInsideContainer.width(),height:this.windowInsideContainer.height()},contentSize=this.getContentSize();if(contentSize.width>loaderSize.width&&contentSize.height>loaderSize.height){this.loaderContainer.text("");var duration=200;return this.windowInsideContainer.animate({height:contentSize.height},duration),this.windowContainer.animate({width:contentSize.width},duration,function(){self.hideLoader(),self.contentContainer.show()}),!0}}this.hideLoader()}this.contentContainer.show()},CsComponentsPopup.prototype.close=function(callback){var self=this;this.container&&this.container.fadeOut("fast",function(e){self.destroy(),callback&&callback(),self.options.onClose()})},CsComponentsPopup.prototype.isOpened=function(){return this.container&&"block"==this.container.css("display")?!0:!1},CsComponentsPopup.prototype.destroy=function(){this.container.remove()},CsComponentsPopup.prototype.showError=function(error,options){if("undefined"==typeof options)var options={};"undefined"!=typeof options.color?options.color=options.color:options.color="cc1100",this.container.find("div.error").css("display","block").html(unescape(error)).css("color",options.color)},CsComponentsPopup.prototype.hideError=function(error){this.container.find("div.error").css("display","none")},$.GrowingInput=function(element,options){var value,lastValue,calc;options=$.extend({min:0,max:null,startWidth:0,correction:15},options);var element=$(element).data("growing",this),self=this,init=function(){calc=$("<span></span>").css({"float":"left",display:"inline-block",position:"absolute",left:-2e3}).insertAfter(element),setTimeout(function(){$.each(["font-size","font-family","padding-left","padding-top","padding-bottom","padding-right","border-left","border-right","border-top","border-bottom","word-spacing","letter-spacing","text-indent","text-transform"],function(i,p){calc.css(p,element.css(p))})},200),element.blur(resize).keyup(resize).keydown(resize).keypress(resize),resize()},calculate=function(chars){calc.text(chars);var width=calc.width();return(width?width:options.startWidth)+options.correction},resize=function(){lastValue=value,value=element.val();var retValue=value;if(chk(options.min)&&value.length<options.min){if(chk(lastValue)&&lastValue.length<=options.min)return;retValue=str_pad(value,options.min,"-")}else if(chk(options.max)&&value.length>options.max){if(chk(lastValue)&&lastValue.length>=options.max)return;retValue=value.substr(0,options.max)}return element.width(calculate(retValue)),self};this.resize=resize,init()};var chk=function(v){return!(!v&&0!==v)},str_repeat=function(str,times){return new Array(times+1).join(str)},str_pad=function(self,length,str,dir){if(self.length>=length)return this;str=str||" ";var pad=str_repeat(str,length-self.length).substr(0,length-self.length);return dir&&"right"!=dir?"left"==dir?pad+self:pad.substr(0,(pad.length/2).floor())+self+pad.substr(0,(pad.length/2).ceil()):self+pad};CsMessageAutocompleteBit=function(type,value,textboxlist,_options){var element,bit,prefix,typeprefix,close,hidden,focused=!1,name=capitalize(type),options=$.extend(!0,"box"==type?{deleteButton:!0,customClassName:!1}:{tabIndex:null,growing:!0,growingOptions:{},stopEnter:!0,addOnBlur:!1,addKeys:[13]},_options);this.type=type,this.value=value;var self=this;options.prefixStates=textboxlist.getOptions().prefixStates;var init=function(){prefix=textboxlist.getBitClass(),typeprefix=textboxlist.getBitTypeClass(type),bit=$("<li />").addClass(prefix).addClass(typeprefix).data("textboxlist:bit",self).hover(function(){options.prefixStates?bit.addClass(prefix+"-hover").addClass(typeprefix+"-hover"):bit.addClass("hover")},function(){options.prefixStates?bit.removeClass(prefix+"-hover").removeClass(typeprefix+"-hover"):bit.removeClass("hover")}),"box"==type?(textboxlist.getOptions().single?(bit.html(chk(self.value[2])?self.value[2]:self.value[1]).click(remove),bit.click(function(e){e.stopPropagation(),e.preventDefault()}),options.deleteButton&&(bit.addClass((options.prefixStates?typeprefix+"-":"")+"deletable"),1==textboxlist.getOptions().max&&bit.addClass((options.prefixStates?typeprefix+"-":"")+"single"),close=$('<a href="#" class="'+(options.prefixStates?typeprefix+"-":"")+'deletebutton" />').click(function(){remove(!0)}).appendTo(bit))):(bit.html(chk(self.value[2])?self.value[2]:self.value[1]).click(click),options.deleteButton&&(bit.addClass((options.prefixStates?typeprefix+"-":"")+"deletable"),1==textboxlist.getOptions().max&&bit.addClass((options.prefixStates?typeprefix+"-":"")+"single"),close=$('<a href="#" class="'+(options.prefixStates?typeprefix+"-":"")+'deletebutton" />').click(function(){remove(!0)}).appendTo(bit)),bit.children().click(function(e){e.stopPropagation(),e.preventDefault()})),"string"==typeof options.customClassName&&bit.addClass(options.customClassName)):(element=$('<input type="text" class="'+(options.prefixStates?typeprefix+"-":"")+'input" autocomplete="off" />').val(self.value?self.value[1]:"").appendTo(bit),chk(options.tabIndex)&&(element.tabIndex=options.tabIndex),options.growing&&new $.GrowingInput(element,options.growingOptions),element.focus(function(){focus(!0)}).blur(function(){blur(!0),options.addOnBlur&&toBox()}),element.keypress(function(ev){13!==ev.which&&fireBitEvent("keypress")}),element.bind("paste",function(e){setTimeout(function(){if(textboxlist.getOptions().splitOnPaste)for(var inputedElements=$(element).val().split(textboxlist.getOptions().splitOnPasteDelimiter),ind=0;ind<inputedElements.length;ind++)$(element).val(inputedElements[ind].trim()),toBox()},10)}),(options.addKeys||options.stopEnter)&&element.keydown(function(ev){if(focused){var evStop=function(){ev.stopPropagation(),ev.preventDefault()};options.stopEnter&&13===ev.which&&evStop(),-1!=$.inArray(ev.which,splat(options.addKeys))&&(evStop(),toBox())}}))},inject=function(el,where){switch(where||"bottom"){case"top":bit.prependTo(el);break;case"bottom":bit.appendTo(el);break;case"before":bit.insertBefore(el);break;case"after":bit.insertAfter(el)}return textboxlist.onAdd(self),fireBitEvent("add")},click=function(){fireBitEvent("click"),focus()},focus=function(noReal){return textboxlist.disabled?void 0:focused?self:(show(),focused=!0,textboxlist.onFocus(self),options.prefixStates?bit.addClass(prefix+"-focused").addClass(prefix+"-"+type+"-focused"):bit.addClass("focused"),fireBitEvent("focus"),"editable"!=type||noReal||element.focus(),self)},blur=function(noReal){return focused?(focused=!1,textboxlist.onBlur(self),options.prefixStates?bit.removeClass(prefix+"-focused").removeClass(prefix+"-"+type+"-focused"):bit.removeClass("focused"),fireBitEvent("blur"),"editable"==type&&(noReal||element.blur(),hidden&&!element.val().length&&hide(),textboxlist.getOptions().single&&self.setValue([null,null,null])),self):self},remove=function(fromRemoveButton){if(!textboxlist.getOptions().confirmRemove){var val=self.getValue();return textboxlist.onRemove(self,fromRemoveButton),bit.remove(),textboxlist.getOptions().single&&textboxlist.getLastEditableBit().setValue([val[2],val[1],null]),fireBitEvent("remove")}cs.components().confirm({text:"Do you want to permanently remove this Tag?",title:"Confirm",buttons:[{text:"Remove Tag",color:"green",onClick:function(){csPopup.close();var val=self.getValue();return textboxlist.onRemove(self,fromRemoveButton),bit.remove(),textboxlist.getOptions().single&&textboxlist.getLastEditableBit().setValue([val[2],val[1],null]),fireBitEvent("remove")}},{text:"Cancel",color:"grey",onClick:function(){csPopup.close()}}]})},show=function(){return bit.show(),self},hide=function(){return bit.hide(),hidden=!0,self},fireBitEvent=function(type){return type=capitalize(type),textboxlist.fireEvent("bit"+type,self).fireEvent("bit"+name+type,self),self};if(this.is=function(t){return type==t},this.setValue=function(v){return"editable"==type?(element.val(chk(v[0])?v[0]:v[1]),options.growing&&element.data("growing").resize()):value=v,self},this.getValue=function(){return"editable"==type?[null,element.val(),null]:value},"editable"==type){this.getCaret=function(){var el=element.get(0);return el.selectionStart},this.getCaretEnd=function(){var el=element.get(0);return el.selectionEnd},this.isSelected=function(){return focused&&self.getCaret()!==self.getCaretEnd()};var toBox=function(){var value=self.getValue();if(!value)return null;if(!value[0]&&!value[1]&&!value[2])return null;"string"==typeof value[1]&&(value[1]=textboxlist.replaceTags(value[1]));var b=textboxlist.create("box",value);return b?(b.inject(bit,"before"),self.setValue([null,"",null]),b):null};this.toBox=toBox}this.toElement=function(){return bit},this.focus=focus,this.blur=blur,this.remove=remove,this.inject=inject,this.show=show,this.hide=hide,this.click=click,this.fireBitEvent=fireBitEvent,init()};var chk=function(v){return!(!v&&0!==v)},splat=function(a){return $.isArray(a)?a:[a]},camelCase=function(str){return str.replace(/-\D/g,function(match){return match.charAt(1).toUpperCase()})},capitalize=function(str){return str.replace(/\b[a-z]/g,function(A){return A.toUpperCase()})};$.fn.extend({textboxlist:function(options){return this.each(function(){new CsMessageAutocomplete(this,options)})}}),CsMessageAutocomplete.Autocomplete=function(textboxlist,_options){var index,prefix,method,container,list,current,currentInput,hidetimer,doAdd,currentSearch,currentRequest,values=[],searchValues=[],placeholder=!1,options=$.extend(!0,{minLength:1,maxResults:10,delay:0,insensitive:!0,highlight:!0,highlightSelector:null,mouseInteraction:!0,nofilter:!1,onlyFromValues:!1,queryRemote:!1,confirmRemove:!1,width:!1,maxWidth:!1,remote:{url:"",param:"search",extraParams:{},loadPlaceholder:cs.txt("js popup window : please wait")},method:"standard",placeholder:cs.txt("js popup window : type to receive suggestions")},_options);options.prefixStates=textboxlist.getOptions().prefixStates;var init=function(){textboxlist.addEvent("bitEditableAdd",setupBit).addEvent("bitEditableFocus",search).addEvent("bitEditableBlur",hide).setOptions({bitsOptions:{editable:{addKeys:!1,stopEnter:!1}}}),prefix=textboxlist.getOptions().prefix+"-autocomplete",method=CsMessageAutocomplete.Autocomplete.Methods[options.method],container=$('<div class="'+prefix+'" />').appendTo(textboxlist.getContainer()),options.width?container.width(options.width?options.width:textboxlist.getContainer().width()):container.css("min-width",textboxlist.getContainer().outerWidth()+"px"),options.maxWidth&&container.css("max-width",options.maxWidth+"px"),"number"==typeof textboxlist.getOptions().maxDropHeight?container.css("max-height",textboxlist.getOptions().maxDropHeight+"px"):"number"==typeof options.maxDropHeight&&container.css("max-height",options.maxDropHeight+"px"),options.prefixStates||container.addClass(textboxlist.getOptions().prefix+"-suggestions"),chk(options.placeholder)&&(placeholder=$('<div class="'+(options.prefixStates?prefix+"-":"")+'placeholder" />').html(options.placeholder).appendTo(container)),list=$('<ul class="'+(options.prefixStates?prefix+"-":"")+'results" />').appendTo(container).click(function(ev){ev.stopPropagation(),ev.preventDefault()})},setupBit=function(bit){bit.toElement().keydown(navigate).keyup(function(){search()})},timeoutId=0,search=function(bit){if(container.css("top",textboxlist.getContainer().outerHeight()-2+"px"),container.css("min-width",textboxlist.getContainer().outerWidth()+"px"),bit&&(currentInput=bit),options.queryRemote||values.length){var search=$.trim(currentInput.getValue()[1]);if(search.length<options.minLength&&showPlaceholder(),search!=currentSearch&&(currentSearch=search,list.css("display","none"),!(search.length<options.minLength))){if(options.queryRemote)if(searchValues[search])values=searchValues[search];else{var data=options.remote.extraParams;data[options.remote.param]=search,clearTimeout(timeoutId),currentRequest&&currentRequest.abort(),timeoutId=setTimeout(function(){currentRequest=$.ajax({url:options.remote.url,data:data,dataType:"json",success:function(r){searchValues[search]=r,values=r,showResults(search)}})},options.delay)}showResults(search)}}},showResults=function(search){var results=method.filter(values,search,options.insensitive,options.maxResults,options.nofilter);if(textboxlist.getOptions().unique&&(results=$.grep(results,function(v){return-1==textboxlist.isDuplicate(v)})),hidePlaceholder(),!results.length&&options.onlyFromValues)return void(current=void 0);blur(),list.empty();var prevWidth=container.get(0).style.width;prevWidth="string"==typeof prevWidth&&-1!=prevWidth.indexOf("px")?parseInt(prevWidth.replace("px")):0,container.css("min-width","").css("width",""),list.css("display","block").css("width","").css("min-width",""),$.each(results,function(i,r){addResult(r,search)});var maxHeight=container.css("max-height");maxHeight="string"==typeof maxHeight&&-1!=maxHeight.indexOf("px")?parseInt(maxHeight.replace("px","")):0;var forceWidth=!1;maxHeight>0&&list.height()>maxHeight&&list.width()+20>textboxlist.getContainer().outerWidth()&&(forceWidth=list.width()+20),container.css("min-width",textboxlist.getContainer().outerWidth()+"px"),options.maxWidth||(forceWidth&&forceWidth>prevWidth?container.css("width",forceWidth+"px"):prevWidth&&container.css("width",prevWidth+"px")),options.onlyFromValues&&focusFirst(),results=results},addResult=function(r,searched){var element=$('<li class="'+(options.prefixStates?prefix+"-":"")+'result" />').html(r[3]?r[3]:r[1]).data("textboxlist:auto:value",r);element.appendTo(list),options.highlight&&$(options.highlightSelector?element.find(options.highlightSelector):element).each(function(){$(this).html()&&method.highlight($(this),searched,options.insensitive,(options.prefixStates?prefix+"-":"")+"highlight")}),options.mouseInteraction&&(element.css("cursor","pointer").hover(function(){focus(element)}).mousedown(function(ev){ev.stopPropagation(),ev.preventDefault(),clearTimeout(hidetimer),doAdd=!0}).mouseup(function(){doAdd&&(addCurrent(),currentInput.focus(),search(),doAdd=!1)}),options.onlyFromValues||element.mouseleave(function(){current&&current.get(0)==element.get(0)&&blur()}))},hide=function(){hidetimer=setTimeout(function(){hidePlaceholder(),list.css("display","none"),currentSearch=null},/msie/i.test(navigator.userAgent)?150:0)},showPlaceholder=function(){placeholder&&placeholder.css("display","block")},hidePlaceholder=function(){placeholder&&placeholder.css("display","none")},focus=function(element){element&&element.length&&(blur(),current=options.prefixStates?element.addClass(prefix+"-result-focus"):element.addClass("focused"))},blur=function(){current&&current.length&&(options.prefixStates?current.removeClass(prefix+"-result-focus"):current.removeClass("focused"),current=null)},focusFirst=function(){return focus(list.find(":first"))},focusRelative=function(dir){return current&&current.length?focus(current[dir]()):self},addCurrent=function(){var value=current.data("textboxlist:auto:value"),b=textboxlist.create("box",value.slice(0,3));return b&&(b.autoValue=value,$.isArray(index)&&index.push(value),currentInput.setValue([null,"",null]),b.inject(currentInput.toElement(),"before")),blur(),self},navigate=function(ev){var evStop=function(){ev.stopPropagation(),ev.preventDefault()};switch(ev.which){case 38:evStop(),!options.onlyFromValues&&current&&current.get(0)===list.find(":first").get(0)?blur():focusRelative("prev");break;case 40:evStop(),current&&current.length?focusRelative("next"):focusFirst();break;case 13:if(evStop(),current&&current.length)addCurrent();else if(!options.onlyFromValues){var value=currentInput.getValue();"string"==typeof value[1]&&(value[1]=textboxlist.replaceTags(value[1]));var b=textboxlist.create("box",value);b&&(b.inject(currentInput.toElement(),"before"),currentInput.setValue([null,"",null]))}}};this.setValues=function(v){values=v},this.searchValue=function(value){for(k=0;k<values.length;++k)if(values[k][0]==value)return values[k];return null},this.search=function(v){search(v)},this.hide=hide,this.getOption=function(path){if("string"!=typeof path||""==path)return!1;path=path.split("/");var result=$.extend({},options);for(var i in path){if(!result.hasOwnProperty(path[i]))return!1;if(result=result[path[i]],i==path.length-1)return result}},this.setOption=function(path,value){if("string"!=typeof path||""==path)return!1;path=path.split("/");do{var obj={},key=path.pop();obj[key]=value,value=obj}while(path.length>0);return options=$.extend(!0,options,obj),!0},this.getOptions=function(){return options},init()},CsMessageAutocomplete.Autocomplete.Methods={standard:{filter:function(values,search,insensitive,max,nofilter){for(var newvals=[],regexp=new RegExp("\\b"+escapeRegExp(search),insensitive?"i":""),i=0;i<values.length&&newvals.length!==max;i++)nofilter?newvals.push(values[i]):regexp.test(values[i][1])&&newvals.push(values[i]);return newvals},highlight:function(element,search,insensitive,klass){var regex=new RegExp("(<[^>]*>)|(\\b"+escapeRegExp(search)+")",insensitive?"ig":"g");return element.html(element.html().replace(regex,function(a,b,c){return"<"==a.charAt(0)?a:'<strong class="'+klass+'">'+c+"</strong>"}))}},nonstandard:{filter:function(values,search,insensitive,max,nofilter){var newvals=[],regexp=new RegExp("\\b"+escapeRegExp(search),insensitive?"i":""),groups_array=[];groups_array.tags=[],groups_array.persons=[];for(var i=0;i<values.length;i++)"tag"==values[i][0].substr(0,3)?groups_array.tags.length>=max:groups_array.persons.length>=max,nofilter?newvals.push(values[i]):regexp.test(values[i][1])&&(newvals.push(values[i]),"tag"==values[i][0].substr(0,3)?groups_array.tags.push(values[i]):groups_array.persons.push(values[i]));return newvals=newvals.sort(compareStrings)},highlight:function(element,search,insensitive,klass){var regex=new RegExp("(<[^>]*>)|(\\b"+escapeRegExp(search)+")",insensitive?"ig":"g");return element.html(element.html().replace(regex,function(a,b,c){return"<"==a.charAt(0)?a:'<strong class="'+klass+'">'+c+"</strong>"}))}},exactmatch:{filter:function(values,search,insensitive,max,nofilter){var newvals=[],regexp=new RegExp("\\b"+escapeRegExp(search),insensitive?"i":""),newvalues=[],groups_array=[];if(groups_array.tags=[],groups_array.persons=[],"undefined"==typeof values||null==values);else for(var i=0;i<values.length;i++)"tag"==values[i][0].substr(0,3)?groups_array.tags.length>=max:groups_array.persons.length>=max,nofilter?newvals.push(values[i]):regexp.test(values[i][1])&&(newvals.push(values[i]),"tag"==values[i][0].substr(0,3)?groups_array.tags.push(values[i]):groups_array.persons.push(values[i]));newvals=newvals.sort(compareStrings),n=1;for(var i=0;i<newvals.length&&(newvalues.push(newvals[i]),n!=max);i++)n++;return newvalues},highlight:function(element,search,insensitive,klass){var regex=new RegExp("(<[^>]*>)|(\\b"+escapeRegExp(search)+")",insensitive?"ig":"g");return element.html(element.html().replace(regex,function(a,b,c){return"<"==a.charAt(0)?a:'<strong class="'+klass+'">'+c+"</strong>"}))}}};var chk=function(v){return!(!v&&0!==v);
},escapeRegExp=function(str){return str.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")};CsMessageAutocomplete.Autocomplete.Methods.binary={filter:function(values,search,insensitive,max){var method=insensitive?"toLowerCase":"toString",low=0,high=values.length-1;for(search=search[method]();high>=low;){var mid=parseInt((low+high)/2),curr=values[mid][1].substr(0,search.length)[method](),result=search==curr?0:search>curr?1:-1;if(0>result)high=mid-1;else if(result>0)low=mid+1;else if(0===result)break}if(low>high)return[];for(var v1,v2,newvalues=[values[mid]],checkNext=!0,checkPrev=!0,i=1;i<=values.length-mid&&newvalues.length!==max&&(checkNext&&(v1=values[mid+i]?values[mid+i][1].substr(0,search.length)[method]():!1),checkPrev&&(v2=values[mid-i]?values[mid-i][1].substr(0,search.length)[method]():!1),checkNext=checkPrev=!1,v1===search&&(newvalues.push(values[mid+i]),checkNext=!0),v2===search&&(newvalues.unshift(values[mid-i]),checkPrev=!0),checkNext||checkPrev);i++);return newvalues},highlight:function(element,search,insensitive,klass){var regex=new RegExp("(<[^>]*>)|(\\b"+search.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")+")",insensitive?"ig":"g");return element.html(element.html().replace(regex,function(a,b,c,d){return"<"==a.charAt(0)?a:'<strong class="'+klass+'">'+c+"</strong>"}))}},CsComponentsThumb.prototype.cancel=function(){var self=this;this.post=this.options.post,this.post.unthumb=this.buttonClicked;var self=this;this.options.post;$.post(this.options.clearUrl,this.post,function(response){self.cancelCallback(response)},"json")},CsComponentsThumb.prototype.buttonClick=function(button){return this.buttonClicked==button?(this.setButtonNumber(button,-1),this.buttons[button].container.removeClass("selected"),this.buttonClicked=button,this.cancel(),this.buttonClicked=!1,void(this.decreaseOpposite=!1)):(this.buttonClicked!=button&&this.setButtonNumber(button,1),"up"==button?("down"==this.buttonClicked&&this.setButtonNumber("down",-1),this.buttons.up.container.addClass("selected"),this.buttons.down.container.removeClass("selected")):"down"==button&&("up"==this.buttonClicked&&this.setButtonNumber("up",-1),this.buttons.down.container.addClass("selected"),this.buttons.up.container.removeClass("selected")),this.buttonClicked&&(this.decreaseOpposite=!0),this.buttonClicked=button,void this.rate())},CsComponentsThumb.prototype.rate=function(){var self=this;this.post=this.options.post,this.post.thumb=this.buttonClicked,this.post.decrease_opposite=this.decreaseOpposite?1:0,this.onPost(),$.post(this.options.url,this.post,function(response){self.callback(response)},"json")},CsComponentsThumb.prototype.setButtonNumber=function(button,direction){"up"==button?(this.upClicks=parseInt(parseInt(this.upClicks)+parseInt(direction)),this.options.showClicks&&this.buttons[button].textContainer.text(this.upClicks)):"down"==button&&(this.downClicks=parseInt(parseInt(this.downClicks)+parseInt(direction)),this.options.showClicks&&this.buttons[button].textContainer.text(this.downClicks))},CsComponentsThumb.prototype.printContainer=function(){this.buttons.up.container=$("<span/>",{"class":"btn up r3l"}).appendTo(this.container),$("<span/>",{"class":"icn"}).appendTo(this.buttons.up.container),this.buttons.up.textContainer=$("<span/>",{"class":"txt",text:this.upClicks&&this.options.showClicks?this.upClicks:""}).appendTo(this.buttons.up.container),this.buttons.down.container=$("<span/>",{"class":"btn down r3r"}).appendTo(this.container),$("<span/>",{"class":"icn"}).appendTo(this.buttons.down.container),this.buttons.down.textContainer=$("<span/>",{"class":"txt",text:this.downClicks&&this.options.showClicks?this.downClicks:""}).appendTo(this.buttons.down.container)},CsComponents.prototype.respondRequest=function(){},CsComponentsRating.prototype.populate=function(id,value){$("#"+id).text(value)},CsComponentsRating.prototype.setRating=function(rate){this.options.rating=rate},CsComponentsRating.prototype.saveRating=function(){var self=this,post=this.options.post;post.rating=this.options.rating,$.post(this.options.url,post,function(response){response&&"ok"==response.status&&response.data&&self.options.recountContainer&&response.data.avg_rating&&self.options.recountContainer.html(response.data.avg_rating)},"json")},CsComponentsRating.prototype.clearRating=function(){var self=this,post=this.options.post;$.post(this.options.clearUrl,post,function(response){response&&"ok"==response.status&&response.data&&self.options.recountContainer&&response.data.avg_rating&&self.options.recountContainer.html(response.data.avg_rating)},"json")},CsComponentsRating.prototype.printStars=function(options){var settings={increment:1,maxvalue:5,curvalue:0};options&&jQuery.extend(settings,options),jQuery.extend(settings,{cancel:settings.maxvalue>1?!0:!1}),jQuery.extend(this.container,{averageRating:settings.curvalue}),settings.increment=settings.increment<.75?.5:1;for(var s=0,i=0;i<=settings.maxvalue;i++){if(0==i)1==settings.cancel;else{var $div=$('<div class="star"></div>').append('<a rel="#'+i+'" href="javascript:void(0);" title="Give it '+i+"/"+settings.maxvalue+'">'+i+"</a>").appendTo(this.container);.5==settings.increment&&(s%2?$div.addClass("star-left"):$div.addClass("star-right"))}i=i-1+settings.increment,s++}var stars=this.container.children(".star"),cancel=this.container.children(".cancel");stars.mouseover(function(){event.drain(),event.fill(this)}).mouseout(function(){event.drain(),event.reset()}).focus(function(){event.drain(),event.fill(this)}).blur(function(){event.drain(),event.reset()});var self=this;stars.click(function(){return 1==settings.cancel?(settings.curvalue=stars.index(this)*settings.increment+settings.increment,self.setRating(jQuery(this).children("a").attr("rel").split("#")[1]),self.saveRating(),!1):1==settings.maxvalue?(settings.curvalue=0==settings.curvalue?1:0,$(this).toggleClass("on"),self.setRating(jQuery(this).children("a").attr("rel").split("#")[1]),self.saveRating(),!1):!0}),cancel&&(cancel.mouseover(function(){event.drain(),jQuery(this).addClass("on")}).mouseout(function(){event.reset(),jQuery(this).removeClass("on")}).focus(function(){event.drain(),jQuery(this).addClass("on")}).blur(function(){event.reset(),jQuery(this).removeClass("on")}),cancel.click(function(){return event.drain(),settings.curvalue=0,self.clearRating(),!1}));var event={fill:function(el){var index=stars.index(el)+1;stars.children("a").css("width","100%").end().slice(0,index).addClass("hover").end()},drain:function(){stars.filter(".on").removeClass("on").end().filter(".hover").removeClass("hover").end()},reset:function(){stars.slice(0,settings.curvalue/settings.increment).addClass("on").end()}};return event.reset(),this.resetStars=function(){event.drain(),settings.curvalue=0},this},CsComponents.prototype.divFixed=function(id,options){return new CsComponentsDivFixed(id,options)},CsComponents.prototype.fixedScroll=function(id,options){return new CsComponentsFixedScroll(id,options)},CsComponents.prototype.textCropper=function(id,text,options){return new CsTextCropper(id,text,options)},CsComponentsDropdownCheckbox.prototype.onWindowObjectClick=function(e){if(this.isOpened){var close_drop=!0;if(e.target.id==this.id)return void(close_drop=!1);var el_id2=$(e.target).parents("#"+this.id).attr("id");if(el_id2)return void(close_drop=!1);close_drop&&this.onBlur(e)}},CsComponentsDropdownCheckbox.prototype.onDropdownClick=function(e){if(this.options.disabled)return!1;if(this.isOpened)this.options.splitButton&&this.container.removeClass(this.options.openedSplitClassName),this.options.small&&this.container.removeClass(this.options.openedSmallClassName),this.captionIconContainer&&this.captionIconContainer.css("background-position",this.options.iconLeft+"px "+this.options.iconTop+"px"),this.isFocused||this.searchContainer.focus(),this.options.titleStay||this.updateCaption();else{if(this.container.addClass(this.options.openedClassName),this.options.splitButton&&this.container.addClass(this.options.openedSplitClassName),this.options.small&&this.container.addClass(this.options.openedSmallClassName),this.captionIconContainer&&!this.options.refreshOnDropdown&&this.captionIconContainer.css("background-position",this.options.iconHoverLeft+"px "+this.options.iconHoverTop+"px"),this.isOpened=!0,this.isFocused||this.searchContainer.focus(),!this.options.noSelectable)for(var i in this.listContainer.elements)this.listContainer.elements[i].removeClass("selected");var contWidth=this.container.width(),dropWidth=this.hiddenContainer.width();if(contWidth>dropWidth&&this.hiddenContainer.width(contWidth),this.options.scrollToSelected&&this.options.maxDropHeight&&this.hiddenContainer.scrollTop(0),this.options.dropUp){this.hiddenContainer.removeClass("top");var winBottom=$(window).scrollTop()+$(window).height(),eleBottom=this.hiddenContainer.offset().top+this.hiddenContainer.height();eleBottom>winBottom&&this.hiddenContainer.addClass("top")}}},CsComponentsDropdownCheckbox.prototype.onBlur=function(e){this.isOpened=!1,this.isFocused=!1,this.isClicked=!1,this.container.removeClass(this.options.openedClassName),this.options.splitButton&&this.container.removeClass(this.options.openedSplitClassName),this.options.small&&this.container.removeClass(this.options.openedSmallClassName),this.captionIconContainer&&!this.options.refreshOnDropdown&&this.captionIconContainer.css("background-position",this.options.iconLeft+"px "+this.options.iconTop+"px")},CsComponentsDropdownCheckbox.prototype.setCustomTitle=function(text){this.captionTitleContainer.text(text)},CsComponentsDropdownCheckbox.prototype.updateCaption=function(){if(!this.options.titleStay){var texts=[];for(var i in this.CheckboxesContainer.elements)this.CheckboxesContainer.elements[i].isChecked()&&this.list[i].text&&texts.push(this.list[i].text);var titleText=this.options.title;if(this.options.titleMaxElements=2,texts.length){if(texts.length<=this.options.titleMaxElements){var visibleTexts=texts.splice(0,this.options.titleMaxElements);titleText=visibleTexts.join(", ")}texts.length>this.options.titleMaxElements&&(titleText=this.options.titleManySelected.replace("{count}",texts.length))}this.setCustomTitle(titleText),this.options.useIcons?this.captionIconContainer&&(this.captionIconContainer.css("background-image","url("+this.list[this.selectedIndex].iconUrl+")"),this.captionIconContainer.css("background-position",eval(-1*this.list[this.selectedIndex].iconLeft)+"px "+eval(-1*this.list[this.selectedIndex].iconTop)+"px")):this.options.iconUrl&&this.captionIconContainer&&(this.options.iconUrl&&this.captionIconContainer.css("background-image","url("+this.options.iconUrl+")"),this.captionIconContainer.css("background-position",this.options.iconLeft+"px "+this.options.iconTop+"px"))}},CsComponentsDropdownCheckbox.prototype.disable=function(){this.container.addClass("cs-dropdown-disabled"),this.options.disabled=!0},CsComponentsDropdownCheckbox.prototype.enable=function(){this.container.removeClass("cs-dropdown-disabled"),this.options.disabled=!1},CsComponentsDropdownCheckbox.prototype.getIndexByValue=function(val){if(!val)return 0;for(var i in this.list)if(this.list[i].value==val)return i;return 0},CsComponentsDropdownCheckbox.prototype.getValues=function(){var ckValues=[];return $.each(this.CheckboxesContainer.elements,function(k,el){el.isChecked()&&ckValues.push(el.getValue())}),ckValues},CsComponentsDropdownCheckbox.prototype.uncheckAll=function(){for(var i in this.CheckboxesContainer.elements)this.CheckboxesContainer.elements[i].uncheck();this.options.titleStay||this.updateCaption()},CsComponentsDropdownCheckbox.prototype.preselectElement=function(num){this.preselectedIndex=num;for(var i in this.listContainer.elements)this.listContainer.elements[i].removeClass("hover");num!==!1&&this.listContainer.elements[this.preselectedIndex].addClass("hover")},CsComponentsDropdownCheckbox.prototype.clearSearchContainer=function(){this.searchContainer&&this.searchContainer.val("")},CsComponentsDropdownCheckbox.prototype.onElementClick=function(e,i){this.toggleElement(i),this.valueContainer,this.options.splitButton&&this.container.removeClass(this.options.openedSplitClassName),this.options.small&&this.container.removeClass(this.options.openedSmallClassName),this.captionIconContainer&&this.captionIconContainer.css("background-position",this.options.iconLeft+"px "+this.options.iconTop+"px"),this.options.titleStay||this.updateCaption(),this.onChange(i)},CsComponentsDropdownCheckbox.prototype.toggleElement=function(i){this.CheckboxesContainer&&(this.CheckboxesContainer.elements[i].isChecked()?this.CheckboxesContainer.elements[i].uncheck():this.CheckboxesContainer.elements[i].check())},CsFeedItemMaker.prototype.removeObject=function(key){return key&&this.objects[key]?(delete this.objects[key],!0):!1},CsFeedItemMaker.prototype.ifObjectExists=function(key){return key&&this.objects[key]?!0:!1},CsFeedItemMaker.prototype.onAddImagesButtonClick=function(e){this.addBlock("images",{},{})},CsFeedItemMaker.prototype.resetPrivacy=function(e){var num=this.getBlockByType("privacy");num&&this.blocks[num].destroy(),"undefined"!=typeof this.permissionIds&&delete this.permissionIds,"undefined"!=typeof this.publicIds&&delete this.publicIds},CsFeedItemMaker.prototype.onAddVideoButtonClick=function(e){csPopup.display(this._parent._parent.options.site_url+"account/feeds/popup-add-video")},CsFeedItemMaker.prototype.onAddUpdatesButtonClick=function(e){var self=this;self.destroyBlocks(),self.showFullView(!0);var update=self.addUpdatesButtonContainer.hasClass("switch-update")?!0:!1;update?(self.functionsRightContainer.hide(),self.setPrivacy(self.options.permissionUpdatesDefault),self.addBlock("updates",{},{}),self.addUpdatesButtonContainer.removeClass("switch-update").addClass("switch-text")):(self.functionsRightContainer.show(),self.addBlock("text",{},{focus:!0}),self.setDefaultPrivacy(),self.addUpdatesButtonContainer.removeClass("switch-text").addClass("switch-update"))},CsFeedItemMaker.prototype.resetView=function(){this.addUpdatesButtonContainer&&this.functionsRightContainer.show(),this.setDefaultPrivacy(),this.addUpdatesButtonContainer&&this.addUpdatesButtonContainer.removeClass("switch-text").addClass("switch-update")},CsFeedItemMaker.prototype.onAddSpecificMembers=function(e){var options={};options.postObject={},options.requestMethod="post",options.postObject.allowed=this.getAllowed(),options.postObject.to_actor_id=this.toActorId,csPopup.display(this._parent._parent.options.site_url+"account/feeds/popup-specific-members/",options)},CsFeedItemMaker.prototype.onAddTeams=function(privacy){var allowed=this.getAllowed();if("undefined"!=typeof privacy){var assigned_allowed={};switch(privacy){case"insiders":"undefined"!=typeof allowed.team&&(assigned_allowed.team=allowed.team),"undefined"!=typeof allowed.advisors&&(assigned_allowed.advisors=allowed.advisors),"undefined"!=typeof allowed.investors&&(assigned_allowed.investors=allowed.investors);break;case"public_team":"undefined"!=typeof allowed.team&&(assigned_allowed.team=allowed.team);break;case"investors":"undefined"!=typeof allowed.investors&&(assigned_allowed.investors=allowed.investors)}jQuery.isEmptyObject(assigned_allowed)||(allowed=assigned_allowed)}if("undefined"!=typeof allowed.mentors&&delete allowed.mentors,"undefined"!=typeof allowed["team-members"]&&delete allowed["team-members"],$.isPlainObject(allowed)){var permissionIds=[];$.each(allowed,function(index,ids){$.isArray(ids)&&(permissionIds=$.merge(permissionIds,ids))}),permissionIds=$.unique(permissionIds),this.permissionIds=permissionIds}},CsFeedItemMaker.prototype.onAddEveryone=function(e){var allowed=this.getAllowed();if("undefined"!=typeof allowed["team-members"]&&delete allowed["team-members"],$.isPlainObject(allowed)){var publicIds=[];$.each(allowed,function(index,ids){$.isArray(ids)&&(publicIds=$.merge(publicIds,ids))}),publicIds=$.unique(publicIds),this.publicIds=publicIds}},CsFeedItemMaker.prototype.getAllowed=function(e){var allowed={};return $.each($("."+this.options.permissionSelector),function(index,obj){var $this=$(obj),group=$this.attr("data-group");if("undefined"!=typeof group&&null!=group){allowed[group]instanceof Array||(allowed[group]=[]);var value=$this.val();if("team-members"==group){var parent_id=$this.attr("data-parent-id");"undefined"!=typeof parent_id&&null!=parent_id&&(value=parent_id+":"+value,allowed[group].push(value))}allowed[group].push($this.val())}}),allowed},CsFeedItemMaker.prototype.getRandom=function(e){return Math.floor(100000001*Math.random())},CsFeedItemMaker.prototype.setActor=function(actor_id){return actor_id?(this.actorId=actor_id,!0):!1},CsFeedItemMaker.prototype.addBlock=function(type,data,options){var num=this.absolute_num;this.absolute_num++;var opt={num:num,type:type,_parent:this};if(options)for(i in options)opt[i]=options[i];switch(type){case"page":this.blocks[num]=new CsFeedItemMakerPage(data,opt);break;case"images":this.blocks[num]=new CsFeedItemMakerImages(data,opt);break;case"text":this.blocks[num]=new CsFeedItemMakerText(data,opt);break;case"video":this.blocks[num]=new CsFeedItemMakerVideo(data,opt);break;case"file":this.blocks[num]=new CsFeedItemMakerFile(data,opt);break;case"privacy":this.blocks[num]=new CsFeedItemMakerPrivacy(data,opt);break;case"updates":this.blocks[num]=new CsFeedItemMakerUpdates(data,opt)}return num},CsFeedItemMaker.prototype.removeBlock=function(num){delete this.blocks[num]},CsFeedItemMaker.prototype.destroyBlocks=function(){for(var i in this.blocks)this.blocks[i]&&void 0!==this.blocks[i].data&&this.blocks[i].destroy()},CsFeedItemMaker.prototype.getCursorPosition=function(el){var el=el.textarea[0];if(el.selectionStart)return el.selectionStart;if(document.selection){el.focus();var r=document.selection.createRange();if(null==r)return 0;var re=el.createTextRange(),rc=re.duplicate();return re.moveToBookmark(r.getBookmark()),rc.setEndPoint("EndToStart",re),rc.text.length}return 0},CsFeedItemMaker.prototype.getWordBeforePostionion=function(text,position){text=text.substring(0,position);var texts=this.explode(text),good_texts=[];if(texts)for(i in texts)texts[i]&&good_texts.push(texts[i]);return good_texts.length?good_texts[good_texts.length-1]:""},CsFeedItemMaker.prototype.addObject=function(key,type,data){if(!key)return!1;if(!type)return!1;var object={type:type};return object.data=data,this.objects[key]=object,!0},CsFeedItemMaker.prototype.explode=function(text){if(!text)return"";var regx=/\\n/g;if(text=text.replace(regx,text),text=text.replace(/\s+/g," "),!text)return"";var texts=text.split(" "),good_texts=[];if(texts)for(i in texts)texts[i]&&good_texts.push(texts[i]);return good_texts.length?good_texts:""},CsFeedItemMaker.prototype.setDefaultPrivacy=function(){if("undefined"==typeof this.csPrivacy)return!1;var selIndex=0;"teams"==this.options.permissionControlDefault&&(selIndex=1),this.csPrivacy.selectOption(selIndex)},CsFeedItemMaker.prototype.setPrivacy=function(privacy){if("undefined"==typeof this.csPrivacy)return!1;if("undefined"==typeof privacy||!privacy)return!1;var self=this;return $.each(this.csPrivacy.list,function(k,v){return v.value==privacy?(self.csPrivacy.selectOption(k),!0):void 0}),!1},CsFeedItemMaker.prototype.send=function(callback){var marker=$("ul.tags-wrapper");marker.removeClass("red-marker");var send_object={},post={};post.blocks=[];for(i in this.blocks)if(void 0!==this.blocks[i].data&&("undefined"!=typeof this.blocks[i].data.type&&"updates"==this.blocks[i].data.type&&this.blocks[i].saveData(),!this.blocks[i].isEmpty())){var temp_data={};if(temp_data=this.blocks[i].data,"images"==this.blocks[i].data.type)for(var j in temp_data.images)temp_data.images[j].image_id=temp_data.images[j].imageId,delete temp_data.images[j].imageId;post.blocks[i]=temp_data}if(this.options.tags){var selectedValue;selectedValue="undefined"==typeof this.selectedTags||0==this.selectedTags.length?"":this.selectedTags,post.tags=selectedValue}if(this.options.customTags&&(post.customTags=this.csCustomTagsObj.getValues()),this.options.permissionControl){var privacy=this.csPrivacy.getValue();"undefined"!=typeof this.permissionIds||"teams"!=privacy&&"insiders"!=privacy&&"public_team"!=privacy&&"investors"!=privacy?"undefined"==typeof this.publicIds&&"everyone"==privacy&&"publicTeams"!=this.options.permissionPage&&this.onAddEveryone():this.onAddTeams(privacy),post.privacy=privacy}if(this.permissionIds&&(post.permission_ids=this.permissionIds),this.publicIds&&(post.public_ids=this.publicIds),post.startupboard=this.options.startupboard,post.private_profile=this.options.private_profile,post.actor_id=this.actorId,post["public"]=this.publicParam,post.to_actor_id=this.toActorId,post.broadcast=this.broadcast||!1,post.is_event=1,"public"==this.publicParam){var social_networks=new Array("twitter");for(i in social_networks)-1!=this.options.socialNetworksEnabled.indexOf(social_networks[i])&&(post.shareTwitter=!0)}send_object.post=post,this.options.size&&(send_object.size=this.options.size),send_object=this.objectToPost(send_object);var self=this;$.post(this.options.url,send_object,function(response){try{var responseObj=jQuery.parseJSON(response)}catch(e){var responseObj=!1}return responseObj&&"object"==typeof responseObj&&"undefined"!=typeof responseObj.status&&"err"==responseObj.status&&("undefined"!=typeof responseObj.status_code&&3200==responseObj.status_code&&marker.addClass("red-marker"),"undefined"!=typeof responseObj.status_desc)?(error_text=unescape(decodeURIComponent(responseObj.status_desc)),cs.components().alert(error_text,{title:"Hey!",type:"err",method:"inline"}),callback(),!1):(self.options.permissionControl&&self.setDefaultPrivacy(),self.options.customTags&&self.csCustomTagsObj.clearContainer(),void(self.options.feedDomPath&&(self.permissionIds&&delete self.permissionIds,self.publicIds&&delete self.publicIds,$(response).prependTo(self.options.feedDomPath).slideDown("fast"),self.showFullView(!1),self.destroyBlocks(),self.resetView(),"core"==self.publicType?(self.csFeedMakerPublicityObject.options.iconUrl=self._parent._parent.options.site_url+"images/components/cs-component-icons.gif",self.csFeedMakerPublicityObject.options.iconTop=-79,self.csFeedMakerPublicityObject.options.iconLeft=0,self.csFeedMakerPublicityObject.options.iconHoverTop=-79,self.csFeedMakerPublicityObject.options.iconHoverLeft=-64,self.csFeedMakerPublicityObject.updateCaption(),self.csFeedMakerPublicityObject.onElementClick(!1,self.csFeedMakerPublicityObject.getIndexByValue("core")),self.publicParam="core"):"public"==self.publicType?(self.csFeedMakerPublicityObject.options.iconUrl=self._parent._parent.options.site_url+"images/components/cs-components-icons.png",self.csFeedMakerPublicityObject.options.iconTop=0,self.csFeedMakerPublicityObject.options.iconLeft=-84,self.csFeedMakerPublicityObject.options.iconHoverTop=-32,self.csFeedMakerPublicityObject.options.iconHoverLeft=-84,self.csFeedMakerPublicityObject.updateCaption(),self.csFeedMakerPublicityObject.onElementClick(!1,self.csFeedMakerPublicityObject.getIndexByValue("public")),self.publicParam="public"):(self.csFeedMakerPublicityObject.options.iconUrl=self._parent._parent.options.site_url+"images/components/cs-component-icons.gif",self.csFeedMakerPublicityObject.options.iconTop=-79,self.csFeedMakerPublicityObject.options.iconLeft=0,self.csFeedMakerPublicityObject.options.iconHoverTop=-79,self.csFeedMakerPublicityObject.options.iconHoverLeft=-64,self.csFeedMakerPublicityObject.updateCaption(),self.csFeedMakerPublicityObject.onElementClick(!1,self.csFeedMakerPublicityObject.getIndexByValue("all")),self.publicParam="all"),self.objects={},callback())))})},CsFeedItemMaker.prototype.objectToPost=function(object,name){var obj={};for(key in object){var key_str;switch(key_str=name?name+"["+key+"]":key,typeof object[key]){case"string":obj[""+key_str]=object[key];break;case"number":obj[""+key_str]=object[key];break;case"boolean":obj[""+key_str]=object[key];break;case"array":var new_obj=this.objectToPost(object[key],key_str);for(j in new_obj)obj[j]=new_obj[j];break;case"object":var new_obj=this.objectToPost(object[key],key_str);for(j in new_obj)obj[j]=new_obj[j]}}return obj},CsFeedItemMaker.prototype.getBlock=function(num){return this.blocks[num]},CsFeedItemMaker.prototype.getBlockByType=function(type){for(i in this.blocks)if("undefined"!=this.blocks[i].data.type&&this.blocks[i].data.type==type)return i;return!1},CsFeedItemMaker.prototype.showFullView=function(type){type?this.container.removeClass("cs-feed-maker-default"):this.container.addClass("cs-feed-maker-default")},CsFeedItemMaker.prototype.checkAllBlocks=function(){var total_blocks=0;for(var i in this.blocks)this.blocks[i]&&void 0!==this.blocks[i].data&&total_blocks++;0==total_blocks&&(this.blocks=[],this.showFullView(!1))},CsFeedItemMaker.prototype.getBlocksCount=function(){var total_blocks=0;for(var i in this.blocks)this.blocks[i]&&void 0!==this.blocks[i].data&&(this.blocks[i].isEmpty()||total_blocks++);return total_blocks},CsFeedItemMaker.prototype.isUrl=function(word){var regexp=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;if(!regexp.test(word)){var regexp=/(www).(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return regexp.test(word)}return!0},CsFeedItemMaker.prototype.isVideo=function(video_url){video_id=!1;var reg=/(\?v=|\&v=|\/\d\/|\/embed\/|\/v\/|\.be\/)([a-zA-Z0-9\-\_]+)/,regexyoutubeurl=video_url.match(reg);if(regexyoutubeurl&&(video_id=regexyoutubeurl[2]),video_id)return["youtube",video_id];var reg=/(https?:\/\/)?(www\.|player\.)?vimeo.com\/(video\/)?(\d+)(\?|$|\/)/,regexvimeourl=video_url.match(reg);if(regexvimeourl)for(i in regexvimeourl)if(cs.algorithms().isNumber(regexvimeourl[i])&&parseInt(regexvimeourl[i])>0){video_id=regexvimeourl[i];break}return video_id?["vimeo",video_id]:!1},CsFeedItemMaker.prototype.checkWordsForObjects=function(words){if(!words)return[];if(!words.length)return[];var objects=[];for(i in words){var vid;if(vid=this.isVideo(words[i])){var obj={type:"video",keyword:words[i],url:words[i],source:vid[0],video_id:vid[1]};objects.push(obj)}else if(this.isUrl(words[i])){var obj={type:"page",keyword:words[i],url:words[i]};objects.push(obj)}else;}return objects},CsFeedItemMaker.prototype.videoAddCallback=function(string){var words=[];words[0]=string;var objects=this.checkWordsForObjects(words);if(objects.length)for(i in objects)switch(objects[i].type){case"video":this.ifObjectExists(objects[i].keyword)||(this.addBlock("video",objects[i],{}),this.addObject(objects[i].keyword,"video",{}))}},CsFeedItemMaker.prototype.privacyAddCallback=function(objects){if($.isPlainObject(objects)){var num=this.getBlockByType("privacy");num&&this.blocks[num].destroy();var item={};if(item.name=[],item.id=[],$.each(objects,function(index,value){item.name.push(value),item.id.push(index)}),this.permissionIds=item.id,0===this.permissionIds.length)return this.resetPrivacy(),"err_empty";this.addBlock("privacy",item,{});var $this=this;$.each(item,function(value){$this.addObject("","privacy",item)})}},CsFeedItemMakerImages.prototype.showUploadPopup=function(images){csPopup.display(this._parent._parent._parent.options.site_url+"account/pictures/popup-new-pictures?auto_close=1&on_finish="+this._parent.options.objectName+".getBlock("+this.options.num+").onFinishUpload("+this._parent.options.uploaderObjectName+".getUploadedImages())&on_cancel="+this._parent.options.objectName+".getBlock("+this.options.num+").onCancelUpload()",{onTop:!0})},CsFeedItemMakerImages.prototype.onFinishUpload=function(images){if(images)for(i in images)this.data.images.push(images[i]);this.isEmpty()?this.destroy():(this._parent.showFullView(!0),this.display())},CsFeedItemMakerImages.prototype.onCancelUpload=function(){this.isEmpty()&&this.destroy()},CsFeedItemMakerImages.prototype.isEmpty=function(){return this.data.images.length>0?!1:!0},CsFeedItemMakerImages.prototype.destroy=function(){if(this.container){if(!this.isEmpty()){var imageIds=[];for(i in this.data.images)imageIds.push(this.data.images[i].imageId);imageIds.length&&this.removeImagesPost(imageIds)}$(this.crossContainer).qtip("hide"),this.crossContainer.unbind("click"),this.container.remove()}this._parent.removeBlock(this.options.num),this._parent.checkAllBlocks()},CsFeedItemMakerImages.prototype.removeImagesPost=function(imagesIds){if(imagesIds&&imagesIds.length){var post={};post.images_ids=imagesIds,post=this._parent._parent._parent.algorithms().objectToPost(post),$.post(this._parent._parent._parent.options.site_url+"account/pictures/ajax-delete-temp-images-by-ids",post,function(response){})}},CsFeedItemMakerImages.prototype.display=function(){var self=this;this.container||(this.container=$("<li/>",{"class":"cs-feed-maker-block cs-feed-maker-block-images",id:this.containerId}).appendTo(this._parent.blocksContainer),this.crossContainer=$("<div/>",{"class":"cross csCross",title:this._parent.options.blockImagesCloseTip}).appendTo(this.container),this._parent._parent.titleTips(this.crossContainer),this.crossContainer.bind("click",function(e){self.destroy()}),this.imagesContainer=$("<div/>",{"class":"images-container"}).appendTo(this.container),this.printAddImage()),this.printImages(),$("<div/>",{"class":"cl"}).appendTo(this.container)},CsFeedItemMakerImages.prototype.printImages=function(){for(i in this.imagesContainers)this.imagesContainers[i].cross.unbind("click"),this.imagesContainers[i].remove();var self=this;for(i in this.data.images)this.imagesContainers[i]=$("<div/>",{"class":"image-container"}).insertBefore(this.addImageButton),$("<img/>",{src:this._parent._parent._parent.options.site_url+this.data.images[i].path+"/"+this.data.images[i].imageId+"_th3."+this.data.images[i].type}).appendTo(this.imagesContainers[i]),this.imagesContainers[i].cross=$("<div/>",{"class":"image-cross r",rel:i}).appendTo(this.imagesContainers[i]),this.imagesContainers[i].cross.bind("click",function(e){var imageNum=$(this).attr("rel");self.removeImage(imageNum)})},CsFeedItemMakerImages.prototype.printAddImage=function(){this.addImageButton=$("<div/>",{"class":"add-image"}).appendTo(this.imagesContainer),$("<div/>",{"class":"add-image-border"}).appendTo(this.addImageButton),$("<div/>",{"class":"add-image-icon"}).appendTo(this.addImageButton);var self=this;this.addImageButton.bind("click",function(e){self.showUploadPopup()})},CsFeedItemMakerImages.prototype.removeImage=function(num){if(this.data.images[num]){this.imagesContainers[num].cross&&this.imagesContainers[num].cross.unbind("click");var imgsArr=[this.data.images[num].imageId];this.removeImagesPost(imgsArr),this.data.images.splice(num,1),this.imagesContainers[num]&&(this.imagesContainers[num].remove(),this.imagesContainers.splice(num,1))}this.isEmpty()&&this.destroy()},CsFeedItemMakerText.prototype.display=function(){this.hCheck=!/msie|opera/i.test(navigator.userAgent),this.container=$("<li/>",{"class":"cs-feed-maker-block cs-feed-maker-block-text",id:this.containerId}).appendTo(this._parent.blocksContainer),this.crossContainer=$("<div/>",{"class":"cross csCross",title:this._parent.options.blockTextCloseTip}).appendTo(this.container);var self=this;this.crossContainer.bind("click",function(e){self.destroy()}),this._parent._parent.titleTips(this.crossContainer),this.textarea=$("<textarea/>",{"class":"cs-input-field-design cs-input-field-color-dark-"+this._parent.options.colorScheme+" nr",spellcheck:!1}).appendTo(this.container),this.textarea.val(this.data.text||this._parent.options.defaultText),this._parent.textareaWidth&&this.textarea.width(this._parent.textareaWidth),this.textarea.val()==this._parent.options.defaultText&&this.textarea.addClass("default"),this.textarea.bind("keyup",function(e){self.keyUpEvent(e)}),this._parent._parent.resizableTextarea(this.textarea,{expandMin:53,expandMax:300}),this.textarea.bind("paste",function(e){setTimeout(function(){self.pasteEvent(e)},1)}),this.textarea.bind("click",function(e){self.clickEvent(e)}),this.textarea.bind("focus",function(e){self.focusEvent(e)}),this.textarea.bind("blur",function(e){self.blurEvent(e);
}),this.options.focus&&this.textarea.focus()},CsFeedItemMakerText.prototype.destroy=function(){this.container&&(!this.isEmpty(),this.crossContainer.unbind("click"),$(this.crossContainer).qtip("hide"),this.container.remove()),this._parent.removeBlock(this.options.num),this._parent.checkAllBlocks()},CsFeedItemMakerText.prototype.keyDownEvent=function(e){this.resizeTextarea(e)},CsFeedItemMakerText.prototype.focusEvent=function(e){var val=this.textarea.val();val==this._parent.options.defaultText&&(this.textarea.val(""),this.textarea.removeClass("default"))},CsFeedItemMakerText.prototype.keyUpEvent=function(e){this.saveText(),this.checkTextForObjects(e,this)},CsFeedItemMakerText.prototype.isEmpty=function(){return this.data.text&&this.data.text!=this._parent.options.defaultText?!1:!0},CsFeedItemMakerText.prototype.pasteEvent=function(e){this.saveText(),this.checkTextForObjects(e,this)},CsFeedItemMakerText.prototype.clickEvent=function(e){this._parent.showFullView(!0)},CsFeedItemMakerText.prototype.blurEvent=function(){this.isEmpty()&&(this.textarea.val(this._parent.options.defaultText),this.textarea.addClass("default"))},CsFeedItemMakerText.prototype.resizeTextarea=function(e){var e=e.target||e,vlen=e.value.length,ewidth=e.offsetWidth;if(vlen!=e.valLength||ewidth!=e.boxWidth){this.hCheck&&(vlen<e.valLength||ewidth!=e.boxWidth)&&(e.style.height="0px");var scrollHeight=e.scrollHeight,safari=/webkit[ \/][\w.]+.*version[ \/][\w.]+.*safari[ \/][\w.]+/i;scrollHeight=safari.test(navigator.userAgent)?e.scrollHeight-10:e.scrollHeight;var h=Math.max(this.textarea.expandMin,Math.min(scrollHeight,this.textarea.expandMax));e.style.overflow=scrollHeight>h?"auto":"hidden",e.style.height=h+"px",e.valLength=vlen,e.boxWidth=ewidth}return!0},CsFeedItemMakerText.prototype.saveText=function(){this.data.text=this.textarea.val()},CsFeedItemMakerText.prototype.checkTextForObjects=function(e,el){var words=[];if(e.keyCode){var cursor_position=this._parent.getCursorPosition(el);if(32==e.keyCode){var word=this._parent.getWordBeforePostionion(this.data.text,cursor_position);word&&words.push(word)}}else"paste"==e.type&&(words=this._parent.explode(this.data.text));if(words.length){var objects=this._parent.checkWordsForObjects(words);if(objects.length)for(i in objects)switch(objects[i].type){case"video":this._parent.ifObjectExists(objects[i].keyword)||(this._parent.addBlock("video",objects[i],{}),this._parent.addObject(objects[i].keyword,"page",{}))}}},CsFeedItemMakerUpdates.prototype.display=function(){this.container=$("<div/>",{"class":"updates-container"}).appendTo(this._parent.inputStyleContainer),this.showLoader();var self=this,post={};post.actor_id=this._parent.toActorId,post.is_event=1,$.post("/account/feeds/update-kpi",post,function(response){self.hideLoader(),self.container.html(response)})},CsFeedItemMakerUpdates.prototype.showLoader=function(){this.loaderContainer=$("<div/>",{"class":"loader",text:" "}).appendTo(this.container)},CsFeedItemMakerUpdates.prototype.hideLoader=function(){this.loaderContainer&&(this.loaderContainer.remove(),this.loaderContainer=!1)},CsFeedItemMakerUpdates.prototype.saveData=function(){this.data.updates=this.container.find("form").serializeArray()},CsFeedItemMakerUpdates.prototype.isEmpty=function(){var isEmpty=!0;if("undefined"==this.data.updates||!this.data.updates)return isEmpty;var excluded_values=["revenue_currency","raised_currency"];return $.each(this.data.updates,function(k,v){return"undefined"!=typeof v.name&&"undefined"!=typeof v.value&&-1==$.inArray(v.name,excluded_values)&&""!=v.value?(isEmpty=!1,!1):void 0}),isEmpty},CsFeedItemMakerUpdates.prototype.destroy=function(){this.container&&this.container.remove(),this._parent.removeBlock(this.options.num),this._parent.checkAllBlocks()},CsFeedItemMakerPrivacy.prototype.display=function(){this.hCheck=!/msie|opera/i.test(navigator.userAgent),this.container=$("<li/>",{"class":"cs-feed-maker-block cs-feed-maker-block-privacy",id:this.containerId}).appendTo(this._parent.blocksContainer),this.nameContainer=$("<div/>",{"class":"name",html:"<strong>Visible to:</strong> You, "}).appendTo(this.container);var self=this;$.each(this.data.name,function(key,value){self.itemContainer=$("<span/>",{"class":"item",html:value+(key==self.data.name.length-1?"":", ")}).appendTo(self.nameContainer)}),this.crossContainer=$("<div/>",{"class":"cross csCross",title:this._parent.options.blockTextCloseTip}).appendTo(this.container);var self=this;this.crossContainer.bind("click",function(e){self.destroy()})},CsFeedItemMakerPrivacy.prototype.showLoader=function(){this.loaderContainer=$("<div/>",{"class":"loader",text:"loading..."}).appendTo(this.container)},CsFeedItemMakerPrivacy.prototype.hideLoader=function(){this.loaderContainer&&(this.loaderContainer.remove(),this.loaderContainer=!1)},CsFeedItemMakerPrivacy.prototype.isEmpty=function(){return this.data&&this.data.name?!1:!0},CsFeedItemMakerPrivacy.prototype.destroy=function(){this.container&&(!this.isEmpty(),this.crossContainer.unbind("click"),this.container.remove()),this._parent.removeBlock(this.options.num),this._parent.checkAllBlocks()},CsFeedItemMakerFile.prototype.display=function(){this.hCheck=!/msie|opera/i.test(navigator.userAgent),this.container=$("<li/>",{"class":"cs-feed-maker-block cs-feed-maker-block-file",id:this.containerId}).appendTo(this._parent.blocksContainer),this.nameContainer=$("<div/>",{"class":"name"}).appendTo(this.container),this.crossContainer=$("<div/>",{"class":"cross csCross",title:this._parent.options.blockTextCloseTip}).appendTo(this.container);var self=this;this.crossContainer.bind("click",function(e){self.destroy()})},CsFeedItemMakerFile.prototype.showLoader=function(){this.loaderContainer=$("<div/>",{"class":"loader",text:"loading..."}).appendTo(this.container)},CsFeedItemMakerFile.prototype.hideLoader=function(){this.loaderContainer&&(this.loaderContainer.remove(),this.loaderContainer=!1)},CsFeedItemMakerFile.prototype.setData=function(data){this.data=data,this.data.type="file",this.nameContainer.text(this.data.name)},CsFeedItemMakerFile.prototype.isEmpty=function(){return this.data&&this.data.file_id?!1:!0},CsFeedItemMakerFile.prototype.destroy=function(){this.container&&(!this.isEmpty(),this.crossContainer.unbind("click"),this.container.remove()),this._parent.removeBlock(this.options.num),this._parent.checkAllBlocks()},CsFeedItemMakerVideo.prototype.previewVideo=function(){var videoPreview=$("<div/>",{"class":"video-preview"}).appendTo(this.container);$("<img/>",{"class":"r3",src:this.data.thumbnail_small}).appendTo(videoPreview);var videoInfo=$("<div/>",{"class":"video-info"}).appendTo(videoPreview);$("<a/>",{text:this.data.title,href:this.data.url}).appendTo(videoInfo),$("<div/>",{"class":"cb"}).appendTo(videoPreview)},CsFeedItemMakerVideo.prototype.downloadVideoData=function(){"vimeo"==this.data.source&&this.getVimeoData(),"youtube"==this.data.source&&this.getYoutubeData()},CsFeedItemMakerVideo.prototype.processYoutubeData=function(data){var self=this;self.data.thumbnail=data.entry.media$group.media$thumbnail[1].url,self.data.thumbnail_small=data.entry.media$group.media$thumbnail[0].url,self.data.title=data.entry.title.$t,self.data.author=data.entry.author[0].name.$t,self.data.published=new Date(data.entry.published.$t.substr(0,4),data.entry.published.$t.substr(5,2)-1,data.entry.published.$t.substr(8,2)).toLocaleDateString(),self.data.duration=data.entry.media$group.yt$duration.seconds,self.data.url=data.entry.media$group.media$player.url,self.previewVideo()},CsFeedItemMakerVideo.prototype.getYoutubeData=function(){var url="https://gdata.youtube.com/feeds/api/videos/"+this.data.video_id+"?v=2&alt=json-in-script";window.tmpVideoObj=this,$.ajax({type:"GET",dataType:"jsonp",async:!1,contentType:"application/json",url:url,jsonpCallback:"window.tmpVideoObj.processYoutubeData"})},CsFeedItemMakerVideo.prototype.getVimeoData=function(url){var self=this,url="https://vimeo.com/api/v2/video/"+this.data.video_id+".json?callback=?";$.getJSON(url,{format:"json"},function(data){data=data[0],self.data.title=data.title,self.data.description=data.description,self.data.thumbnail=data.thumbnail_large,self.data.thumbnail_small=data.thumbnail_medium,self.data.author=data.user_name,self.data.duration=data.duration,self.previewVideo()})},CsFeedItemMakerVideo.prototype.isEmpty=function(){return this.data.title&&this.data.thumbnail&&this.data.video_id&&this.data.source?!1:!0},CsFeedItemMakerVideo.prototype.display=function(){this.hCheck=!/msie|opera/i.test(navigator.userAgent),this.container=$("<li/>",{"class":"cs-feed-maker-block cs-feed-maker-block-video",id:this.containerId}).appendTo(this._parent.blocksContainer),this.crossContainer=$("<div/>",{"class":"cross csCross",title:this._parent.options.blockTextCloseTip}).appendTo(this.container);var self=this;this.crossContainer.bind("click",function(e){self.destroy()})},CsFeedItemMakerVideo.prototype.destroy=function(){this.container&&(!this.isEmpty(),this.crossContainer.unbind("click"),this.container.remove()),this._parent.removeBlock(this.options.num),this._parent.checkAllBlocks()},CsComponentsExpandList.prototype.expand=function(){this.listParent.find('[data-list="'+this.listName+'"]').removeClass("hide").show(),this.toggleLink.data("toggle","on"),this.toggleLink.text(this.linkTextLess)},CsComponentsExpandList.prototype.collapse=function(){this.listParent.find("."+this.hiddenElementsClass+'[data-list="'+this.listName+'"]').hide(),this.toggleLink.data("toggle","off"),this.toggleLink.text(this.linkTextMore)},CsComponentsFixedSidebar.prototype.attach=function(){var self=this;this.sContent||(this.sContent=this.sidebar.contents(),this.sContent.find("script").remove(),this.sContent=this.sContent.detach(),$("<div />",{id:self.sidebarId+"-content"}).appendTo(this.sidebar),$("#"+self.sidebarId+"-content").append(this.sContent),this.sContent=$("#"+self.sidebarId+"-content"),this.sContent.css("position","relative")),this.recalc(),$(window).scroll(function(){self.mHeight>self.displayHeight&&self.scrollSidebar()}),self.scrollSidebar(),this.sContent.on("resize",function(){self.recalc()}),this.mainarea.on("resize",function(){self.recalc()}),$(window).on("resize",function(){self.recalc()})},CsComponentsFixedSidebar.prototype.detach=function(){this.sContent.off("resize"),this.mainarea.off("resize"),$(window).off("scroll");var origSContent=this.sContent.contents();origSContent=origSContent.detach(),this.sContent.remove(),origSContent.appendTo(this.sidebar)},CsComponentsFixedSidebar.prototype.recalc=function(){this.sHeight="border-box"===this.sContent.css("box-sizing")?this.sContent.outerHeight():this.sContent.height(),this.mHeight="border-box"===this.mainarea.css("box-sizing")?this.mainarea.outerHeight():this.mainarea.height(),this.sOffset=this.sidebar.offset().top-$(window).scrollTop(),this.mOffset=this.mainarea.offset().top-$(window).scrollTop(),this.displayHeight=$(window).height()-this.offsetTop-this.offsetBottom},CsComponentsFixedSidebar.prototype.calcScrollDirection=function(){var y=$(window).scrollTop();y>this.lastScrollTop?this.direction="down":y<this.lastScrollTop&&(this.direction="up"),this.lastScrollTop=parseInt(y)},CsComponentsFixedSidebar.prototype.scrollSidebar=function(){if(this.calcScrollDirection(),this.sOffset=this.sidebar.offset().top-$(window).scrollTop(),this.mOffset=this.mainarea.offset().top-$(window).scrollTop(),this.sHeight<this.mHeight){var newTop=this.offsetTop-this.sOffset,currentTop=parseInt(this.sContent.css("top").replace("px",""));this.sHeight>this.displayHeight?"up"==this.direction?newTop>0?newTop+this.sHeight<this.mHeight?currentTop>=newTop&&this.sContent.css("top",newTop+"px"):this.sContent.css("top",this.mHeight-this.sHeight-1+"px"):this.sContent.css("top","0px"):"down"==this.direction&&(newTop+this.displayHeight>this.sHeight?newTop+this.displayHeight<this.mHeight?currentTop<=newTop-(this.sHeight-this.displayHeight)&&this.sContent.css("top",newTop-(this.sHeight-this.displayHeight)+"px"):this.sContent.css("top",this.mHeight-this.sHeight-1+"px"):this.sContent.css("top","0px")):newTop>0?newTop+this.sHeight<this.mHeight?this.sContent.css("top",newTop+"px"):this.sContent.css("top",this.mHeight-this.sHeight-1+"px"):this.sContent.css("top","0px")}},CsComponentsToggle.prototype.init=function(){var self=this,containerClass=self.customClass?self.customClass:"cs-toggle";self.container.addClass(containerClass),self.options.size&&self.container.addClass("cs-toggle-size-"+self.options.size),self.disabled&&self.container.addClass("cs-toggle-disabled");var hasPreselectedItem=!1;$.each(self.items,function(k,item){self.switches[k]=$("<span/>",{"class":"switch",text:item.text}).appendTo(self.container),self.switches[k].data("value",item.value),item.title&&(self.switches[k].attr("title",item.title),self.switches[k].addClass("cs-title-tip")),"boolean"==typeof item.selected&&1==item.selected&&(self.switches[k].addClass("switch-on"),self.value=item.value,self.selectedSwitch=self.switches[k],hasPreselectedItem=!0),("undefined"==typeof item.disabled||0==item.disabled)&&self.switches[k].click(function(){self.selectItem(k),self.onChange.call()})}),hasPreselectedItem||(this.switches[0].addClas("switch-on"),this.selectedSwitch=this.switches[0],this.value=this.items[0].value)},CsComponentsToggle.prototype.getValue=function(){return this.value},CsComponentsToggle.prototype.disable=function(){this.container.addClass("cs-toggle-disabled"),this.disabled=!0},CsComponentsToggle.prototype.selectItem=function(k){return"number"!=typeof k?!1:k>this.items.length-1?!1:this.disabled?!1:(null!=this.selectedSwitch&&this.selectedSwitch.removeClass("switch-on"),this.switches[k].addClass("switch-on"),this.selectedSwitch=this.switches[k],void(this.value=this.items[k].value))},CsComponentsToggle.prototype.enable=function(){this.container.removeClass("cs-toggle-disabled"),this.disabled=!1},CsFixedTableHeader.prototype.attach=function(){var self=this;self.container.css("position","relative"),self.tableHeaderContainer=$("<div/>",{"class":"table data-table responsive-table"}).css({position:"absolute",left:"0px",right:"0px",top:"0px","z-index":1}).prependTo(self.container),self.tableHeaderPlaceholder=self.tableHeader.clone().prependTo(self.tableHeaderContainer),self.tableHeaderPlaceholder.attr("id","table-header-fixed"),self.tableHeader.css("visibility","hidden"),$("#dashboard").resize(function(){self.calcColumns()}),self.calcColumns(),$(window).scroll(function(){self.scrollHeader()}),self.scrollHeader()},CsFixedTableHeader.prototype.scrollHeader=function(){var finalOffsetTop=this.offsetTop;this.offsetTopSource&&(finalOffsetTop+=$("#"+this.offsetTopSource).height());var tOffset=this.table.offset().top-$(window).scrollTop(),newTop=finalOffsetTop-tOffset;parseInt(this.tableHeaderContainer.css("top").replace("px",""));newTop>0?newTop+this.tableHeaderHeight<this.tableHeight?this.tableHeaderContainer.css("top",newTop+"px"):this.tableHeaderContainer.css("top",this.tableHeight-this.tableHeaderHeight-1+"px"):this.tableHeaderContainer.css("top","0px")},CsFixedTableHeader.prototype.calcColumns=function(){var self=this,headerCols=self.tableHeaderPlaceholder.find(".table-cell"),regularRow=self.table.find(".table-row").first();regularRow.find(".table-cell").each(function(k,cell){var newWidth="border-box"===$(cell).css("box-sizing")?$(cell).outerWidth():$(cell).width();$(headerCols[k]).css("width",newWidth+"px")})},csMobileURL.prototype.checkURL=function(){var self="undefined"==typeof this._self?this:this._self;self.checking||self.formObj.getValue()==self.previousURL||self.validateURL()},csMobileURL.prototype.checkURLonInterval=function(){var self="undefined"==typeof this._self?this:this._self;self.formObj.getValue()==self.previousURL||self.checking||self.validateURL()},csMobileURL.prototype.validateURL=function(callback){var self="undefined"==typeof this._self?this:this._self,detailsContainer=$("#"+self.detailsContainerId),errorContainer=$("#"+self.errorContainerId),data={};data.url=self.formObj.getValue(),data.market=self.market,data.display=1,self.previousURL=data.url,detailsContainer.html(""),self.onValidate(),""!=data.url&&(self.checking=!0,detailsContainer.addClass(self.loaderClass),"string"==typeof self.customClass&&detailsContainer.addClass(self.customClass),$.post(self.resource_url+"profile/"+self.actor_id+"/main/validate-mobile-url",data,function(response){if(self.checking=!1,detailsContainer.removeClass(self.loaderClass),"undefined"==typeof response||"undefined"==typeof response.data)return!1;if("ok"==response.status){if("image"==self.detailsType){var image=$("<img/>",{src:response.data.imageurl.replace(".jpg",".png")});image.css("width","30px").css("height","auto"),image.appendTo(detailsContainer)}else"full"==self.detailsType&&detailsContainer.html(response.data.html);self.urlOK=!0,errorContainer.length&&(errorContainer.text(""),errorContainer.hide()),"function"==typeof callback&&callback.call(),self.onSuccess(response.data)}else if("err"==response.status){detailsContainer.html(""),self.urlOK=!1;var error_text="This doesn't seem to be a valid app store URL.";"undefined"!=typeof response.status_code&&(2022==response.status_code&&(error_text="We can't find an app match."),2023==response.status_code&&(error_text="D'oh! We seem to have a problem identifying your app")),errorContainer.length?(errorContainer.show(),errorContainer.text(error_text)):detailsContainer.html(error_text),self.onError(response.data)}},"json"))},csMobileURL.prototype.showAppDetails=function(){this._self},CsPermissionsSelector.prototype.pushPermission=function(uniqueId,permission){return this.permissions[uniqueId]=permission,this.permissions[uniqueId].orig_level=permission.level,!0},CsPermissionsSelector.prototype.changePermissionLevel=function(uniqueId,level){return"undefined"==typeof this.permissions[uniqueId]?!1:("boolean"==typeof level&&0==level?(this.permissions[uniqueId].changed=!0,this.permissions[uniqueId].deleted=!0,"undefined"!=typeof this.permissions[uniqueId].selector&&this.permissions[uniqueId].selector.disable()):(this.permissions[uniqueId].level=level,level==this.permissions[uniqueId].origLevel?this.permissions[uniqueId].changed=!1:this.permissions[uniqueId].changed=!0),this._updateStatus(),!0)},CsPermissionsSelector.prototype._updateStatus=function(){var changesExist=!1;for(var id in this.permissions)if("boolean"==typeof this.permissions[id].changed&&1==this.permissions[id].changed){changesExist=!0;break}this.changed=changesExist},CsPermissionsSelector.prototype.getChangedItems=function(){var changedItems=[];for(var id in this.permissions)if("boolean"==typeof this.permissions[id].changed&&1==this.permissions[id].changed){var item=this.permissions[id];"undefined"!=typeof item.selector&&delete item.selector,delete item.changed,changedItems.push(item),item=!1}return changedItems},CsComponentsInputV2.prototype.setValue=function(newValue){this.container.val(newValue),this.options.formatNumeric&&this.formatNumber(!1)},CsComponentsInputV2.prototype.getValue=function(){return this.container.val()},CsComponentsInputV2.prototype.hasValue=function(){return""!=$.trim(this.container.val())?!0:!1},CsComponentsInputV2.prototype.getSelection=function(){var position={},that=this.container.get(0);if(void 0===that.selectionStart){that.focus();var select=document.selection.createRange();position.length=select.text.length,select.moveStart("character",-that.value.length),position.end=select.text.length,position.start=position.end-position.length}else position.start=that.selectionStart,position.end=that.selectionEnd,position.length=position.end-position.start;return position},CsComponentsInputV2.prototype.setSelection=function(start,end){var that=this.container.get(0);if(void 0===that.selectionStart){that.focus();var r=that.createTextRange();r.collapse(!0),r.moveEnd("character",end),r.moveStart("character",start),r.select()}else that.selectionStart=start,that.selectionEnd=end},CsComponentsInputV2.prototype.disable=function(newValue){this.wrapper.attr("disabled",!0),this.container.attr("disabled",!0),this.wrapper.addClass("disabled"),newValue&&this.container.val(newValue)},CsComponentsInputV2.prototype.enable=function(newValue){this.wrapper.attr("disabled",!1),this.container.attr("disabled",!1),this.wrapper.removeClass("disabled"),newValue?this.container.val(newValue):this.container.val("")},CsComponentsInputV2.prototype.isDisabled=function(){return this.wrapper.hasClass("disabled")},CsComponentsInputV2.prototype.isEnabled=function(){return!this.isDisabled()},CsComponentsInputV2.prototype.showError=function(){this.wrapper.addClass("form-error"),this.options.hasError=!0},CsComponentsInputV2.prototype.hideError=function(){this.wrapper.removeClass("form-error"),this.options.hasError=!1},CsComponentsInputV2.prototype.readonly=function(active,newValue){"undefined"!=typeof active&&active?(this.container.attr("readonly",!0),this.container.addClass("disabled")):(this.container.removeAttr("readonly"),this.container.removeClass("disabled")),"undefined"!=typeof newValue&&newValue&&this.container.val(newValue)},CsComponentsInputV2.prototype.reset=function(){this.container.val(""),this.options.maxLength&&this.maxLength.updateCountContainer(this.options.maxLength),this.options.resizable&&this.resizeHandler.resizeTextarea()},CsComponentsInputV2.prototype.getValueCount=function(){return this.container.val().length},CsComponentsInputV2.prototype.validateField=function(params){return this.options.maxLength&&this.container.val().length>this.options.maxLength?(this.container.focus(),!1):this},CsComponentsInputV2.prototype.focus=function(params){this.container.focus()},CsComponentsInputV2.prototype.setMaxLength=function(val){this.options.maxLength||(this.options.maxLength=val,this.maxLength=this._parent.getInputMaxLength(this.containerId,{version:2,maxLength:this.options.maxLength,showTick:this.options.showTick,fullWidth:this.options.fullWidth})),this.maxLength.options.maxLength=val,this.options.maxLength=val,this.reset()},CsComponentsInputV2.prototype.buildAttachment=function(){this.inputAttachment=$("<span />",{"class":"attachment"}),"undefined"==typeof this.options.attachment.position||"left"==this.options.attachment.position?this.inputAttachment.prependTo(this.wrapper):"right"==this.options.attachment.position&&(this.inputAttachment.addClass("right"),this.inputAttachment.appendTo(this.wrapper)),"string"==typeof this.options.attachment.text&&""!=this.options.attachment.text&&this.inputAttachment.text(this.options.attachment.text),"string"==typeof this.options.attachment.customClassName&&this.inputAttachment.addClass(this.options.attachment.customClassName)},CsComponentsInputV2.prototype.buildIcon=function(iconContainer,iconOptions){if("undefined"!=typeof iconOptions.fa){var icon=$("<i />",{"class":"fa "+iconOptions.fa}).appendTo(iconContainer);"string"==typeof iconOptions.color&&icon.css("color",iconOptions.color)}else if("undefined"!=typeof iconOptions.svg){var icon=$("<img />",{src:iconOptions.svg}).appendTo(iconContainer);"number"==typeof iconOptions.width&&icon.css({width:iconOptions.width+"px"}),"number"==typeof iconOptions.height&&icon.css({height:iconOptions.height+"px"})}else if("undefined"!=typeof iconOptions.sprite){var icon=$('<svg class="svg-sprite"><use xlink:href="#sprite-'+iconOptions.sprite+'"></use></svg>').appendTo(iconContainer),size=!1;hasWidth=!1,hasHeight=!1,"number"==typeof iconOptions.width&&(hasWidth=!0,size=iconOptions.width,icon.width(iconOptions.width)),"number"==typeof iconOptions.height&&(hasHeight=!0,!1!==size&&(size=iconOptions.height),icon.height(iconOptions.height)),!1!==size&&(hasWidth||icon.width(size),hasHeight||icon.height(size)),"string"==typeof iconOptions.color&&(0===iconOptions.color.indexOf("#")||0===iconOptions.color.indexOf("rgba(")?icon.css("fill",iconOptions.color):icon.attr("class","svg-sprite sprite-color-"+iconOptions.color))}"undefined"!=typeof icon&&"undefined"!=typeof iconOptions.css&&icon.css(iconOptions.css)},CsComponentsInputV2.prototype.getWrapperId=function(){return this.wrapper.attr("id")},CsComponentsInputMaxLengthV2.prototype.getValueLength=function(e){return this.container.val().length},CsComponentsInputMaxLengthV2.prototype.getCharactersLeftNum=function(e){return this.options.maxLength-this.getValueLength()},CsComponentsInputMaxLengthV2.prototype.getCharacterCountValidation=function(e){return this.options.maxLength-this.getValueLength()>=0?!0:!1},CsComponentsInputMaxLengthV2.prototype.updateCountContainer=function(val){val>=0?this.countContainer.removeClass("count-negative").addClass("count-positive"):this.countContainer.removeClass("count-positive").addClass("count-negative"),this.countContainer.text(val)},CsComponentsDropdownV2.prototype.preselectElement=function(num){this.preselectedIndex=num;for(var i in this.listContainer.elements)this.listContainer.elements[i].removeClass("hover");num!==!1&&this.listContainer.elements[this.preselectedIndex].addClass("hover")},CsComponentsDropdownV2.prototype.clearSearchContainer=function(){"undefined"!=typeof this.searchContainer&&this.searchContainer.val("")},CsComponentsDropdownV2.prototype.onElementClick=function(e,i){var old_index=this.selectedIndex;if(this.options.buttonBehaviour){if(this.list[i].onClick){var elementClickTemp=this.list[i].onClick;elementClickTemp(this.list[i])}this.options.buttonUpdateCaption&&(this.selectedIndex=i,this.updateCaption(),old_index!=i&&(this.onChange(this.list[this.selectedIndex]),this.options.buttonHideSelected&&(this.listContainer.elements[old_index].show(),this.listContainer.elements[i].hide())),this.onSelect(this.list[this.selectedIndex]),this.options.onClick=this.list[i].onClick)}else{if(this.selectedIndex=i,this.list[this.selectedIndex].href)return void(location.href=this.list[this.selectedIndex].href);this.list[this.selectedIndex].onClick&&(this.onElementClickTemp=this.list[this.selectedIndex].onClick,this.onElementClickTemp(this.list[this.selectedIndex])),this.valueContainer&&this.valueContainer.val(this.list[this.selectedIndex].value),this.updateCaption(),old_index!=i&&this.onChange(this.list[this.selectedIndex]),this.onSelect(this.list[this.selectedIndex])}this.isOpened=!1,this.container.removeClass(this.options.openedClassName)},CsComponentsDropdownV2.prototype.setDropItemText=function(i,text){return this.list[i]?(this.list[i].text=text,void this.listContainer.elements[i].textContainer.text(text)):!1},CsComponentsDropdownV2.prototype.setDropItemValue=function(i,value){return this.list[i]?void(this.list[i].value=value):!1},CsComponentsDropdownV2.prototype.setDropItemRightText=function(i,text){return this.list[i]?(this.list[i].rightText=text,void("undefined"!=typeof this.listContainer.elements[i].textRightContainer?this.listContainer.elements[i].textRightContainer.text(text):this.listContainer.elements[i].textRightContainer=$("<span />",{"class":"alt",text:text}).appendTo(this.listContainer.elements[i]))):!1},CsComponentsDropdownV2.prototype.onListItemMouseOver=function(i){this.listItemMouseOverTemp=this.list[i].onMouseOver,this.listItemMouseOverTemp(this.list[i],i)},CsComponentsDropdownV2.prototype.onListItemMouseOut=function(i){this.onListItemMouseOutTemp=this.list[i].onMouseOut,this.onListItemMouseOutTemp(this.list[i],i)},CsComponentsDropdownV2.prototype.getValue=function(){return!1===this.selectedIndex?"":this.list[this.selectedIndex].value},CsComponentsDropdownV2.prototype.hasValue=function(){return!1===this.selectedIndex?!1:""==$.trim(this.getValue())?!1:!0},CsComponentsDropdownV2.prototype.getIndexByValue=function(value){if("undefined"==typeof value)return!1;for(var j in this.list)if(this.list[j].value==value)return j;return!1},CsComponentsDropdownV2.prototype.getText=function(){return this.list[this.selectedIndex].text},CsComponentsDropdownV2.prototype.selectOption=function(i,triggerEvents){if(i>this.list.length-1)return!1;var old_index=this.selectedIndex;this.selectedIndex=i,this.valueContainer&&this.valueContainer.val(this.list[this.selectedIndex].value),this.isOpened=!1,this.container.removeClass(this.options.openedClassName),("boolean"!=typeof triggerEvents||!0===triggerEvents)&&(old_index!=i&&this.onChange(this.list[this.selectedIndex]),this.onSelect(this.list[this.selectedIndex])),this.updateCaption()},CsComponentsDropdownV2.prototype.onWindowObjectClick=function(e){if(this.isOpened){var close_drop=!0;if(e.target.id==this.id)return void(close_drop=!1);var el_id2=$(e.target).parents("#"+this.id).attr("id");if(el_id2)return void(close_drop=!1);close_drop&&this.onBlur(e)}},CsComponentsDropdownV2.prototype.onBlur=function(e){this.isOpened=!1,this.isFocused=!1,this.isClicked=!1,this.container.removeClass(this.options.openedClassName),this.options.onBlur.call(e,this)},CsComponentsDropdownV2.prototype.onDropdownClick=function(e){if(this.options.disabled)return!1;if(this.isOpened)this.container.removeClass(this.options.openedClassName),this.isOpened=!1,this.isFocused||"undefined"==typeof this.searchContainer||this.searchContainer.focus(),this.options.titleStay||this.updateCaption();else{if(this.isOpened=!0,this.container.addClass(this.options.openedClassName),this.hiddenContainer.css("top",this.captionContainer.outerHeight()-1+"px"),this.hiddenContainer.css("bottom",""),this.options.dropUp){var winBottom=$(window).scrollTop()+$(window).height(),eleBottom=this.hiddenContainer.offset().top+this.hiddenContainer.outerHeight(),compareBottom=this.options.dropRelativeTo?this.options.dropRelativeTo.offset().top+this.options.dropRelativeTo.height():winBottom;eleBottom>compareBottom&&(this.hiddenContainer.css("top",""),this.hiddenContainer.css("bottom",this.captionContainer.outerHeight()-1+"px"))}var newWidth=this.calcDropWidth();if(newWidth&&this.hiddenContainer.css("width",newWidth+"px"),this.hiddenContainer.css("min-width",this.container.outerWidth()+"px"),this.isFocused||"undefined"==typeof this.searchContainer||this.searchContainer.focus(),!this.options.noSelectable){for(var i in this.listContainer.elements)this.listContainer.elements[i].removeClass("selected");!1!==this.selectedIndex&&this.listContainer.elements[this.selectedIndex].addClass("selected")}if(this.options.scrollToSelected&&this.options.maxDropHeight&&(this.hiddenContainer.scrollTop(0),!1!==this.selectedIndex)){var topPosition=this.listContainer.elements[parseInt(this.selectedIndex)].position().top;this.hiddenContainer.scrollTop(topPosition)}}},CsComponentsDropdownV2.prototype.calcDropWidth=function(){var prevWidth=this.hiddenContainer.get(0).style.width;prevWidth="string"==typeof prevWidth&&-1!=prevWidth.indexOf("px")?parseInt(prevWidth.replace("px")):0,this.hiddenContainer.css("min-width","").css("width",""),this.listContainer.css("min-width","").css("width","");var maxHeight=this.hiddenContainer.css("max-height");maxHeight="string"==typeof maxHeight&&-1!=maxHeight.indexOf("px")?parseInt(maxHeight.replace("px","")):0,this.hiddenContainer.css("max-height",""),this.hiddenContainer.css("max-width",""),this.hiddenContainer.css("display","block");var listHeight=this.listContainer.height(),listWidth=this.listContainer.width();this.hiddenContainer.css("display",""),this.options.maxDropWidth&&this.hiddenContainer.css("max-width",this.options.maxDropWidth+"px");var forceWidth=!1;return maxHeight>0&&(listHeight>maxHeight&&listWidth+20>this.container.outerWidth()&&(forceWidth=listWidth+20),this.hiddenContainer.css("max-height",maxHeight+"px")),forceWidth&&this.options.maxDropWidth&&forceWidth>this.options.maxDropWidth&&(forceWidth=this.options.maxDropWidth),forceWidth&&forceWidth>prevWidth?forceWidth:prevWidth?prevWidth:!1},CsComponentsDropdownV2.prototype.setCustomTitle=function(text){var newCaption=!1;"string"==typeof text&&(newCaption=this.options.cropTitle&&text.length>this.options.cropTitle?text.substr(0,this.options.cropTitle)+"...":text),newCaption?("undefined"!=typeof this.captionTitleContainer&&this.captionTitleContainer.text(newCaption),this.options.noTitle&&(this.captionContainer.attr("title",newCaption),this._parent.titleTips(this.captionContainer))):this.captionContainer.removeAttr("title");
},CsComponentsDropdownV2.prototype.updateCaption=function(){var self=this;if(!this.options.titleStay){var captionTitle="";captionTitle=this.list[this.selectedIndex].text.replace(/&gt;/g,">"),captionTitle=captionTitle.replace(/&lt;/g,"<"),this.setCustomTitle(captionTitle),"string"!=typeof this.list[this.selectedIndex].hoverText||""==this.list[this.selectedIndex].hoverText||this.options.titleStay?this.captionContainer.off("mouseover.captionHoverText"):(this.captionContainer.off("mouseover.captionHoverText"),this.captionContainer.on("mouseover.captionHoverText",function(){self.captionContainer.css("width",self.captionContainer.width()+"px"),self.setCustomTitle(self.list[self.selectedIndex].hoverText)})),"string"!=typeof this.list[this.selectedIndex].hoverText||""==this.list[this.selectedIndex].hoverText||this.options.titleStay?this.captionContainer.off("mouseout.captionHoverText"):(this.captionContainer.off("mouseout.captionHoverText"),this.captionContainer.on("mouseout.captionHoverText",function(){self.setCustomTitle(self.list[self.selectedIndex].text),self.captionContainer.css("width","")})),"undefined"!=typeof this.list[this.selectedIndex].icon&&1==this.options.useIcons?("undefined"!=typeof this.captionIcon?this.captionIcon.empty():this.buildCaptionIcon(),this.buildIcon(this.captionIcon,this.list[this.selectedIndex].icon)):"undefined"!=typeof this.captionIcon&&(this.captionIcon.remove(),delete this.captionIcon)}},CsComponentsDropdownV2.prototype.disable=function(){this.container.addClass("disabled"),this.captionContainer.attr("disabled",!0),this.options.disabled=!0},CsComponentsDropdownV2.prototype.enable=function(){this.container.removeClass("disabled"),this.captionContainer.attr("disabled",!1),this.options.disabled=!1},CsComponentsDropdownV2.prototype.showError=function(){this.container.addClass("form-error"),this.options.hasError=!0},CsComponentsDropdownV2.prototype.hideError=function(){this.container.removeClass("form-error"),this.options.hasError=!1},CsComponentsDropdownV2.prototype.buildCaptionIcon=function(){this.captionIcon=$("<span />",{"class":"icon"}),"undefined"==typeof this.options.icon.position||"left"==this.options.icon.position?"undefined"!=typeof this.captionArrow&&this.options.arrowLeft?this.captionIcon.insertAfter(this.captionArrow):this.captionIcon.prependTo(this.captionContainer):"right"==this.options.icon.position&&(this.captionIcon.addClass("right"),"undefined"==typeof this.captionArrow||this.options.arrowLeft?this.captionIcon.appendTo(this.captionContainer):this.captionIcon.insertBefore(this.captionArrow)),"string"==typeof this.options.icon.customClassName&&this.captionIcon.addClass(this.options.icon.customClassName)},CsComponentsDropdownV2.prototype.buildIcon=function(iconContainer,iconOptions){if("undefined"!=typeof iconOptions.fa){var icon=$("<i />",{"class":"fa "+iconOptions.fa}).appendTo(iconContainer);"string"==typeof iconOptions.color&&icon.css("color",iconOptions.color)}else if("undefined"!=typeof iconOptions.svg){var icon=$("<img />",{src:iconOptions.svg}).appendTo(iconContainer);"number"==typeof iconOptions.width&&icon.css({width:iconOptions.width+"px"}),"number"==typeof iconOptions.height&&icon.css({height:iconOptions.height+"px"})}else if("undefined"!=typeof iconOptions.sprite){var icon=$('<svg class="svg-sprite"><use xlink:href="#sprite-'+iconOptions.sprite+'"></use></svg>').appendTo(iconContainer),size=!1;hasWidth=!1,hasHeight=!1,"number"==typeof iconOptions.width&&(hasWidth=!0,size=iconOptions.width,icon.width(iconOptions.width)),"number"==typeof iconOptions.height&&(hasHeight=!0,!1!==size&&(size=iconOptions.height),icon.height(iconOptions.height)),!1!==size&&(hasWidth||icon.width(size),hasHeight||icon.height(size)),"string"==typeof iconOptions.color&&(0===iconOptions.color.indexOf("#")||0===iconOptions.color.indexOf("rgba(")?icon.css("fill",iconOptions.color):icon.attr("class","svg-sprite sprite-color-"+iconOptions.color))}},CsComponentsDropdownV2.prototype.getWrapperId=function(){return this.container.attr("id")},CsComponentsCheckboxV2.prototype.defaultOnClick=function(e){this.checked?this.uncheck():this.check(),this.onUserClick(e)},CsComponentsCheckboxV2.prototype.isChecked=function(){return this.checked},CsComponentsCheckboxV2.prototype.getValue=function(forceReturn){return this.value?this.isChecked()?this.value:"boolean"==typeof forceReturn&&1==forceReturn?this.value:"":""},CsComponentsCheckboxV2.prototype.hasValue=function(){return""==$.trim(this.getValue())?!1:!0},CsComponentsCheckboxV2.prototype.triggerClick=function(){this.defaultOnClick()},CsComponentsCheckboxV2.prototype.check=function(e){this.checked=!0,this.container.addClass("checked"),this.checkboxInput&&this.checkboxInput.prop("checked",!0),this.onUserCheck()},CsComponentsCheckboxV2.prototype.uncheck=function(e){this.checked=!1,this.container.removeClass("checked"),this.checkboxInput&&this.checkboxInput.prop("checked",!1),this.onUserUncheck()},CsComponentsCheckboxV2.prototype.disable=function(){this.disabled=!0,this.container.attr("disabled",!0),this.container.addClass("disabled"),this.checkboxInput&&this.checkboxInput.attr("disabled",!0)},CsComponentsCheckboxV2.prototype.enable=function(){this.disabled=!1,this.container.attr("disabled",!1),this.container.removeClass("disabled"),this.checkboxInput&&this.checkboxInput.attr("disabled",!1)},CsComponentsCheckboxV2.prototype.getWrapperId=function(){return this.container.attr("id")},CsComponentsRadios.prototype.getValue=function(){if(this.radios)for(var i in this.radios)if(this.radios[i].isChecked())return this.radios[i].getValue()},CsComponentsRadioV2.prototype.defaultOnClick=function(){var was_checked=this.checked;this.checked||this.check(),this.onUserClick(was_checked)},CsComponentsRadioV2.prototype.getValue=function(){return this.radioInput.val()},CsComponentsRadioV2.prototype.hasValue=function(){return""==$.trim(this.getValue())?!1:!0},CsComponentsRadioV2.prototype.triggerClick=function(){this.defaultOnClick()},CsComponentsRadioV2.prototype.check=function(e){if(this._parent._parent.radios[this.idName])for(var i in this._parent._parent.radios[this.idName])this._parent._parent.radios[this.idName][i].uncheck();this.container.addClass("checked"),this.radioInput&&this.radioInput.prop("checked",!0),this.checked=!0},CsComponentsRadioV2.prototype.uncheck=function(e){this.checked=!1,this.container.removeClass("checked"),this.radioInput&&this.radioInput.prop("checked",!1)},CsComponentsRadioV2.prototype.isChecked=function(){return this.checked},CsComponentsRadioV2.prototype.disable=function(){this.disabled=!0,this.container.attr("disabled",!0),this.container.addClass("disabled"),this.radioInput&&this.radioInput.attr("disabled",!0)},CsComponentsRadioV2.prototype.enable=function(){this.disabled=!1,this.container.attr("disabled",!1),this.container.removeClass("disabled"),this.radioInput&&this.radioInput.attr("disabled",!1)},CsComponentsRadioV2.prototype.getWrapperId=function(){return this.container.attr("id")},CsComponentsButtonV2.prototype.showLoader=function(){"undefined"==typeof this.loaderContainer&&(this.loaderContainer=$("<span />",{"class":"progress-indicator"}).hide().prependTo(this.captionContainer),$("<i />",{"class":"fa fa-refresh fa-spin"}).prependTo(this.loaderContainer)),this.captionTitleContainer.hide(),"undefined"!=typeof this.iconContainer&&this.iconContainer.hide(),this.loaderContainer.show()},CsComponentsButtonV2.prototype.hideLoader=function(){"undefined"!=typeof this.loaderContainer&&this.loaderContainer.hide(),this.captionTitleContainer.show(),"undefined"!=typeof this.iconContainer&&this.iconContainer.show()},CsComponentsButtonV2.prototype.disable=function(){this.container.addClass("disabled"),this.container.attr("disabled",!0),this.disabled=!0},CsComponentsButtonV2.prototype.enable=function(){this.container.removeClass("disabled"),this.container.attr("disabled",!1),this.disabled=!1},CsComponentsButtonV2.prototype.setTitle=function(title){title&&this.captionTitleContainer.text(title)},CsComponentsButtonV2.prototype.getTitle=function(){return this.captionTitleContainer.text()},CsComponentsButtonV2.prototype.hide=function(){this.container.hide()},CsComponentsButtonV2.prototype.show=function(){this.container.show()},CsComponentsButtonV2.prototype.click=function(){this.container.trigger("click")},CsComponentsButtonV2.prototype.buildCaptionIcon=function(){this.captionIcon=$("<span />",{"class":"icon"}),"undefined"==typeof this.options.icon.position||"left"==this.options.icon.position?this.captionIcon.prependTo(this.captionContainer):"right"==this.options.icon.position&&(this.captionIcon.addClass("right"),this.captionIcon.appendTo(this.captionContainer)),"string"==typeof this.options.icon.customClassName&&this.captionIcon.addClass(this.options.icon.customClassName)},CsComponentsButtonV2.prototype.buildIcon=function(iconContainer,iconOptions){if("undefined"!=typeof iconOptions.fa){var icon=$("<i />",{"class":"fa "+iconOptions.fa}).appendTo(iconContainer);"string"==typeof iconOptions.color&&icon.css("color",iconOptions.color)}else if("undefined"!=typeof iconOptions.svg){var icon=$("<img />",{src:iconOptions.svg}).appendTo(iconContainer);"number"==typeof iconOptions.width&&icon.css({width:iconOptions.width+"px"}),"number"==typeof iconOptions.height&&icon.css({height:iconOptions.height+"px"})}else if("undefined"!=typeof iconOptions.sprite){var icon=$('<svg class="svg-sprite"><use xlink:href="#sprite-'+iconOptions.sprite+'"></use></svg>').appendTo(iconContainer),size=!1;hasWidth=!1,hasHeight=!1,"number"==typeof iconOptions.width&&(hasWidth=!0,size=iconOptions.width,icon.width(iconOptions.width)),"number"==typeof iconOptions.height&&(hasHeight=!0,!1!==size&&(size=iconOptions.height),icon.height(iconOptions.height)),!1!==size&&(hasWidth||icon.width(size),hasHeight||icon.height(size)),"string"==typeof iconOptions.color&&(0===iconOptions.color.indexOf("#")||0===iconOptions.color.indexOf("rgba(")?icon.css("fill",iconOptions.color):icon.attr("class","svg-sprite sprite-color-"+iconOptions.color))}"undefined"!=typeof icon&&"undefined"!=typeof iconOptions.css&&icon.css(iconOptions.css)},CsComponentsButtonV2.prototype.setIcon=function(iconOptions){"undefined"==typeof this.captionIcon&&this.buildCaptionIcon(),this.captionIcon.empty(),this.buildIcon(this.captionIcon,iconOptions)},CsComponentsButtonV2.prototype.getWrapperId=function(){return this.container.attr("id")},CsComponentsButtonV2.prototype.setupLoaderToggling=function(){var self=this;$(document).off("ajaxSend."+self.id).on("ajaxSend."+self.id,function(e,xhr,settings){$("#"+self.id).length||($(document).off("ajaxSend."+self.id),$(document).off("ajaxComplete."+self.id)),self.normalizeLoaderUrl(self.options.loaderToggleUrl)==self.normalizeLoaderUrl(settings.url)&&(self.disable(),self.showLoader())}),$(document).off("ajaxComplete."+self.id).on("ajaxComplete."+self.id,function(e,xhr,settings){self.normalizeLoaderUrl(self.options.loaderToggleUrl)==self.normalizeLoaderUrl(settings.url)&&(self.enable(),self.hideLoader())})},CsComponentsButtonV2.prototype.normalizeLoaderUrl=function(url){if(""==$.trim(url))return!1;var clean_prefixes=["site_url","site_url_ssl","site_url_main","resource_url"];for(var i in clean_prefixes)if("undefined"!=typeof cs.options[clean_prefixes[i]]&&""!=$.trim(cs.options[clean_prefixes[i]])&&0==url.indexOf(cs.options[clean_prefixes[i]])){url=url.substr(cs.options[clean_prefixes[i]].length);break}return 0!=url.indexOf("/")&&(url="/"+url),url},CsComponentsAutocompleteV2.prototype.disable=function(){this.wrapper.attr("disabled",!0),this.container.attr("disabled",!0),this.disabled=!0,this.wrapper.addClass("disabled"),"undefined"!=typeof this.crossContainer&&this.crossContainer.css("visibility","hidden")},CsComponentsAutocompleteV2.prototype.enable=function(){this.wrapper.attr("disabled",!1),this.container.attr("disabled",!1),this.disabled=!1,this.wrapper.removeClass("disabled"),"undefined"!=typeof this.crossContainer&&this.crossContainer.css("visibility","visible")},CsComponentsAutocompleteV2.prototype.setupAutocomplete=function(){function flushCache(){cache={},cache.data={},cache.length=0}function defaultOnChange(from_autocomplete){if(self.onChange(),46==lastKeyPressCode||lastKeyPressCode>8&&32>lastKeyPressCode&&"none"!=self.hiddenContainer.css("display"))return self.hiddenContainer.hide();self.options.selectOnly&&(from_autocomplete||self.hiddenInput.val(""),self.styleSet());var v=self.container.val();v!=prev&&(prev=v,v.length>=self.options.minChars?(self.container.addClass(self.options.loadingClass),requestData(v)):(self.container.removeClass(self.options.loadingClass),self.hiddenContainer.hide()))}function selectCurrent(){if("number"==typeof self.preselectedIndex)return!0;if(self.options.selectOnly){if(1==self.listContainer.length)return self.preselectedIndex=0,!0;if(self.options.selectFirst&&self.listContainer.length>1)return self.preselectedIndex=1,!0}return!1}function createSelection(start,end){var field=self.container.get(0);if(field.createTextRange){var selRange=field.createTextRange();selRange.collapse(!0),selRange.moveStart("character",start),selRange.moveEnd("character",end),selRange.select()}else field.setSelectionRange?field.setSelectionRange(start,end):field.selectionStart&&(field.selectionStart=start,field.selectionEnd=end);field.focus()}function autoFill(sValue){8!=lastKeyPressCode&&(self.container.val(self.container.val()+sValue.substring(prev.length)),createSelection(prev.length,sValue.length))}function showResults(){var newWidth=self.calcDropWidth();newWidth&&self.hiddenContainer.css("width",newWidth+"px");var pos=findPos(self.container),newTop=pos.y+self.wrapper.height()-1,newLeft=pos.x-parseInt(self.wrapper.css("border-left-width").replace("px",""));self.hiddenContainer.css({"min-width":self.wrapper.outerWidth()+"px",top:newTop+"px",left:newLeft+"px"}).show(),self.isOpened=!0,self.wrapper.addClass(self.options.openedClassName)}function hideResults(){timeout&&clearTimeout(timeout),timeout=setTimeout(hideResultsNow,200)}function hideResultsNow(){timeout&&clearTimeout(timeout),self.wrapper.removeClass(self.options.loadingClass),self.hiddenContainer.is(":visible")&&self.hiddenContainer.hide()}function parseData(data){if(!data)return null;for(var parsedData=[],rows=data.split(self.options.lineSeparator),i=0;i<rows.length;i++){var row=$.trim(rows[i]);if(row){row=row.split(self.options.cellSeparator);var elem={text:row[0]};row[1]&&(elem.value=row[1]);var extra=null;if(row.length>1){extra=[];for(var j=1;j<row.length;j++)extra.push(row[j])}extra&&extra.length>0&&(elem.extra=extra),parsedData.push(elem)}}return parsedData}function updateResults(q,data){if(data){if(self.container.removeClass(self.options.loadingClass),self.hiddenContainer.empty(),self.list=[],self.listContainer=null,!hasFocus||0==data.length)return hideResultsNow();self.list=data,dataToDom(),self.options.autoFill&&self.container.val().toLowerCase()==q.toLowerCase()&&autoFill(data[0].text),showResults()}else hideResultsNow()}function dataToDom(){if(self.hiddenContainer.empty(),self.listContainer=null,0!=self.list.count){self.listContainer=$("<ul />",{"class":"results"}).appendTo(self.hiddenContainer),self.listContainer.elements=[];var pos=0;for(var i in self.list)if(self.listContainer.elements[i]=$("<li />",{rel:i}).appendTo(self.listContainer),"function"!=typeof self.options.formatItem?self.listContainer.elements[i].textContainer=$("<span />",{text:self.list[i].text}).addClass("entry").prependTo(self.listContainer.elements[i]):self.listContainer.elements[i].html(self.options.formatItem(self.list[i],i)),self.listContainer.elements[i].bind("click",function(e){self.onElementClick(e,$(this).attr("rel"))}),self.listContainer.elements[i].bind("mouseover",function(e){self.preselectElement($(this).attr("rel"))}),pos++,"number"==typeof self.options.maxItemsToShow&&0<self.options.maxItemsToShow&&pos==self.options.maxItemsToShow)break}}function requestData(q){self.options.matchCase||(q=q.toLowerCase());var data=self.options.cacheLength?loadFromCache(q):null;self.options.alwaysQuery&&data&&0==data.length&&(data=null),data?updateResults(q,data):"string"==typeof self.options.url&&self.options.url.length>0?(currentGetRequest&&currentGetRequest.abort(),currentGetRequest=$.get(makeUrl(q),function(data){data=parseData(data),addToCache(q,data),updateResults(q,data)})):self.container.removeClass(self.options.loadingClass)}function makeUrl(q){var urlQueryString=self.options._parent._parent.algorithms().parseUrl(self.options.url).search,url=self.options.url+(urlQueryString?"&":"?")+"q="+encodeURI(q);for(var i in self.options.extraParams)url+="&"+i+"="+encodeURI(self.options.extraParams[i]);return url}function loadFromCache(q){if(!q)return null;if(cache.data[q])return cache.data[q];if(self.options.matchSubset)for(var i=q.length-1;i>=self.options.minChars;i--){var qs=q.substr(0,i),c=cache.data[qs];if(c){for(var csub=[],j=0;j<c.length;j++)matchSubset(c[j].text,q)&&csub.push(c[j]);return csub}}return null}function matchSubset(s,sub){self.options.matchCase||(s=s.toLowerCase());var i=s.indexOf(sub);return-1==i?!1:0==i||self.options.matchContains}function findValueCallback(q,data){if(data&&self.container.removeClass(self.options.loadingClass),data)for(var i in data)return void(data[i].text.toLowerCase()==q.toLowerCase()&&self.options.onFindValue&&setTimeout(function(){self.options.onFindValue(data[i])},1))}function addToCache(q,data){data&&q&&self.options.cacheLength&&(!cache.length||cache.length>self.options.cacheLength?(flushCache(),cache.length++):cache[q]||cache.length++,cache.data[q]=data)}function findPos(obj){var offset=obj.offset(),top=offset.top,left=offset.left;return{x:left,y:top}}var self=this;this.container.attr("autocomplete","off"),this.list=[],this.listContainer=null,this.preselectedIndex=!1,this.hiddenInput=!1,(this.options.name||this.options.id)&&(this.hiddenInput=$("<input />",{value:this.options.value||"",type:"hidden"}).insertAfter(this.container),this.options.name&&(this.hiddenInput.attr("name",this.options.name),this.hiddenInput.attr("id",this.options.id))),this.styleSet(),this.options.text&&this.container.val(this.options.text),this.hiddenContainer=$("<div />",{"class":this.options.resultsClass}).css({display:"none",position:"absolute","z-index":"100"}).appendTo("body"),this.options.autocompleteWidth>0&&this.hiddenContainer.css("width",this.options.autocompleteWidth),this.options.maxDropHeight>0&&this.hiddenContainer.css("max-height",this.options.maxDropHeight+"px"),0!=this.options.alwaysQuery&&(this.options.alwaysQuery=!0);var timeout=null,prev="",cache={},hasFocus=!1,hasFocusDelayed=!1,lastKeyPressCode=null,currentGetRequest=null;if(flushCache(),null!=this.options.data){var sFirstChar="",stMatchSets={};"string"!=typeof this.options.url&&(this.options.cacheLength=1);for(var i=0;i<this.options.data.length;i++){var elem={};"string"==typeof this.options.data[i]?elem.text=this.options.data[i]:elem=this.options.data[i],elem.text.length>0&&(sFirstChar=elem.text.substring(0,1).toLowerCase(),stMatchSets[sFirstChar]||(stMatchSets[sFirstChar]=[]),stMatchSets[sFirstChar].push(elem))}for(var k in stMatchSets)this.options.cacheLength++,addToCache(k,stMatchSets[k])}this.container.keydown(function(e){switch(lastKeyPressCode=e.keyCode,e.keyCode){case 38:if(e.preventDefault(),self.preselectedIndex!==!1&&self.preselectedIndex>0)return void self.preselectElement(self.preselectedIndex-1);if(0==self.preselectedIndex)return void self.preselectElement(!1);break;case 40:if(e.preventDefault(),self.preselectedIndex!==!1&&self.preselectedIndex<self.listContainer.elements.length-1)return void self.preselectElement(self.preselectedIndex+1);if(0==self.preselectedIndex)return void self.preselectElement(0);break;case 9:case 13:case 33:case 34:selectCurrent()&&(self.container.get(0).focus(),self.preselectedIndex!==!1?self.onElementClick(e,self.preselectedIndex):self.onElementClick(e,self.selectedIndex));break;default:self.preselectedIndex=!1,timeout&&clearTimeout(timeout),timeout=setTimeout(function(){defaultOnChange()},self.options.delay)}}).mouseup(function(e){hasFocusDelayed||e.preventDefault()}).focus(function(){hasFocus=!0,setTimeout(function(){hasFocusDelayed=!0},500),(self.options.selectText||self.options.selectOnly)&&self.container.select(),self.wrapper.addClass("focused")}).blur(function(){hasFocus=!1,hasFocusDelayed=!1,self.container.val()||self.clearValue(),self.options.selectOnly&&(self.options.allowEmail&&cs.algorithms().validateEmail(self.container.val())||self.options.allowText||self.hiddenInput.val()||self.clearValue()),self.wrapper.removeClass("focused"),hideResults(),self.options.onBlur()}),hideResultsNow(),this.flushCache=function(){flushCache()},this.setExtraParams=function(p){self.options.extraParams=p},this.findValue=function(){var q=self.container.val();self.options.matchCase||(q=q.toLowerCase());var data=self.options.cacheLength?loadFromCache(q):null;data?findValueCallback(q):"string"==typeof self.options.url&&self.options.url.length>0?$.get(makeUrl(q),function(data){data=parseData(data),addToCache(q,data),findValueCallback(q,data)}):findValueCallback(q)},this.defaultOnChange=defaultOnChange},CsComponentsAutocompleteV2.prototype.calcDropWidth=function(){if("number"==typeof this.options.autocompleteWidth&&this.options.autocompleteWidth>0)return this.options.autocompleteWidth;var prevWidth=this.hiddenContainer.get(0).style.width;prevWidth="string"==typeof prevWidth&&-1!=prevWidth.indexOf("px")?parseInt(prevWidth.replace("px")):0,this.hiddenContainer.css("min-width","").css("width",""),this.listContainer.css("min-width","").css("width","");var maxHeight=this.hiddenContainer.css("max-height");maxHeight="string"==typeof maxHeight&&-1!=maxHeight.indexOf("px")?parseInt(maxHeight.replace("px","")):0;var forceWidth=!1;return maxHeight>0&&(this.hiddenContainer.css("max-height",""),this.listContainer.height()>maxHeight&&this.listContainer.width()+20>this.wrapper.outerWidth()&&(forceWidth=this.listContainer.width()+20),this.hiddenContainer.css("max-height",maxHeight+"px")),forceWidth&&this.options.maxDropWidth&&forceWidth>this.options.maxDropWidth&&(forceWidth=this.options.maxDropWidth),forceWidth&&forceWidth>prevWidth?forceWidth:prevWidth?prevWidth:!1},CsComponentsAutocompleteV2.prototype.styleSet=function(){this.options.selectOnly&&(this.hiddenInput.val()?(this.wrapper.addClass("set"),this.crossContainer&&this.crossContainer.show()):(this.wrapper.removeClass("set"),this.crossContainer&&this.crossContainer.hide()))},CsComponentsAutocompleteV2.prototype.getValue=function(returnAsObject){"boolean"!=typeof returnAsObject&&(returnAsObject=!1);var result={text:"",value:""};return result.text=this.container.val(),this.hiddenInput?result.value=this.hiddenInput.val():result.value=this.container.val(),returnAsObject?result:[result.text,result.value]},CsComponentsAutocompleteV2.prototype.hasValue=function(){var val=this.getValue();if(this.options.selectOnly){if(""==$.trim(val[1]))return!1}else if(""==$.trim(val[0]))return!1;return!0},CsComponentsAutocompleteV2.prototype.clearValue=function(){this.hiddenInput.val(""),this.container.val(""),this.selectedIndex=!1,this.preselectedIndex=!1,this.styleSet()},CsComponentsAutocompleteV2.prototype.setValue=function(text,value){this.container.val(text),this.hiddenInput&&$("#"+this.hiddenInput.attr("id")).val(value),this.styleSet()},CsComponentsAutocompleteV2.prototype.preselectElement=function(num){this.preselectedIndex=num;for(var i in this.listContainer.elements)this.listContainer.elements[i].removeClass("focused");num!==!1&&this.listContainer.elements[this.preselectedIndex].addClass("focused")},CsComponentsAutocompleteV2.prototype.onElementClick=function(e,i){this.selectedIndex;this.selectedIndex=i,this.setValue(this.list[this.selectedIndex].text,"undefined"!=typeof this.list[this.selectedIndex].value?this.list[this.selectedIndex].value:this.list[this.selectedIndex].text),this.container.blur(),this.onSelect(this.list[this.selectedIndex]),this.defaultOnChange(!0),this.styleSet(),this.isOpened=!1,this.wrapper.removeClass(this.options.openedClassName),this.hiddenContainer.hide(),this.wrapper.removeClass(this.options.loadingClass)},CsComponentsAutocompleteV2.prototype.showError=function(){this.wrapper.addClass("form-error"),this.options.hasError=!0},CsComponentsAutocompleteV2.prototype.hideError=function(){this.wrapper.removeClass("form-error"),this.options.hasError=!1},CsComponentsAutocompleteV2.prototype.getWrapperId=function(){return this.wrapper.attr("id")},CsComponentsPopupV2.prototype.onWindowScroll=function(e){},CsComponentsPopupV2.prototype.secondsSincePopupOpened=function(href,options){var lastPopupOpened=this._parent._parent.window().getCookie("last-time-any-popup-opened");if(!lastPopupOpened)return 999999999999999;var lastOpenedDate=new Date(lastPopupOpened),nowDate=new Date,difference=nowDate.getTime()-lastOpenedDate.getTime();return difference?Math.floor(difference/1e3):void 0},CsComponentsPopupV2.prototype.display=function(href,options){var self=this,now=new Date;document.cookie="last-time-any-popup-opened="+now.toUTCString()+";path=/",this.popupOverlay&&this.destroy(),"undefined"==typeof options&&(options={}),this.options=jQuery.extend({},this.defaultOptions);for(var i in options)this.options[i]=options[i];this.options.html||(this.options.html=!1),this.options.closeOnBlur&&setTimeout(function(){$(document).on("click.popupCloser",function(e){self.onWindowObjectClick(e)})},5),"boolean"!=typeof options.allowUserClose&&"boolean"==typeof options.hideCross&&(this.options.allowUserClose=!options.hideCross),this.popupOverlay=$("<div />",{"class":"popup-overlay is-visible",id:"csPopupOverlay"}).css("display","none").appendTo("body"),this.popupContainer=$("<div />",{"class":"popup-container",id:"csPopupContainer"}).appendTo(this.popupOverlay),"string"==typeof this.options.customClassName&&this.popupContainer.addClass(this.options.customClassName),this.options.width&&this.popupContainer.css("max-width",this.options.width+"px"),1==this.options.fitContent&&this.popupOverlay.addClass("fit-content"),$("body").addClass("popup-open"),this.options.div?(this.popupOverlay.fadeIn("fast"),this.loadDiv(href)):this.options.html?(this.popupOverlay.fadeIn("fast"),this.loadHtml(href)):"string"==typeof this.options.media?(this.showLoader(),"image"==this.options.media?this.loadImage(href):"video"==this.options.media&&this.loadVideo(href)):(this.showLoader(),this.loadUrl(href))},CsComponentsPopupV2.prototype.closeOnEscape=function(e){this.options.allowUserClose&&this.options.closeOnEscape&&27==e.keyCode&&(this.options.onDismiss(),this.close({status:"cancel",on:"keypress_escape"}))},CsComponentsPopupV2.prototype.onWindowObjectClick=function(e){if(this.options.allowUserClose&&this.options.closeOnBlur&&this.popupOverlay){var close_drop=!0;if(e.target.id==this.popupContainer.attr("id"))return void(close_drop=!1);var el_id2=$(e.target).parents("#"+this.popupContainer.attr("id")).attr("id");if(el_id2)return void(close_drop=!1);var childDroppable=$(e.target).data("droppable")===!0?$(e.target):$(e.target).parents().filter(function(){return $(this).data("droppable")===!0});if(childDroppable.length){var is_me=$("#"+childDroppable.data("parent")).parents("#csPopupContainer").attr("id");if(is_me)return}close_drop&&(this.options.onDismiss(),this.close({status:"cancel",on:"mouse_blur"}))}},CsComponentsPopupV2.prototype.loadUrl=function(url){var self=this;"post"==this.options.requestMethod?this.currentRequest=$.post(url,this.options.postObject,function(response){self.urlResponse(response)}):this.currentRequest=$.get(url,function(response){self.urlResponse(response)})},CsComponentsPopupV2.prototype.loadDiv=function(divId){var self=this;if($("#"+divId).length){var div_val=$("#"+divId).clone(!0).show();div_val.find("script").remove(),self.urlResponse(div_val)}},CsComponentsPopupV2.prototype.loadHtml=function(html){var self=this;html&&self.urlResponse(html)},CsComponentsPopupV2.prototype.loadImage=function(url){var self=this;if(url)var image=$("<img />",{src:url}).css({position:"absolute","z-index":"-99999",left:"-50000px"}).appendTo(this.popupOverlay),checkInterval=setInterval(function(){if(0!=image.width()&&0!=image.height()){clearInterval(checkInterval);var newWidth=image.width(),newHeight=image.height();maxWidth=.8*$(window).width(),maxHeight=.8*$(window).height();var imageRatio=newWidth/newHeight,windowRatio=$(window).width()/$(window).height();imageRatio>=windowRatio&&newWidth>maxWidth&&(image.css("width",maxWidth+"px"),image.css("height","auto"),newWidth=maxWidth,newHeight=newWidth/imageRatio),windowRatio>=imageRatio&&newHeight>maxHeight&&(image.css("height",maxHeight+"px"),image.css("width","auto"),newHeight=maxHeight,newWidth=newHeight*imageRatio);var clone=image.clone().css({position:"","z-index":"",left:""});image.remove(),self.constructContent(clone)}},5)},CsComponentsPopupV2.prototype.loadVideo=function(url){var self=this;if(url){var videoRatio=1.77,newWidth=.8*$(window).width(),newHeight=newWidth/videoRatio;newHeight>.8*$(window).height()&&(newHeight=.8*$(window).height(),newWidth=newHeight*videoRatio);var video=$("<iframe/>",{width:newWidth,height:newHeight,src:url,frameborder:"0",allowfullscreen:!0});self.constructContent(video,!1,{width:newWidth,height:newHeight})}},CsComponentsPopupV2.prototype.urlResponse=function(response){try{var result=jQuery.parseJSON(response||"null");if(null!=result&&"undefined"!=typeof result.status&&"err"==result.status)return this.close({status:"err",on:"ajax_response"}),!1}catch(err){}if(this.options.div||this.options.html)this.constructContent(response);else{var self=this;setTimeout(function(){self.constructContent(response)},200)}},CsComponentsPopupV2.prototype.getContentProperties=function(loadingTempContent,contentSize){"boolean"!=typeof loadingTempContent&&(loadingTempContent=!1),"object"!=typeof contentSize&&(contentSize={}),this.options.width&&this.popupContainer.css("max-width",this.options.width+"px");var clone=this.popupContainer.clone().appendTo(this.popupOverlay),cloneContent=null;this.popupContainer.hide(),clone.hasClass("temp")&&clone.removeClass("temp"),clone.hasClass("preloading")&&clone.removeClass("preloading"),clone.find(".popup-loader").remove(),clone.find("#csPopupContentOld").remove(),clone.find("#csPopupContentTempOld").remove(),loadingTempContent?(clone.find("#csPopupContent").remove(),cloneContent=clone.find("#csPopupContentTemp")):(clone.find("#csPopupContentTemp").remove(),cloneContent=clone.find("#csPopupContent")),"number"==typeof this.options.width&&clone.css("width",this.options.width+"px"),"number"==typeof this.options.height&&clone.css("height",this.options.height+"px"),cloneContent.show(),"number"==typeof contentSize.width&&"number"==typeof contentSize.height&&(cloneContent.empty(),cloneContent.css({width:contentSize.width+"px",height:contentSize.height+"px"}));var properties={width:clone.outerWidth()+"px",height:clone.outerHeight()+"px",marginTop:clone.css("margin-top")};return clone.remove(),this.popupContainer.show(),properties},CsComponentsPopupV2.prototype.constructContent=function(data,loadingTempContent,contentSize){"boolean"!=typeof loadingTempContent&&(loadingTempContent=!1),"object"!=typeof contentSize&&(contentSize={}),"number"==typeof this.options.width&&"number"!=typeof contentSize.width&&(contentSize.width=this.options.width),"number"==typeof this.options.height&&"number"!=typeof contentSize.height&&(contentSize.height=this.options.height),this.buildingContent=!0;var self=this;this.popupContent&&(this.popupContent.css("visibility","hidden"),loadingTempContent||this.popupContent.attr("id","csPopupContentOld")),this.tempContent&&(this.tempContent.css("visibility","hidden"),this.tempContent.attr("id","csPopupContentTempOld")),loadingTempContent?(this.tempContent=$("<div />",{"class":"popup-content",id:"csPopupContentTemp"}).appendTo(this.popupContainer).hide(),this.contentContainer=this.tempContent):(this.popupContent=$("<div />",{"class":"popup-content",
id:"csPopupContent"}).appendTo(this.popupContainer).hide(),this.contentContainer=this.popupContent),"object"==typeof this.options.contentCss&&this.contentContainer.css(this.options.contentCss);var forceDimensions=!0;("number"!=typeof contentSize.width||"number"!=typeof contentSize.height)&&(forceDimensions=!1);var contentProperties={};forceDimensions?contentProperties=this.getContentProperties(loadingTempContent,contentSize):(this.contentContainer.html(data),contentProperties=this.getContentProperties(loadingTempContent)),1==this.options.allowUserClose&&(this.popupCloseButton=$("<span />",{"class":"button-close"}),1==this.options.overlayCloseButton?this.popupCloseButton.appendTo(this.popupOverlay):(this.popupCloseButton.appendTo(this.popupContainer),this.popupContainer.addClass("has-close")),this.popupCloseButton.click(function(){self.options.onDismiss(),self.close({status:"cancel",on:"click_cross"})})),loadingTempContent||(this.currentWidth=contentProperties.width,this.currentHeight=contentProperties.height,this.currentMarginTop=contentProperties.marginTop),this.popupContainer.animate({height:contentProperties.height,width:contentProperties.width,marginTop:contentProperties.marginTop},175,function(){self.popupContainer.find("#csPopupContentOld").remove(),self.popupContainer.find("#csPopupContentTempOld").remove(),loadingTempContent?self.popupContent&&(self.popupContent.hide(),self.popupContent.css("visibility","")):self.tempContent=!1,self.contentContainer.show(),forceDimensions&&(data instanceof jQuery?data.appendTo(self.contentContainer):self.contentContainer.html(data)),self.hideLoader(),self.popupContainer.css({"margin-top":""}),self.options.width||self.popupContainer.css("width",""),self.options.height||self.popupContainer.css("height",""),self.visible=!0,self.buildingContent=!1,self.options.onDisplay()})},CsComponentsPopupV2.prototype.showProcessText=function(text){var self=this;this.popupContainer&&this.popupContainer.fadeOut("fast",function(e){self.messageContainer&&self.messageContainer.remove(),self.messageContainer=$("<div />",{"class":"popup-container temp message"}).text(text).appendTo(self.popupOverlay).fadeIn("fast")})},CsComponentsPopupV2.prototype.hideProcessText=function(){var self=this;this.messageContainer&&this.messageContainer.fadeOut("fast",function(e){self.messageContainer.remove(),self.popupContainer&&self.popupContainer.fadeIn("fast")})},CsComponentsPopupV2.prototype.showLoader=function(url){this.popupContainer.addClass("temp preloading"),this.loaderContainer=$("<div/>",{"class":"popup-loader"}).appendTo(this.popupContainer),this.loaderContainer.text(cs.txt("js popup window : loading")),this.popupOverlay.fadeIn("fast",function(){})},CsComponentsPopupV2.prototype.hideLoader=function(url){this.popupContainer.removeClass("preloading"),this.popupContainer.removeClass("temp"),this.loaderContainer&&this.loaderContainer.remove()},CsComponentsPopupV2.prototype.close=function(callbackOrOptions,closeOptions){var self=this;if(this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=!1),"function"==typeof callbackOrOptions)var callback=callbackOrOptions;else var callback=function(){};if("object"==typeof callbackOrOptions)var closeOptions=callbackOrOptions;else if("undefinded"==closeOptions)var closeOptions={};$(document).off("click.popupCloser"),this.destroyNavButtons(),this.popupOverlay&&this.popupOverlay.fadeOut("fast",function(e){self.destroy(),self.visible=!1,1==self.options.fitContent&&self.popupOverlay.removeClass("fit-content"),$("body").removeClass("popup-open"),callback&&callback(),self.options.onClose(closeOptions)})},CsComponentsPopupV2.prototype.resize=function(width,height){var resizeDimensions={};"number"==typeof width&&(this.options.width=width,resizeDimensions.width=width+"px"),"number"==typeof height&&(this.options.height=height,resizeDimensions.height=height+"px"),this.popupContainer&&!this.buildingContent&&this.popupContainer.animate(resizeDimensions,300,function(){})},CsComponentsPopupV2.prototype.isOpened=function(){return this.visible},CsComponentsPopupV2.prototype.destroy=function(){this.popupOverlay.remove()},CsComponentsPopupV2.prototype.showError=function(error,options){if("undefined"==typeof options)var options={};"undefined"!=typeof this.popupErrorContent&&this.popupErrorContent&&(this.popupErrorContent.remove(),this.popupErrorContent=null);var customContainer={};"undefined"!=typeof options.containerId&&(customContainer=this.popupOverlay.find("#"+options.containerId)),this.popupErrorContent=$("<div/>",{"class":"popup-error"}).html(unescape(error)),"undefined"!=typeof options.color&&this.popupErrorContent.css("color",options.color),customContainer.length?customContainer.html(unescape(error)).show():this.popupOverlay.find(".popup-header").length?this.popupErrorContent.insertAfter(this.popupOverlay.find(".popup-header")):this.popupOverlay.find(".popup-layout").length&&this.popupErrorContent.insertBefore(this.popupOverlay.find(".popup-layout"))},CsComponentsPopupV2.prototype.hideError=function(error){"undefined"==typeof this.popupErrorContent||this.popupErrorContent||(this.popupErrorContent.remove(),this.popupErrorContent=null)},CsComponentsPopupV2.prototype.enableNavButtons=function(onPrevButton,onNextButton){this.popupContainer&&(this.prevButton?(this.prevButton.off("click.popupNav"),this.prevButton.on("click.popupNav",onPrevButton)):this.prevButton=$("<a />",{"class":"popup-nav prev"}).on("click.popupNav",onPrevButton).appendTo(this.popupContainer),this.nextButton?(this.nextButton.off("click.popupNav"),this.nextButton.on("click.popupNav",onNextButton)):this.nextButton=$("<a />",{"class":"popup-nav next"}).on("click.popupNav",onNextButton).appendTo(this.popupContainer),$(document).off("keydown.popupNav"),$(document).on("keydown.popupNav",function(e){var keyCode=e.keyCode||e.which;37==keyCode?onPrevButton.call():39==keyCode&&onNextButton.call()}))},CsComponentsPopupV2.prototype.destroyNavButtons=function(){this.prevButton&&(this.prevButton.remove(),this.prevButton=!1),this.nextButton&&(this.nextButton.remove(),this.nextButton=!1),$(document).off("keydown.popupNav")},CsComponentsPopupV2.prototype.showTempContent=function(html){this.constructContent(html,!0)},CsComponentsPopupV2.prototype.hideTempContent=function(){var self=this;this.buildingContent=!0,this.tempContent.css("visibility","hidden"),this.popupContainer.animate({width:this.currentWidth,height:this.currentHeight,marginTop:this.currentMarginTop},175,function(){self.tempContent.remove(),self.tempContent=!1,self.popupContent.css("visibility",""),self.popupContent.show(),self.popupContainer.css({"margin-top":""}),self.options.width||self.popupContainer.css("width",""),self.options.height||self.popupContainer.css("height",""),self.buildingContent=!1})},CsComponentsPopupV2.prototype.insertIntoContent=function(html,insertRule){if(!this.popupContent)return!1;var rule=!1,target=!1;if(rule="undefined"==typeof insertRule||"string"!=typeof insertRule.rule||-1==["append","prepend","before","after"].indexOf(insertRule.rule)?"append":insertRule.rule,"string"!=typeof insertRule.target)target=this.popupContent;else if(target=this.popupContent.find(insertRule.target),!target.length)return!1;switch(rule){case"append":$(html).appendTo(target);break;case"prepend":$(html).prependTo(target);break;case"before":$(html).insertBefore(target);break;case"after":$(html).insertAfter(target)}return!0},CsComponentsPopupV2.prototype.removeFromContent=function(query){this.popupContent.find(query).remove()},CsComponentsPopupV2.prototype.hideCloseButton=function(){this.popupCloseButton.hide()},CsComponentsAlertV2.prototype.openPopup=function(){var self=this;return this.options.autoclose&&"extend"!=this.options.method?(this.generateAutocloseLayout(),csPopup.display(this.container,this.popupOptions),void setTimeout(function(){csPopup.close(),self.options.onCustom()},this.options.autocloseTime)):this.options.autoclose_style&&"extend"!=this.options.method?(this.generateAutocloseLayout(),void csPopup.display(this.container,this.popupOptions)):void(csPopup.isOpened()?("new"==this.options.method&&(this.generateTitle(),this.generateLayout(),this.generateFooter({onButtonClick:function(){csPopup.close(),self.onButtonClick()}}),csPopup.display(this.container,this.popupOptions)),"extend"==this.options.method&&(this.options.autoclose?(this.generateAutocloseLayout(),csPopup.showTempContent(this.container),setTimeout(function(){self.options.forceClose?csPopup.close():csPopup.hideTempContent(),self.onClose()},this.options.autocloseTime)):(this.generateTitle(),this.generateLayout(),this.generateFooter({onButtonClick:function(){csPopup.hideTempContent(),self.onButtonClick()}}),csPopup.showTempContent(this.container))),"inline"==this.options.method&&(this.container.addClass("popup-layout popup-inline-content popup-inline-"+this.options.type),this.generateInlineLayout(),csPopup.removeFromContent(".popup-inline-content"),csPopup.insertIntoContent(this.container,{rule:"before",target:".popup-layout"}))):(this.generateTitle(),this.generateLayout(),this.generateFooter({onButtonClick:function(){csPopup.close(),self.onButtonClick()}}),csPopup.display(this.container,this.popupOptions)))},CsComponentsAlertV2.prototype.generateTitle=function(){var headerContainer=$("<div />",{"class":"popup-header"}).appendTo(this.container);$("<h4 />",{"class":"popup-title"}).html(this.options.title).appendTo(headerContainer)},CsComponentsAlertV2.prototype.generateLayout=function(){var layoutContainer=$("<div />",{"class":"popup-layout"}).appendTo(this.container);$("<p />",{"class":"alert-text alert-"+this.options.type}).html(this.options.text).appendTo(layoutContainer)},CsComponentsAlertV2.prototype.generateFooter=function(options){var self=this;"undefined"==typeof options&&(options={}),"undefined"==typeof options.onButtonClick&&(options.onButtonClick=function(){csPopup.close(),self.onButtonClick()});var footerContainer=$("<div />",{"class":"popup-footer"}).appendTo(this.container),buttonId=Math.floor(10000000001*Math.random()),footerButton=$("<span />",{id:buttonId}).appendTo(footerContainer);this.alertButton=this._parent.button(footerButton,{version:2,color:"grey",title:"OK",onClick:options.onButtonClick})},CsComponentsAlertV2.prototype.generateAutocloseLayout=function(){$("<div />",{"class":"popup-highlight"}).html(this.options.text).appendTo(this.container)},CsComponentsAlertV2.prototype.generateInlineLayout=function(){this.generateLayout()},CsComponentsConfirmV2.prototype.onElementClick=function(e,i){this.options.buttons[i].onClick(e,this.buttons[i],this),this.options.buttons[i].disableOnClick&&this.buttons[i].disable()},CsComponentsConfirmV2.prototype.close=function(){"extend"==this.options.method?csPopup.hideTempContent():csPopup.close(),this.options.onClose()},CsComponentsConfirmV2.prototype.generateHtml=function(){if(this.container=$("<div/>",{id:this.options.id}),this.options.title){this.headerContainer=$("<div />",{"class":"popup-header"}).appendTo(this.container);$("<h4 />",{"class":"popup-title"}).html(this.options.title).appendTo(this.headerContainer)}if(this.options.text){this.layoutContainer=$("<div />",{"class":"popup-layout"}).appendTo(this.container);$("<p />",{"class":"confirm-text"}).html(this.options.text).appendTo(this.layoutContainer)}var self=this;if(this.options.buttons){this.footerContainer=$("<div/>",{"class":"popup-footer"}).appendTo(this.container);for(var i in this.options.buttons){var buttonId="csConfirmButton"+Math.floor(10000001*Math.random()),buttonObj=$("<span/>",{id:buttonId,style:"margin-right: 10px",rel:i,version:this.version}).appendTo(this.footerContainer),buttonOptions={version:2,title:this.options.buttons[i].text?this.options.buttons[i].text:"No text",color:"grey",size:"large"};"number"==typeof this.options.buttons[i].width&&(buttonOptions.width=this.options.buttons[i].width),"string"==typeof this.options.buttons[i].color&&(buttonOptions.color=this.options.buttons[i].color),"string"==typeof this.options.buttons[i].customClassName&&(buttonOptions.customClassName=this.options.buttons[i].customClassName),"object"==typeof this.options.buttons[i].icon&&(buttonOptions.icon=this.options.buttons[i].icon),"function"==typeof this.options.buttons[i].onClick&&(buttonOptions.onClick=function(e){self.onElementClick(e,this.container.attr("rel"))}),this.buttons[i]=cs.components().button(buttonObj,buttonOptions)}}},CsComponentsConfirmV2.prototype.disableButtons=function(){if("object"!=typeof this.buttons||0==this.buttons.length)return!1;for(i in this.buttons)this.buttons[i].disable()},CsComponentsConfirmV2.prototype.enableButtons=function(){if("object"!=typeof this.buttons||0==this.buttons.length)return!1;for(i in this.buttons)this.buttons[i].enable()},CsComponentsDaterV2.prototype.disable=function(){this.dateWrapper.prop("disabled",!0),this.dateWrapper.addClass("disabled"),this.dateContainer.prop("disabled",!0),this.timeWrapper&&(this.hourWrapper.prop("disabled",!0),this.hourWrapper.addClass("disabled"),this.hourContainer.prop("disabled",!0),this.minuteWrapper.prop("disabled",!0),this.minuteWrapper.addClass("disabled"),this.minuteContainer.prop("disabled",!0),this.ampmWrapper.prop("disabled",!0),this.ampmWrapper.addClass("disabled"),this.ampmContainer.prop("disabled",!0)),this.disabled=!0},CsComponentsDaterV2.prototype.enable=function(){this.dateWrapper.attr("disabled",!1),this.dateContainer.attr("disabled",!1),this.dateWrapper.removeClass("disabled"),this.timeWrapper&&(this.hourWrapper.prop("disabled",!1),this.hourWrapper.removeClass("disabled"),this.hourContainer.prop("disabled",!1),this.minuteWrapper.prop("disabled",!1),this.minuteWrapper.removeClass("disabled"),this.minuteContainer.prop("disabled",!1),this.ampmWrapper.prop("disabled",!1),this.ampmWrapper.removeClass("disabled"),this.ampmContainer.prop("disabled",!1)),this.disabled=!1},CsComponentsDaterV2.prototype.lockFutureFor=function(dater){this.options.futureLock=dater},CsComponentsDaterV2.prototype.lockPastFor=function(dater){this.options.pastLock=dater},CsComponentsDaterV2.prototype.setMaxDate=function(date){return"undefined"==typeof date?!1:(!1===date?this.datePicker.set("max",!1):this.datePicker.set("max",new Date(date)),!0)},CsComponentsDaterV2.prototype.setMinDate=function(date){return"undefined"==typeof date?!1:(!1===date?this.datePicker.set("min",!1):this.datePicker.set("min",new Date(date)),!0)},CsComponentsDaterV2.prototype.defaultOnDateChange=function(newValue){this.defaultOnChange(newValue,"date"),this.onDateChange(),"undefined"!=typeof this.options.futureLock&&this.options.futureLock.setMaxDate(newValue),"undefined"!=typeof this.options.pastLock&&this.options.pastLock.setMinDate(newValue)},CsComponentsDaterV2.prototype.defaultOnTimeChange=function(newValue){this.defaultOnChange(newValue,"time"),this.onTimeChange(newValue)},CsComponentsDaterV2.prototype.defaultOnChange=function(newValue,whatChanged){this.onChange(newValue,whatChanged)},CsComponentsDaterV2.prototype.getCurrentDate=function(){var d=new Date,month=d.getMonth()+1,day=d.getDate(),output=d.getFullYear()+"-"+(10>month?"0":"")+month+"-"+(10>day?"0":"")+day;return output},CsComponentsDaterV2.prototype.empty=function(){this.options.datePickerAllowEmpty?this.datePicker.set("clear"):this.datePicker.set("select",new Date),"undefined"!=typeof this.timeWrapper&&this.setTime("00:00")},CsComponentsDaterV2.prototype.getDate=function(format){"undefined"==typeof format&&(format=this.options.dateFormat);var date=this.datePicker.get("select",format);return"string"==typeof date&&""!=date?date:!1},CsComponentsDaterV2.prototype.setDate=function(date,time){return"string"!=typeof date||""==date?!1:(this.datePicker.set("select",date,{format:this.options.dateFormat,muted:!0}),"undefined"!=typeof this.timeWrapper&&"string"==typeof time&&""!=time&&this.setTime(time),!0)},CsComponentsDaterV2.prototype.getTime=function(){if("undefined"==typeof this.timeWrapper)return!1;var hour=this.hourPicker.get(),minute=this.minutePicker.get(),ampm=this.ampmPicker.get();return"string"!=typeof hour||""==$.trim(hour)||"string"!=typeof minute||""==$.trim(minute)||"string"!=typeof ampm||""==$.trim(ampm)?!1:(hour=parseInt(hour),"PM"==ampm?12>hour&&(hour+=12):12==hour&&(hour=0),10>hour&&(hour="0"+hour),hour+":"+minute)},CsComponentsDaterV2.prototype.setTime=function(time){if("undefined"==typeof this.timeWrapper)return!1;if("string"!=typeof time||""==time)return!1;var hour=parseInt(time.split(":").shift()),minute=parseInt(time.split(":").pop()),pm=!1;if(hour>=12){var pm=!0;hour>12&&(hour-=12)}else 0==hour&&(hour=12);return this.hourPicker.set("select",[hour,0],{muted:!0}),this.minutePicker.set("select",[0,minute],{muted:!0}),this.ampmPicker.set("select",pm?720:0,{muted:!0}),!0},CsComponentsDaterV2.prototype.getValue=function(){var date=this.getDate();if(!date)return!1;var time=this.getTime();return"string"==typeof time&&""!=time?date+" "+time:date},CsComponentsDaterV2.prototype.getWrapperId=function(){return"undefined"!=typeof this.overallWrapper?this.overallWrapper.attr("id"):this.dateWrapper.attr("id")},CsComponentsDaterV2.prototype.showError=function(){this.dateWrapper.addClass("form-error"),"undefined"!=typeof this.timeWrapper&&this.timeWrapper.addClass("form-error"),this.options.hasError=!0},CsComponentsDaterV2.prototype.hideError=function(){this.dateWrapper.removeClass("form-error"),"undefined"!=typeof this.timeWrapper&&this.timeWrapper.removeClass("form-error"),this.options.hasError=!1},CsCommentBlock.prototype.onTextareaKeyPress=function(e){var self=this;if(e.keyCode&&13==e.keyCode&&!e.shiftKey){self.addComment()}},CsCommentBlock.prototype.addComment=function(){var self=this,url="/account/feeds/ajax-add-item-comment",obj={};obj.message=self.textareaObj.getValue(),obj.type="feed",obj.actor_id=self.actorId,obj.object_id=self.objectId;var commentWrapper=self.textareaContainer.closest(".comment");commentWrapper.hide(),self.textareaObj.disable();var loadingBar=$("<div />",{"class":"loading-bar"}).insertAfter(commentWrapper);return $.post(url,obj,function(response){self.textareaObj.reset(),self.textareaObj.enable(),loadingBar.remove(),commentWrapper.show(),commentWrapper.before(response)}),!0},CsCommentBlock.prototype.removeComment=function(elem){var self=this;if("undefined"==typeof elem)return!1;var comment_id=$(elem).data("comment-id");if("number"!=typeof comment_id)return!1;var url="/system/comments/ajax-delete-comment";obj={},obj.type="feed",obj.comment_id=comment_id,obj.actor_id=self.toActorId,$(elem).closest(".comment").hide(),$.post(url,obj,function(response){},"json")},CsUploader.prototype.buildContainer=function(){var self=this;"object"==typeof self.options.button?self.buttonContainer=cs.components().button(self.containerId,{version:self.options.button.version,color:self.options.button.color,title:self.options.button.title,size:self.options.button.size,onClick:function(){self.selectFiles()}}):self.container.off("click.upload").on("click.upload",function(e){e.preventDefault(),self.selectFiles()});var uploaderParams={type:"file","class":"uploader",capture:"camera",id:"uploader"+self.containerId,multiple:self.options.multiple,accept:self.options.accept};self.uploaderContainer=$("<input />",uploaderParams).insertAfter($("#"+self.containerId)),self.uploaderContainer.off("change.upload").on("change.upload",function(){self.addToQueue()})},CsUploader.prototype.addToQueue=function(){var files=this.getFiles();return 0==files.length?!1:("append"==this.options.method?this.files=$.merge(this.files,files):(this.files=files,this.options.submit&&this.submitData()),void this.options.onSelect(this.files))},CsUploader.prototype.clearQueue=function(args){this.files=[],("undefined"==typeof args||"undefined"==typeof args.preventCallback||!1===typeof args.preventCallback)&&this.options.onClearQueue()},CsUploader.prototype.removeFromQueue=function(index){return"number"!=typeof index?!1:0==this.files.length?!1:(this.files.splice(index,1),void this.options.onRemoveFromQueue(index))},CsUploader.prototype.getFiles=function(){var files=this.uploaderContainer.prop("files");if(0==files.length)return!1;var results=[];return $.each(files,function(k,v){results.push(v)}),results},CsUploader.prototype.submitData=function(){var self=this,basicForm=self.getBasicForm(),filesLength=self.files.length,count=0;self.disableUploadButton(),$.each(self.files,function(key,file){if(errors=self.hasErrors(file))return count++,count==filesLength&&self.enableUploadButton(),void self.options.onError(file,errors);var formData=basicForm;formData.append(self.options.inputName,file),$.ajax({url:self.options.url,data:formData,processData:!1,contentType:!1,type:"POST",dataType:"json",beforeSend:function(){var myXhr=$.ajaxSettings.xhr();myXhr.upload&&myXhr.upload.addEventListener("progress",function(evt){if(evt.lengthComputable){var percentComplete=evt.loaded/evt.total;self.options.onProgress(file,percentComplete)}},!1),self.options.beforeSend(file)},complete:function(){count++,count==filesLength&&(self.enableUploadButton(),self.clearOnComplete&&self.clearQueue(),self.options.onComplete())},success:function(response){self.options.onSuccess(file,response)}})})},CsUploader.prototype.getBasicForm=function(){var self=this,formData=new FormData;return"object"==typeof self.options.data&&$.each(self.options.data,function(k,v){formData.append(k,v)}),formData},CsUploader.prototype.selectFiles=function(){var self=this;self.uploaderContainer.click()},CsUploader.prototype.hasErrors=function(file){var self=this;return"object"!=typeof file?!0:"undefined"==typeof file.size?!0:"undefined"==typeof file.name?!0:file.size>1e3*self.options.maxFileSize?cs.txt("Uploader: size too big"):!1},CsUploader.prototype.disableUploadButton=function(){"undefined"!=typeof this.buttonContainer&&(this.buttonContainer.disable(),this.buttonContainer.showLoader())},CsUploader.prototype.enableUploadButton=function(){"undefined"!=typeof this.buttonContainer&&(this.buttonContainer.enable(),this.buttonContainer.hideLoader())},CsPanelNavigator.prototype.init=function(){this.panelContainer.find(".panel").each(function(){$(this).hasClass("active-panel")||$(this).addClass("hidden")});var activePanel=this.panelContainer.find(".active-panel");activePanel.length||(this.panelContainer.find(".panel").first().addClass("active-panel"),activePanel=this.panelContainer.find(".active-panel")),this.currentPanel={obj:activePanel,prev:!1}},CsPanelNavigator.prototype.initEvents=function(){var self=this;this.panelContainer.find("*[data-linked-panel]").off("click.panelNav").on("click.panelNav",function(){var src=$(this),target=$('*[data-panel="'+$(this).data("linked-panel")+'"]');if("string"==typeof src.data("title")&&""!=$.trim(src.data("title"))&&(targetNav=target.find(".panel-nav"),0==targetNav.length)){var nav=$('<div class="panel-nav"></div>').prependTo(target);$("<a />").addClass("navbutton arrow panel-nav-back").text(src.data("title")).on("click.panelNav",function(){self.back()}).appendTo(nav)}target.off("animationend webkitAnimationEnd").on("animationend webkitAnimationEnd",function(){self.currentPanel.obj.removeClass("active-panel"),self.currentPanel.obj.hide();var newPanel={obj:target,prev:self.currentPanel};self.currentPanel=newPanel,target.removeClass("animate").removeClass("slide-in").removeClass("hidden"),target.addClass("active-panel")}),target.addClass("animate slide-in")}),this.panelContainer.find(".panel-nav-back").off("click.panelNav").on("click.panelNav",function(){self.back()})},CsPanelNavigator.prototype.back=function(){var self=this;if(!1===this.currentPanel.prev)return"function"==typeof this.options.onNegativeNav&&this.options.onNegativeNav.call(),!0;var target=$(".active-panel");target.off("animationend webkitAnimationEnd").on("animationend webkitAnimationEnd",function(){var newPanel=self.currentPanel.prev;self.currentPanel=newPanel,self.currentPanel.obj.addClass("active-panel"),target.removeClass("animate").removeClass("slide-out")}),self.currentPanel.prev.obj.show(),target.removeClass("active-panel"),target.addClass("hidden").addClass("animate slide-out")},CsTextCropper.prototype.init=function(){this.container.addClass("nowrap"),this._setupClone(),this.setText()},CsTextCropper.prototype._setupClone=function(){if(this.measureData={},this.measureData.container=$("<div />").appendTo("body"),this.measureData.css={position:"absolute",display:"none","font-family":this.container.css("font-family"),"font-size":this.container.css("font-size"),"letter-spacing":this.container.css("letter-spacing"),"line-height":this.container.css("line-height"),"white-space":"nowrap","padding-top":this.container.css("padding-top"),"padding-right":this.container.css("padding-right"),"padding-bottom":this.container.css("padding-bottom"),"padding-left":this.container.css("padding-left"),"border-top-width":this.container.css("border-top-width"),"border-right-width":this.container.css("border-right-width"),"border-bottom-width":this.container.css("border-bottom-width"),"border-left-width":this.container.css("border-left-width"),"border-top-style":"solid","border-right-style":"solid","border-bottom-style":"solid","border-left-style":"solid","border-top-color":"#000000","border-right-color":"#000000","border-bottom-color":"#000000","border-left-color":"#000000"},this.measureData.boxSizing=this.container.css("box-sizing")||this.container.css("-moz-box-sizing")||!1,this.measureData.boxSizing){var boxSizingPrefix=this.container.css("-moz-box-sizing")?"-moz-":"";this.measureData.css[boxSizingPrefix+"box-sizing"]=this.measureData.boxSizing}this.measureData.container.css(this.measureData.css)},CsTextCropper.prototype.setText=function(newText){if(!1!==this.containerWidth&&this.container.width()==this.containerWidth&&("string"!=typeof newText||""==$.trim(newText)||newText==this.text))return!1;"string"==typeof newText&&""!=$.trim(newText)&&newText!=this.text&&(this.text=newText),this.containerWidth=this.container.width();var croppedText=this.text;for(this.measureData.container.text(croppedText),charsToCrop=0;this.measureData.container.width()>this.containerWidth;)charsToCrop++,croppedText=this.cropText(charsToCrop),this.measureData.container.text(croppedText);this.container.text(croppedText)},CsTextCropper.prototype.cropText=function(charsToCrop){if("number"!=typeof charsToCrop||0==charsToCrop)return!1;var mid=Math.floor(this.text.length/2),left=this.text.substr(0,mid-charsToCrop),right=this.text.substr(mid+charsToCrop);return left+"..."+right},CsFeedPoster.prototype.resetSettings=function(){this.isPosting=!1,this.blocks=[],this.destroyBlocks(),"undefined"!=typeof this.postText&&this.postText.reset()},CsFeedPoster.prototype.init=function(){var self=this;this.buildPostText(),this.buildSubmitButton(),this.buildPrivacySelector(),this.buildPostTypeToggles(),this.options.kpiMode&&this.toggleKpiMode(),$(function(){self.getFeedContainer()||console.log("Could not find the feed container object")})},CsFeedPoster.prototype.validateOptions=function(){return"string"!=typeof this.options.feedContainerId?!1:"number"!=typeof this.options.authorActorId||0==this.options.authorActorId?!1:"number"!=typeof this.options.receiverActorId||0==this.options.receiverActorId?!1:!0},CsFeedPoster.prototype.getFeedContainer=function(){return this.feedContainer=!1,this.feedContainer=$("#"+this.options.feedContainerId),0==this.feedContainer.length?!1:!0},CsFeedPoster.prototype.buildSubmitButton=function(){var self=this;this.submitButton=cs.components().button("csPosterButton",{version:2,color:"green",size:"large",title:"Share",customClassName:"mobile-full",disabled:!0,onClick:function(){self.post()}})},CsFeedPoster.prototype.buildPrivacySelector=function(items){var self=this;if("undefined"==typeof this.options.privacyType)return!1;if(!cs.algorithms().in_array(this.options.privacyType,["public_feed","private_feed"]))return!1;switch(this.options.privacyType){case"public_feed":var dropdown=this.buildPrivacyPublicObj();break;case"private_feed":var dropdown=this.buildPrivacyPrivateObj()}if("object"!=typeof dropdown)return!1;var selectedOption=self.options.privacyDefault;"object"==typeof items&&$.isArray(items)&&$.each(items,function(k,item){"undefined"!=item.selected&&item.selected&&(selectedOption=item.value),dropdown.push(item)}),$.each(dropdown,function(i,v){if(selectedOption==v.value){v.selected=!0;var text="undefined"!=typeof v.shareText?v.shareText:"";return void self.populatePrivacyDescription(text)}}),"undefined"!=typeof this.privacySelector&&($("#"+this.postPrivacyId).empty(),delete this.privacySelector),this.privacySelector=cs.components().dropdown(this.postPrivacyId,dropdown,{version:2,useIcons:!0,noTitle:!0,showTick:!1,dropRight:!0,allowTextSearch:!1,maxDropHeight:200,customClassName:"noborder larger-caption",onChange:function(e){var text="undefined"!=typeof e.shareText?e.shareText:"";self.populatePrivacyDescription(text)}})},CsFeedPoster.prototype.buildPrivacyPublicObj=function(){var obj=[{text:cs.txt("Post: public"),value:"everyone_public",icon:{fa:"fa-globe"}},{text:cs.txt("Post: organization insiders"),value:"insiders",icon:{fa:"fa-users"}},{text:cs.txt("Post: investors"),value:"investors",icon:{fa:"fa-user"}},{text:cs.txt("Post: team only"),value:"public_team",icon:{fa:"fa-rocket"}}];return obj},CsFeedPoster.prototype.buildPrivacyPrivateObj=function(){var self=this,obj=[{text:cs.txt("Post: everyone"),value:"everyone_private",icon:{fa:"fa-globe"}},{text:cs.txt("Post: program insiders"),value:"teams",icon:{fa:"fa-users"}},{text:cs.txt("Post: specific people"),value:"specific-people",icon:{fa:"fa-list-ul"},onClick:function(){self.specificPeoplePopup()}}];if("undefined"==typeof this.options.privacyLists)return obj;var lists=$.parseJSON(this.options.privacyLists);return"object"==typeof lists&&$.each(lists,function(k,list){var list={text:list.list_name,value:parseInt(list.list_id),shareText:cs.txt("Feedposter: share with list","list_name",list.list_name),icon:{fa:"fa-thumb-tack"}};obj.push(list)}),obj},CsFeedPoster.prototype.getPageObjects=function(){var pageObjects={};return $.each($("."+this.options.privacySelectorClass),function(index,obj){var group=$(obj).attr("data-group");if("undefined"!=typeof group&&null!=group){pageObjects[group]instanceof Array||(pageObjects[group]=[]);var value=parseInt($(obj).val());"number"==typeof value&&null!=value&&pageObjects[group].push(value)}}),pageObjects},CsFeedPoster.prototype.pushPrivacyObjects=function(option){if("undefined"==typeof option)return!1;var filterPrivacy={insiders:["team","advisors","investors"],public_team:["team"],investors:["investors"],teams:["teams","members"],everyone_private:["teams","members","mentors"]};if("object"!=typeof filterPrivacy[option])return!1;var pageObjects=this.getPageObjects(),privacyIds=[];return $.each(filterPrivacy[option],function(k,filter){"object"==typeof pageObjects[filter]&&$.isArray(pageObjects[filter])&&(privacyIds=$.merge(privacyIds,pageObjects[filter]))}),privacyIds=$.unique(privacyIds)},CsFeedPoster.prototype.setPrivacy=function(option){if("undefined"==typeof this.privacySelector)return!1;var privacySetting=null;"undefined"!=typeof option&&""!=$.trim(option)?privacySetting=option:""!=$.trim(this.options.privacyDefault)&&(privacySetting=this.options.privacyDefault);var index=null!==privacySetting?this.privacySelector.getIndexByValue(privacySetting):0;this.privacySelector.selectOption(index)},CsFeedPoster.prototype.specificPeoplePopup=function(e){var self=this,options={requestMethod:"post",onDismiss:function(){self.setPrivacy()}};options.postObject={allowed:this.getPageObjects(),to_actor_id:this.options.receiverActorId,version:2},csPopup.display("/account/feeds/popup-specific-members/",options)},CsFeedPoster.prototype.specificPeopleCallback=function(objects){var self=this;if("object"!=typeof objects||$.isEmptyObject(objects))return"err_empty";this.specificIds=[];var specificNames=[];$.each(objects,function(id,name){self.specificIds.push(parseInt(id)),specificNames.push(name)});var text="Shared with "+specificNames.join(", ");
this.populatePrivacyDescription(text)},CsFeedPoster.prototype.populatePrivacyDescription=function(text){return $("#csPosterPrivacyCustomList").empty(),"undefined"==typeof text||""==$.trim(text)?!1:void $("#csPosterPrivacyCustomList").text(text)},CsFeedPoster.prototype.toggleKpiMode=function(){var self=this;""!=$.trim(self.options.privacyUpdatesDefault)&&self.setPrivacy(self.options.privacyUpdatesDefault),self.hideBlocks();var kpiContainer=$("#"+self.posterKpiId);if(kpiContainer.show(),kpiContainer.is(":empty")){kpiContainer.addClass("loading-bar");var postObject={};postObject.actor_id=self.options.receiverActorId,$.post(self.blocksKpiURL,postObject,function(response){kpiContainer.removeClass("loading-bar").html(response).show()})}self.toggleSubmitButton()},CsFeedPoster.prototype.toggleTextMode=function(){this.setPrivacy(),this.hideBlocks(),$("#posterTextWrapper").show(),this.toggleSubmitButton()},CsFeedPoster.prototype.hideBlocks=function(){$(".poster-type-wrapper").hide()},CsFeedPoster.prototype.getPostMode=function(){var mode=$("#"+this.posterKpiId).is(":visible")?"kpi":"text";return mode},CsFeedPoster.prototype.checkKpiCompletion=function(){if(!$.isArray(this.kpiFields)||0==this.kpiFields.length)return!1;var isCompleted=!1;return $.each(this.kpiFields,function(k,obj){var value=obj.getValue();return""!=$.trim(value)?void(isCompleted=!0):void 0}),isCompleted},CsFeedPoster.prototype.toggleSubmitButton=function(){var enable=!1,mode=this.getPostMode();"text"==mode?(""!=$.trim(this.postText.getValue())||this.blocks.length>0)&&(enable=!0):"kpi"==mode&&this.checkKpiCompletion()&&(enable=!0),enable&&!this.isPosting?this.submitButton.enable():this.submitButton.disable()},CsFeedPoster.prototype.buildPostText=function(){var self=this;"undefined"==typeof this.options.postTextPlaceholder&&(this.options.postTextPlaceholder=cs.txt("Feed poster: default placeholder")),this.postText=cs.components().input("csPostText",{version:2,size:"larger-unpadded",color:"transparent",defaultText:this.options.postTextPlaceholder,fullWidth:!0,resizable:!0,expandMax:100,onKeyDown:function(){self.toggleSubmitButton.apply(self)},onPaste:function(){self.toggleSubmitButton.apply(self)}})},CsFeedPoster.prototype.buildPostTypeToggles=function(){var self=this;$("#csPostTextToggle").off("click.default").on("click.default",function(){self.toggleTextMode()}),$("#csPostMediaToggle").length&&$("#csPostMediaToggle").off("click.default").on("click.default",function(){self.toggleTextMode(),csPopup.display(self.blocksPopupURL)}),$("#csPostKpiToggle").length&&$("#csPostKpiToggle").off("click.default").on("click.default",function(){self.toggleKpiMode()})},CsFeedPoster.prototype.post=function(){var self=this,data={};data.blocks=this.getBlocks(),data.actor_id=this.options.authorActorId,data.to_actor_id=this.options.receiverActorId,self.getPrivacyData(data),$.extend(data,self.getDeprecatedData()),this.togglePostingState(),$.post("/account/feeds/ajax-add-item",{post:data},function(response){self.togglePostingState(),self.processResponse(response)&&(self.resetSettings(),self.hideEmptyFeedNotice(),"kpi"==self.getPostMode()&&(self.toggleTextMode(),self.disableKpiMode()))})},CsFeedPoster.prototype.hideEmptyFeedNotice=function(){$("#csProfileFeedModule").length&&$("#csProfileFeedModule").addClass("tile")},CsFeedPoster.prototype.disableKpiMode=function(){$("#csPostKpiToggle").off("click.default").addClass("link-disabled")},CsFeedPoster.prototype.getBlocks=function(data){var self=this,blocks=[];return"kpi"==self.getPostMode()?blocks.push({type:"updates",updates:$("#"+self.posterKpiId).find("form").serializeArray()}):(blocks=this.deprecatedMediaBlocks(this.blocks),""!=$.trim(this.postText.getValue())&&blocks.push({type:"text",text:this.postText.getValue()})),blocks},CsFeedPoster.prototype.deprecatedMediaBlocks=function(blocks){if("object"!=typeof blocks)return!1;var imageBlocks=[];if($.each(blocks,function(k,block){if("undefined"!=typeof block.type&&"image"==block.type){var obj={image_id:block.image_id,path:block.path,type:block.extension};imageBlocks.push(obj),delete blocks[k]}}),imageBlocks.length>0){blocks.push({type:"images",images:imageBlocks});var tempBlocks=[];$.each(blocks,function(k,v){"undefined"!=typeof v&&tempBlocks.push(v)}),blocks=tempBlocks}return blocks},CsFeedPoster.prototype.getDeprecatedData=function(){var deprecated={};return deprecated.private_profile="undefined"!=typeof this.options.privacyType&&"private_feed"==this.options.privacyType?1:0,deprecated["public"]="public",deprecated},CsFeedPoster.prototype.getPrivacyData=function(data){if("undefined"!=typeof this.privacySelector&&""!=$.trim(this.privacySelector.getValue()))if(data.privacy=this.privacySelector.getValue(),"specific-people"==data.privacy&&"undefined"!=this.specificIds&&$.isArray(this.specificIds))data.permission_ids=this.specificIds;else{var privacyIds=this.pushPrivacyObjects(data.privacy);privacyIds&&("everyone_private"==data.privacy?data.public_ids=privacyIds:data.permission_ids=privacyIds),cs.algorithms().in_array(data.privacy,["everyone_public","everyone_private"])&&(data.privacy="everyone")}},CsFeedPoster.prototype.processResponse=function(response){if("undefined"==typeof response)return!1;if(!this.feedContainer)return!1;try{var responseObj=$.parseJSON(response)}catch(e){var responseObj=!1}return"object"==typeof responseObj&&responseObj&&"undefined"!=typeof responseObj.status&&"err"==responseObj.status&&"undefined"!=typeof responseObj.status_desc?(error_text=unescape(decodeURIComponent(responseObj.status_desc)),cs.components().alert(error_text,{title:"Hey!",type:"err",method:"inline"}),!1):($(response).prependTo(this.feedContainer),!0)},CsFeedPoster.prototype.togglePostingState=function(){"boolean"==typeof this.isPosting&&this.isPosting?(this.isPosting=!1,this.submitButton.hideLoader(),this.submitButton.enable()):(this.isPosting=!0,this.submitButton.disable(),this.submitButton.showLoader())},CsFeedPoster.prototype.initBlocks=function(){var self=this;if(0==$("#"+self.posterBlocksWrapperId).length)return!1;$("#"+self.posterBlocksWrapperId).show(),$("#csAddPosterBlock").off("click.default").on("click.default",function(){csPopup.display(self.blocksPopupURL)});var options={prevArrow:'<div class="post-blocks-navbutton left"></div>',nextArrow:'<div class="post-blocks-navbutton right"></div>'};return buildSlick(this.posterBlocksId,null,options),!0},CsFeedPoster.prototype.destroyBlocks=function(){var self=this;$(".poster-block").each(function(k,block){self.removeBlock($(this).closest("."+self.posterBlockClass))}),$("#"+self.posterBlocksWrapperId).hide(),destroySlick(self.posterBlocksId)},CsFeedPoster.prototype.addBlockRemover=function(blockContent){var self=this;return"object"!=typeof blockContent?!1:void $("<span />").addClass("button-remove").off("click.default").on("click.default",function(event){event.stopPropagation(),self.removeBlock($(this).closest("."+self.posterBlockClass))}).appendTo(blockContent)},CsFeedPoster.prototype.addMediaBlock=function(block,options){if("object"!=typeof block)return!1;if("string"!=typeof options.type)return!1;if(!cs.algorithms().in_array(options.type,["image","video"]))return!1;if("string"!=typeof options.thumbnail)return!1;if("string"!=typeof options.mediaURL)return!1;var blockContent=$("<div />").addClass("poster-block item").css("background-image",'url("'+options.thumbnail+'")').data("gallery","feed-poster").data("media-url",options.mediaURL);return"video"==options.type&&blockContent.addClass("playable"),blockContent.off("click.default").on("click.default",function(){csPlayMedia(this)}),this.addBlockRemover(blockContent),blockContent.appendTo(block),!0},CsFeedPoster.prototype.addFileBlock=function(block,options){if("object"!=typeof block)return!1;if("string"!=typeof options.type||"file"!=options.type)return!1;if("string"!=typeof options.fileName)return!1;var blockContent=$("<div />").addClass("file poster-block");return $("<span />").text(options.fileName).appendTo(blockContent),$("<span />").addClass("file-icon").html('<i class="fa fa-file-text-o"></i>').appendTo(blockContent),this.addBlockRemover(blockContent),blockContent.appendTo(block),!0},CsFeedPoster.prototype.addBlock=function(options){if("object"!=typeof options&&(options={}),"string"!=typeof options.type)return!1;if(0==this.blocks.length&&!this.initBlocks())return!1;var block=$('<div class="'+this.posterBlockClass+'"></div>');switch(options.type){case"video":return void this.processVideoBlock(block,options);case"image":var built=this.addMediaBlock(block,options);built&&this.pushMediaBlock(options);break;case"file":var built=this.addFileBlock(block,options);built&&this.pushFileBlock(options)}this.afterBuilt(block,built)},CsFeedPoster.prototype.processVideoBlock=function(block,options){if("undefined"==typeof block)return!1;if("undefined"==typeof options.url||""==$.trim(options.url))return!1;var videoParams=this.getYoutubeVideoParams(options.url);return("object"!=typeof videoParams||0==videoParams.length)&&(videoParams=this.getVimeoVideoParams(options.url)),"object"!=typeof videoParams||0==videoParams.length||"undefined"==typeof videoParams.func?!1:void this[videoParams.func](block,videoParams)},CsFeedPoster.prototype.addYoutubeVideo=function(block,videoParams){var self=this;if("undefined"==typeof block)return!1;if("undefined"==typeof videoParams.videoId)return!1;if("undefined"==typeof videoParams.source)return!1;if("undefined"==typeof cs.options.youtubeKey)return!1;var youtubeApi="https://www.googleapis.com/youtube/v3/videos?id="+videoParams.videoId+"&key="+cs.options.youtubeKey+"&part=snippet";$.getJSON(youtubeApi,function(response){if("object"!=typeof response.items)return!1;if("object"!=typeof response.items[0])return!1;if("object"!=typeof response.items[0].snippet)return!1;var data=response.items[0].snippet;videoParams.title=data.title,videoParams.mediaURL="//www.youtube.com/embed/"+videoParams.videoId,videoParams.thumbnailSmall=data.thumbnails.medium.url,"undefined"!=typeof data.thumbnails.maxres?videoParams.thumbnail=data.thumbnails.maxres.url:"undefined"!=typeof data.thumbnails.standard?videoParams.thumbnail=data.thumbnails.standard.url:videoParams.thumbnail=data.thumbnails.high.url;var built=self.addMediaBlock(block,videoParams);built&&self.pushVideoBlock(videoParams),self.afterBuilt(block,built)})},CsFeedPoster.prototype.addVimeoVideo=function(block,videoParams){var self=this;if("undefined"==typeof block)return!1;if("undefined"==typeof videoParams.videoId)return!1;if("undefined"==typeof videoParams.source)return!1;var vimeoApi="//vimeo.com/api/v2/video/"+videoParams.videoId+".json?callback=?";$.getJSON(vimeoApi,function(response){if("object"==typeof response&&"object"==typeof response[0]){var data=response[0];videoParams.thumbnail=data.thumbnail_large,videoParams.thumbnailSmall=data.thumbnail_medium,videoParams.title=data.title,videoParams.mediaURL=data.url.replace("vimeo.com/","player.vimeo.com/video/");var built=self.addMediaBlock(block,videoParams);built&&self.pushVideoBlock(videoParams),self.afterBuilt(block,built)}})},CsFeedPoster.prototype.getYoutubeVideoParams=function(url){if("undefined"==typeof url||""==$.trim(url))return!1;var regex=url.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/);return null==regex?!1:"undefined"==regex[1]?!1:{videoId:regex[1],source:"youtube",type:"video",func:"addYoutubeVideo"}},CsFeedPoster.prototype.getVimeoVideoParams=function(url){if("undefined"==typeof url||""==$.trim(url))return!1;var regex=url.match(/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/);return null==regex?!1:"undefined"==regex[3]?!1:{videoId:regex[3],source:"vimeo",type:"video",func:"addVimeoVideo"}},CsFeedPoster.prototype.pushVideoBlock=function(params){this.blocks.unshift({type:"video",url:params.mediaURL,source:params.source,video_id:params.videoId,thumbnail:params.thumbnail,thumbnail_small:params.thumbnailSmall,title:params.title})},CsFeedPoster.prototype.pushMediaBlock=function(params){this.blocks.unshift({type:"image",image_id:params.imageId,path:params.path,extension:params.extension})},CsFeedPoster.prototype.pushFileBlock=function(params){this.blocks.unshift({type:"file",file_id:params.fileId,name:params.fileName})},CsFeedPoster.prototype.getTypeByExtension=function(extension){if("string"!=typeof extension)return!1;var type=cs.algorithms().in_array(extension,["jpg","jpeg","png","gif","bmp","tiff","svg"])?"image":"file";return type},CsFeedPoster.prototype.afterBuilt=function(block,built){return"undefined"==typeof block?!1:("boolean"==typeof built&&built&&$("#"+this.posterBlocksId).slick("slickAdd",block[0],0),void this.toggleSubmitButton())},CsFeedPoster.prototype.removeBlock=function(object){if(!object.hasClass(this.posterBlockClass))return!1;var index=$("#"+this.posterBlocksId+" ."+this.posterBlockClass).index(object);$("#"+this.posterBlocksId).slick("slickRemove",index),this.blocks.splice(index-1,1),0==this.blocks.length&&this.destroyBlocks(),this.toggleSubmitButton()},Cs.prototype.algorithms=function(){var self=this;return new CsAlgorithms({_parent:self})},CsAlgorithms.prototype.inElement=function(obj,in_obj,no_target){if("undefined"==typeof obj.target||null==obj.target||""==obj.target||"undefined"!=typeof no_target&&0!=no_target||(obj=obj.target),$(obj).is(in_obj))return!0;var parents=$(obj).parents();if(!parents)return!1;for(i in parents)if("object"==typeof parents[i]&&$(parents[i]).is(in_obj))return!0;return!1},CsAlgorithms.prototype.is_array=function(obj){return"[object Array]"===Object.prototype.toString.call(obj)?!0:!1},CsAlgorithms.prototype.objectToPost=function(object,name){var obj={};for(key in object){var key_str;switch(key_str=name?name+"["+key+"]":key,typeof object[key]){case"string":obj[""+key_str]=object[key];break;case"number":obj[""+key_str]=object[key];break;case"boolean":obj[""+key_str]=object[key];break;case"array":var new_obj=this.objectToPost(object[key],key_str);for(j in new_obj)obj[j]=new_obj[j];break;case"object":var new_obj=this.objectToPost(object[key],key_str);for(j in new_obj)obj[j]=new_obj[j]}}return obj},CsAlgorithms.prototype.perseJson=function(response){var json_response=!1;try{json_response=$.parseJSON(response)}catch(err){}return json_response?json_response:{}},CsAlgorithms.prototype.parseJson=function(response){var json_response=!1;try{json_response=$.parseJSON(response)}catch(err){}return json_response?json_response:{}},CsAlgorithms.prototype.formToArray=function(elements,params){params||(params={});var domElement=!1,domElementContainer=!1;params.domElement&&(domElement=!0,domElementContainer=$("#"+params.domElement));for(var result={},i=0;i<elements.length;i++)if((!params.hasName||elements[i].name)&&(!domElement||domElementContainer.has($(elements[i])).length))switch(elements[i].type){case"text":var value=elements[i].value;$(elements[i]).hasClass("cs-input-field-design-default-text")&&(value=""),(value||params.all)&&(result[elements[i].name]={},result[elements[i].name].name=elements[i].name,"css"==elements[i].name?result[elements[i].name].value=this.urlEncode(value):result[elements[i].name].value=value,result[elements[i].name].type=elements[i].type,params.rel&&(result[elements[i].name].rel=elements[i].getAttribute("rel")));break;case"hidden":var value=elements[i].value;$(elements[i]).hasClass("cs-input-field-design-default-text")&&(value=""),(value||params.all)&&(result[elements[i].name]={},result[elements[i].name].name=elements[i].name,result[elements[i].name].value=value,result[elements[i].name].type=elements[i].type),params.rel&&(result[elements[i].name].rel=elements[i].getAttribute("rel"));break;case"textarea":var value=elements[i].value;$(elements[i]).hasClass("cs-input-field-design-default-text")&&(value=""),(value||params.all)&&(result[elements[i].name]={},result[elements[i].name].name=elements[i].name,result[elements[i].name].value=value,result[elements[i].name].type=elements[i].type,params.rel&&(result[elements[i].name].rel=elements[i].getAttribute("rel")));break;case"checkbox":(elements[i].value&&1==elements[i].checked||params.all)&&(result[elements[i].name]={},result[elements[i].name].name=elements[i].name,1==elements[i].checked&&(result[elements[i].name].value=elements[i].value),result[elements[i].name].type=elements[i].type,params.rel&&(result[elements[i].name].rel=elements[i].getAttribute("rel")));break;case"radio":(1==elements[i].checked&&elements[i].value||params.all)&&(result[elements[i].name]||(result[elements[i].name]={}),result[elements[i].name].name=elements[i].name,1==elements[i].checked&&(result[elements[i].name].value=elements[i].value),result[elements[i].name].type=elements[i].type);break;case"select-one":(elements[i].options[elements[i].selectedIndex].value||params.all)&&(result[elements[i].name]||(result[elements[i].name]={}),result[elements[i].name].name=elements[i].name,elements[i].options[elements[i].selectedIndex].value&&(result[elements[i].name].value=elements[i].options[elements[i].selectedIndex].value),result[elements[i].name].type=elements[i].type,params.rel&&(result[elements[i].name].rel=elements[i].getAttribute("rel")))}return result},CsAlgorithms.prototype.length_limit=function(field,maxChars){return field.value.length>=maxChars?(field.value=field.value.substr(0,maxChars),!1):void 0},CsAlgorithms.prototype.formArrayToPost=function(form_array){var obj={};for(i in form_array)form_array[i].name&&(obj[""+form_array[i].name]=form_array[i].value);return obj},CsAlgorithms.prototype.formToPost=function(elements,params){var form=this.formToArray(elements,params),obj=this.formArrayToPost(form);return obj},CsAlgorithms.prototype.isArray=function(input){return"object"==typeof input&&input instanceof Array?!0:!1},CsAlgorithms.prototype.urlEncode=function(str){return escape(str).replace("+","%2B").replace("%20","+").replace("*","%2A").replace("/","%2F").replace("@","%40")},CsAlgorithms.prototype.getToObject=function(get){for(var object={},params=get.split(/\&/),j=0;j<params.length;j++){var all=params[j].split(/=/);"Microsoft Internet Explorer"==navigator.appName&&1==all.length&&-1!=String(params[j]).indexOf("=")&&(all[0]=params[j].substring(0,params[j].indexOf("=")),all[1]=params[j].substring(params[j].indexOf("=")+1));for(var left=all[0],right=all[1],left_parts=left.split(/\[/),container=object,i=0;i<left_parts.length-1;i++){var identifier=left_parts[i].replace(/\]$/,"");container[identifier]||(container[identifier]={}),container=container[identifier]}container[left_parts[left_parts.length-1].replace(/\]$/,"")]=right}return object},CsAlgorithms.prototype.searchToObject=function(q,ol){var b,cv,e,k,ma,sk,v,r={},d=function(v){return decodeURIComponent(v).replace(/\+/g," ")},s=/([^&;=]+)=?([^&;]*)/g;for("boolean"!=typeof ol&&(ol=!1),ma=function(v){return"object"!=typeof v&&(cv=v,v={},ol&&(v.length=0),cv&&Array.prototype.push.call(v,cv)),v};e=s.exec(q);)b=e[1].indexOf("["),v=d(e[2]),0>b?(k=d(e[1]),r[k]?(r[k]=ma(r[k]),Array.prototype.push.call(r[k],v)):r[k]=v):(k=d(e[1].slice(0,b)),sk=d(e[1].slice(b+1,e[1].indexOf("]",b))),r[k]=ma(r[k]),sk?r[k][sk]=v:Array.prototype.push.call(r[k],v));return r},CsAlgorithms.prototype.parseUrl=function(url){var a=document.createElement("a");return a.href=url,a},CsAlgorithms.prototype.getQueryString=function(url){var query_string=this.parseUrl(url).search;return"?"==query_string.substring(0,1)?query_string.substring(1,query_string.length):query_string},CsAlgorithms.prototype.isset=function(variable){return"undefined"!=typeof variable?!0:!1},CsAlgorithms.prototype.formArrayToGet=function(object){str="";for(var i in object)str+="&"+object[i].name+"="+(object[i].value?object[i].value:"");return str},CsAlgorithms.prototype.objectToGET=function(object,name,params){str="","undefined"==typeof params&&(params={});for(key in object)if("show"!=name){var key_str;switch(key_str=name?name+"["+(params.noKeys?"":key)+"]":key,typeof object[key]){case"string":str+="&"+key_str+"="+object[key];break;case"number":str+="&"+key_str+"="+object[key];break;case"boolean":str+="&"+key_str+"="+object[key];break;case"array":str+=this.objectToGET(object[key],key_str,params);break;case"object":str+=this.objectToGET(object[key],key_str,params)}}return str},CsAlgorithms.prototype.isNumber=function(n){return!isNaN(parseFloat(n))&&isFinite(n)},CsAlgorithms.prototype.validateEmail=function(email){var re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(email)},CsAlgorithms.prototype.in_array=function(needle,haystack){for(var length=haystack.length,i=0;length>i;i++)if(haystack[i]==needle)return!0;return!1},CsAlgorithms.prototype.sameObject=function(a,b,strict){if("boolean"!=typeof strict&&(strict=!1),"object"!=typeof a&&"object"!=typeof b){if(strict){if(typeof a!=typeof b)return!1;if(a!==b)return!1}else if(a!=b)return!1;return!0}if("object"==typeof a&&"object"!=typeof b||"object"!=typeof a&&"object"==typeof b)return!1;if(null===a&&null!==b||null!==a&&null===b)return!1;var aProps=Object.keys(a),bProps=Object.keys(b);if(aProps.length!=bProps.length)return!1;for(var k in aProps){var prop=aProps[k],inB=bProps.indexOf(prop);if(-1==inB)return!1;if("object"==typeof a[prop]){if(!this.sameObject(a[prop],b[prop]))return!1}else if(strict){if(b[prop]!==a[prop])return!1}else if(b[prop]!=a[prop])return!1;bProps.splice(inB,1)}return 0<bProps.length?!1:!0},CsAlgorithms.prototype.numberToFriendly=function(number){return"number"!=typeof number&&(number=parseInt(number)),number>=1e6?(number/1e6).toFixed(1)+"m":number>=1e3?(number/1e3).toFixed(1)+"k":number},Cs.prototype.modules=function(){var self=this;return new CsModules({_parent:self})},CsModules.prototype.addModule=function(name,options){options||(options={}),options._parent=this;var module=new CsModulesModule(name,options);this._parent.modules_list[name]=module},CsModules.prototype.getModule=function(name){this._parent.modules_list;return this._parent.modules_list[name]?this._parent.modules_list[name]:void 0},CsModulesModule.prototype.reload=function(params){if(!this.container)return!1;var url=this.getUrl(params),self=this;$.get(url,function(response){response&&self.container.replaceWith(response)})},CsModulesModule.prototype.getUrl=function(params){params||(params={});var name_parts=this.name.split("_"),controller=name_parts.splice(0,1),action=name_parts.join("-"),url=this._parent._parent.options.site_url+"modules/"+controller+"/"+action,get_str=this._parent._parent.algorithms().objectToGET(params);return url=get_str?url+"?"+get_str:url},Cs.prototype.mods=function(){var self=this;return new CsMods({_parent:self})},CsMods.prototype.setParam=function(key,value){return"undefined"==typeof key||""==$.trim(key)?!1:"undefined"==typeof value?!1:(this.params[key]=value,!0)},CsMods.prototype.getDOMElement=function(options){if("undefined"==this.params.actor_id||!cs.algorithms().isNumber(this.params.actor_id))return!1;if(options||(options={}),options._parent=this,"undefined"==typeof options.name||""==$.trim(options.name))return!1;var data={name:$.trim(options.name.replace(/[^A-Za-z0-9_]*/g,""))},mod_name=data.name;"undefined"!=typeof options.specificName&&""!=$.trim(options.specificName)&&(data.specific_name=$.trim(options.specificName.replace(/[^A-Za-z0-9_]*/g,"")),mod_name=data.specific_name);var module=$('*[data-mod-name="'+mod_name+'"]');return module.length?module:!1},CsMods.prototype.reload=function(options){if("undefined"==this.params.actor_id||!cs.algorithms().isNumber(this.params.actor_id))return!1;if(options||(options={}),options._parent=this,"undefined"==typeof options.name||""==$.trim(options.name))return!1;var data={name:$.trim(options.name.replace(/[^A-Za-z0-9_]*/g,""))},mod_name=data.name;"undefined"!=typeof options.specificName&&""!=$.trim(options.specificName)&&(data.specific_name=$.trim(options.specificName.replace(/[^A-Za-z0-9_]*/g,"")),mod_name=data.specific_name),"undefined"!=typeof options.customTemplate&&""!=$.trim(options.customTemplate)&&(data.custom_template=$.trim(options.customTemplate.replace(/[^A-Za-z0-9_]*/g,""))),"undefined"!=typeof options.args&&$.isPlainObject(options.args)&&(data.args=options.args);var insertOptions={};if("string"==typeof options.modGroup&&""!=$.trim(options.modGroup)){options.modGroup=$.trim(options.modGroup),insertOptions.modGroup=options.modGroup;var module=$('*[data-mod-group="'+options.modGroup+'"] *[data-mod-name="'+mod_name+'"]')}else var module=$('*[data-mod-name="'+mod_name+'"]');return module.length?("function"==typeof options.callback&&(insertOptions.callback=options.callback),"boolean"==typeof options.skipIfEmpty&&(insertOptions.skipIfEmpty=options.skipIfEmpty),void this._insert(data,"replace",insertOptions)):!1},CsMods.prototype.add=function(options){if("undefined"==typeof this.params.actor_id||!cs.algorithms().isNumber(this.params.actor_id))return!1;if(options||(options={}),"undefined"==typeof options.name||""==$.trim(options.name))return!1;var data={name:$.trim(options.name.replace(/[^A-Za-z0-9_]*/g,""))},mod_name=data.name;if("undefined"!=typeof options.specificName&&""!=$.trim(options.specificName)&&(data.specific_name=$.trim(options.specificName.replace(/[^A-Za-z0-9_]*/g,"")),mod_name=data.specific_name),"undefined"!=typeof options.customTemplate&&""!=$.trim(options.customTemplate)&&(data.custom_template=$.trim(options.customTemplate.replace(/[^A-Za-z0-9_]*/g,""))),"undefined"!=options.args&&""!=$.trim(options.args)&&(data.args=options.args),"function"==typeof options.callback?this.setParam("callback",options.callback):delete this.params.callback,$('*[data-mod-name="'+mod_name+'"]').length)return"boolean"!=typeof options.forceReload&&(options.forceReload=!1),options.forceReload?(this._insert(data,"replace"),!0):(this.unhide(mod_name),!0);if("undefined"==typeof options.placement)return!1;var placement=this._getPositioning(options.placement);if(!placement)return!1;var insertOptions={placement:placement};return"function"==typeof options.callback&&(insertOptions.callback=options.callback),this._insert(data,"place",insertOptions),!0},CsMods.prototype._getPositioning=function(positioning){if("undefined"==typeof positioning)return!1;$.isArray(positioning)||(positioning=[positioning]);var positioningRule={};return $.each(positioning,function(index,rule){if("undefined"!=typeof rule.targetMod&&""!=$.trim(rule.targetMod)){var target=$('*[data-mod-name="'+rule.targetMod+'"]');if(target.length)return positioningRule.element=target,"undefined"!=typeof rule.position&&""!=rule.position&&-1!=["before","after"].indexOf(rule.position)?positioningRule.position=rule.position:positioningRule.position="after",!1}if("undefined"!=typeof rule.modGroup&&""!=$.trim(rule.modGroup)){var group=$('*[data-mod-group="'+rule.modGroup+'"]');if(group.length)return positioningRule.element=group,"undefined"!=typeof rule.position&&""!=rule.position&&-1!=["prepend","append"].indexOf(rule.position)?positioningRule.position=rule.position:positioningRule.position="append",!1}}),"undefined"==typeof positioningRule.element?!1:positioningRule},CsMods.prototype._insert=function(data,method,options){if("undefined"==this.params.actor_id||!cs.algorithms().isNumber(this.params.actor_id))return!1;if("undefined"==typeof data.name||""==$.trim(data.name))return!1;if("undefined"==typeof method||""==$.trim(method)||-1==["place","replace"].indexOf(method))return!1;var self=this,taskId=data.name+"_"+Math.floor(10000000001*Math.random());self.loadingMods[taskId]=data;var url=this._parent.options.resource_url+"profile/"+this.params.actor_id+"/main/ajax-load-mod";return $.post(url,data,function(response){return delete self.loadingMods[taskId],"undefined"==typeof response||"undefined"==typeof response.data?!1:"undefined"==typeof response.data.html?!1:"undefined"==typeof response.data.mod_name?!1:void self._write(response.data,method,options)},"json"),!0},CsMods.prototype._write=function(moduleData,method,options){if(!moduleData)return!1;if("undefined"==typeof method||""==$.trim(method)||-1==["place","replace"].indexOf(method))return!1;if(""==moduleData.html&&"undefined"!=typeof options.skipIfEmpty&&1==options.skipIfEmpty)return"function"==typeof options.callback&&options.callback.call(),!1;if("replace"==method){if("string"==typeof options.modGroup&&""!=options.modGroup)var target=$('*[data-mod-group="'+options.modGroup+'"] *[data-mod-name="'+moduleData.mod_name+'"]');else var target=$('*[data-mod-name="'+moduleData.mod_name+'"]');if(!target.length)return!1;target.replaceWith(moduleData.html)}if("place"==method){if("undefined"==typeof options.placement||!options.placement)return!1;if(!options.placement.element instanceof jQuery)return!1;switch(options.placement.position){case"before":options.placement.element.before(moduleData.html);break;case"after":options.placement.element.after(moduleData.html);break;case"prepend":options.placement.element.prepend(moduleData.html);break;case"append":options.placement.element.append(moduleData.html)}}"function"==typeof options.callback&&options.callback.call()},CsMods.prototype.unhide=function(modNames){return"undefined"==typeof modNames||"string"==typeof modNames&&""==$.trim(modNames)?!1:($.isArray(modNames)||(modNames=[modNames]),void $.each(modNames,function(index,mod_name){$('*[data-mod-name="'+mod_name+'"]').removeClass("hidden")}))},CsMods.prototype.hide=function(modNames){return"undefined"==typeof modNames||"string"==typeof modNames&&""==$.trim(modNames)?!1:($.isArray(modNames)||(modNames=[modNames]),void $.each(modNames,function(index,mod_name){$('*[data-mod-name="'+mod_name+'"]').addClass("hidden")}))},CsMods.prototype.getContainer=function(modName){return"undefined"==typeof modName||"string"==typeof modName&&""==$.trim(modName)?!1:$('*[data-mod-name="'+modName+'"]')},CsMods.prototype.remove=function(modNames){return"undefined"==typeof modNames||"string"==typeof modNames&&""==$.trim(modNames)?!1:($.isArray(modNames)||(modNames=[modNames]),void $.each(modNames,function(index,mod_name){$('*[data-mod-name="'+mod_name+'"]').remove()}))},CsMods.prototype.filter=function(mods,modGroups,options){if(options||(options={}),"undefined"==typeof mods||"string"==typeof mods&&""==$.trim(mods))return!1;if("undefined"==typeof modGroups||"string"==typeof modGroups&&""==$.trim(modGroups))return!1;("boolean"!=options.saveFilterSettings||0!=options.saveFilterSettings)&&(this.lastFilterModList=mods,this.lastFilterGroupList=modGroups,this.lastFilterOptions=options);var self=this;self.callbackInterval&&clearInterval(self.callbackInterval),$.isArray(mods)||(mods=[mods]),$.isArray(modGroups)||(modGroups=[modGroups]);var modNames=[],modOptions={};if($.each(mods,function(index,mod){if("string"==typeof mod&&""!=$.trim(mod))modNames.push($.trim(mod));else if("object"==typeof mod){var modName=!1,validMod=!1;"undefined"!=typeof mod.name&&""!=$.trim(mod.name)&&(validMod=!0,modName=$.trim(mod.name)),"undefined"!=typeof mod.specificName&&""!=$.trim(mod.specificName)&&(modName=$.trim(mod.specificName)),modName&&(modNames.push(modName),"undefined"==typeof mod.placement&&"undefined"==typeof mod.forceReload&&(validMod=!1),validMod&&(modOptions[modName]=mod))}}),$.each(modGroups,function(index,modGroup){$('*[data-mod-group="'+$.trim(modGroup)+'"] *[data-mod-name]').each(function(){var modName=$(this).data("mod-name");if(-1==modNames.indexOf(modName))$(this).addClass("hidden");else{var thisModOptions=modOptions[modName];"undefined"!=typeof thisModOptions&&("undefined"!=typeof thisModOptions.forceReload&&thisModOptions.forceReload||"boolean"==typeof options.forceReloadAll&&1==options.forceReloadAll)?self.reload(thisModOptions):$(this).removeClass("hidden"),modNames.splice(modNames.indexOf($(this).data("mod-name")),1)}})}),modNames.length&&$.each(modNames,function(index,modName){"undefined"!=typeof modOptions[modName]&&self.add(modOptions[modName])}),"function"==typeof options.callback){var counter=0;self.callbackInterval=setInterval(function(){
counter++,self.allModsLoaded()?(clearInterval(self.callbackInterval),options.callback.call()):counter>300&&clearInterval(self.callbackInterval)},100)}},CsMods.prototype.allModsLoaded=function(){var count=0;for(var taskId in this.loadingMods)this.loadingMods.hasOwnProperty(taskId)&&count++;return count>0?!1:!0},CsMods.prototype.forceReloadAll=function(){var options=$.extend({},this.lastFilterOptions);options.forceReloadAll=!0,options.saveFilterSettings=!1,this.filter(this.lastFilterModList,this.lastFilterGroupList,options)},Cs.prototype.messages=function(){var self=this;return new CsMessages({_parent:self})},CsMessages.prototype.messageSender=function(options){options||(options={});var self=this;return options._parent=self,new CsMessagesMessageSender(options)},CsMessagesMessageSender.prototype.enableDisableButton=function(e){var self=this;self.options.sendButtonDisabledClass?setTimeout(function(){self.messageContainer.val()&&self.receiversContainer.val()&&self.receiversContainer.val().length<=self.options.maxTextLen?self.sendButtonContainer.removeClass(self.options.sendButtonDisabledClass):self.sendButtonContainer.addClass(self.options.sendButtonDisabledClass)},1):self.options.sendButtonObject&&setTimeout(function(){self.messageContainer.val()&&self.receiversContainer.val()&&self.messageContainer.val().length<=self.options.maxTextLen?self.options.sendButtonObject.enable():self.options.sendButtonObject.disable()},1)},CsMessagesMessageSender.prototype.enableDisableButtonObj=function(e){},CsMessagesMessageSender.prototype.setSenderId=function(actor_id){actor_id&&(this.options.fromActorId=actor_id)},CsMessagesMessageSender.prototype.setSendingUrl=function(url){return url?void(this.options.url=url):!1},CsMessagesMessageSender.prototype.clearSenderId=function(){this.options.fromActorId=!1,this.post.from_actor_id=!1},CsMessagesMessageSender.prototype.send=function(){if(this.subjectContainer&&(this.post.subject=this.subjectContainer.val()),this.messageContainer&&(this.post.message=this.messageContainer.val()),this.receiversContainer&&(this.post.receivers=this.receiversContainer.val()),this.value1Container&&(this.post.value1=this.value1Container.val()),this.post.from_actor_id=this.options.fromActorId||this.post.from_actor_id,this.post.conversation_id=this.options.conversationId||this.post.conversation_id,this.options.value1&&(this.post.value1=this.options.value1),!this.post.message)return!1;if(!this.post.receivers)return!1;var self=this;return this.onSend(),$.post(this.options.url,this.post,function(response){self.sendResponse(response)},"json"),!0},CsMessagesMessageSender.prototype.sendResponse=function(response){response&&"ok"==response.status&&this.onSuccess(response)},CsMessages.prototype.messagesList=function(container,json,options){var _self=this;return options._parent=_self,new CsMessagesList(container,json,options)},CsMessagesList.prototype.PostMessage=function(){},CsMessagesList.prototype.SetReaded=function(){alert("fff"),e=!0,e},Cs.prototype.invites=function(){var self=this;return new CsInvites({_parent:self})},CsInvites.prototype.inviteSender=function(options){options||(options={});var self=this;return options._parent=self,"undefined"==typeof options.version||1==options.version?new CsInvitesSender(options):2==options.version?new CsInvitesSenderV2(options):void 0},CsInvitesSender.prototype.setApplicationId=function(application_id){return application_id?(this.post.application_id=application_id,void(this.options.applicationId=application_id)):!1},CsInvitesSender.prototype.removeApplicationId=function(){this.post.application_id=null,this.options.applicationId=null},CsInvitesSender.prototype.setSenderID=function(sender_id){return sender_id?void(this.options.fromActorId=sender_id):!1},CsInvitesSender.prototype.enableDisableButton=function(e){var self=this;setTimeout(function(){self.receiversContainer.val()?self.sendButtonContainer.removeClass(self.options.sendButtonDisabledClass):self.sendButtonContainer.addClass(self.options.sendButtonDisabledClass)},3)},CsInvitesSender.prototype.disableButton=function(e){var self=this;self.sendButtonContainer.addClass(self.options.sendButtonDisabledClass)},CsInvitesSender.prototype.enableButton=function(e){var self=this;setTimeout(function(){self.sendButtonContainer.removeClass(self.options.sendButtonDisabledClass)},1)},CsInvitesSender.prototype.setInviteTo=function(id){id&&(this.options.inviteTo=id)},CsInvitesSender.prototype.setInviteType=function(type){type&&(this.options.inviteType=type)},CsInvitesSender.prototype.send=function(){if(this.receiversContainer&&(this.post.receivers=this.receiversContainer.val()),this.messageContainer&&(this.post.message=this.messageContainer.val()),this.post.from_actor_id=this.options.fromActorId||this.post.from_actor_id,this.post.invite_to=this.options.inviteTo||!1,this.post.invite_type=this.options.inviteType||!1,!this.post.receivers)return!1;this.options.applyTo&&(this.post.apply_to=this.options.applyTo),this.options.adminMakeApplicantObj&&(this.post.admin_make_applicant=this.options.adminMakeApplicantObj.isChecked()),this.options.objects_ids&&(this.post.objects_ids=this.options.objects_ids),this.options.firstNameObj&&""!=$.trim(this.options.firstNameObj.getValue())&&(this.post.first_name=this.options.firstNameObj.getValue()),this.options.lastNameObj&&""!=$.trim(this.options.lastNameObj.getValue())&&(this.post.last_name=this.options.lastNameObj.getValue());var self=this;$.post(this.options.url,this.post,function(response){self.sendResponse(response)},"json")},CsInvitesSender.prototype.sendResponse=function(response){response&&("ok"==response.status?this.onSuccess(response):this.onFail(response))},CsInvitesSenderV2.prototype.setApplicationId=function(application_id){return application_id?(this.post.application_id=application_id,void(this.options.applicationId=application_id)):!1},CsInvitesSenderV2.prototype.removeApplicationId=function(){this.post.application_id=null,this.options.applicationId=null},CsInvitesSenderV2.prototype.setSenderID=function(sender_id){return sender_id?void(this.options.fromActorId=sender_id):!1},CsInvitesSenderV2.prototype.enableDisableButton=function(e){var self=this;setTimeout(function(){self.receiversContainer.val()?self.sendButton.enable():self.sendButton.disable()},3)},CsInvitesSenderV2.prototype.disableButton=function(e){var self=this;self.sendButton.disable()},CsInvitesSenderV2.prototype.enableButton=function(e){var self=this;setTimeout(function(){self.sendButton.enable()},1)},CsInvitesSenderV2.prototype.setInviteTo=function(id){id&&(this.options.inviteTo=id)},CsInvitesSenderV2.prototype.setInviteType=function(type){type&&(this.options.inviteType=type)},CsInvitesSenderV2.prototype.getReceiversCount=function(type){var receivers=this.receiversContainer.val();return receivers=receivers.split(":"),receivers?receivers.length:void 0},CsInvitesSenderV2.prototype.send=function(){if(this.receiversContainer&&(this.post.receivers=this.receiversContainer.val()),this.messageContainer&&(this.post.message=this.messageContainer.val()),this.post.from_actor_id=this.options.fromActorId||this.post.from_actor_id,this.post.invite_to=this.options.inviteTo||!1,this.post.invite_type=this.options.inviteType||!1,!this.post.receivers)return!1;this.options.applyTo&&(this.post.apply_to=this.options.applyTo),this.options.adminMakeApplicantObj&&(this.post.admin_make_applicant=this.options.adminMakeApplicantObj.isChecked()),this.options.objects_ids&&(this.post.objects_ids=this.options.objects_ids),this.options.firstNameObj&&""!=$.trim(this.options.firstNameObj.getValue())&&(this.post.first_name=this.options.firstNameObj.getValue()),this.options.lastNameObj&&""!=$.trim(this.options.lastNameObj.getValue())&&(this.post.last_name=this.options.lastNameObj.getValue()),this.options.makeParticipant&&(this.post.make_participant=1);var self=this;$.post(this.options.url,this.post,function(response){self.sendResponse(response)},"json")},CsInvitesSenderV2.prototype.sendResponse=function(response){response&&("ok"==response.status?this.onSuccess(response):this.onFail(response))},Block.prototype.on=function(eventInfo,callback){var self=this;if("string"!=typeof eventInfo||""==$.trim(eventInfo))return!1;if("function"!=typeof callback)return!1;var mappedEvents=eventInfo.split(" ");for(var k in mappedEvents){var mappedEvent=mappedEvents[k],eventType="",eventName="";if(-1!=mappedEvent.indexOf(".")){var eventData=mappedEvent.split(".");eventType=eventData[0],eventName=eventData[1]}else eventType=mappedEvent,eventName="e"+Math.floor(100000001*Math.random());"object"!=typeof this.events[eventType]&&(this.events[eventType]={},null!==this.eventTarget&&"object"==typeof this.eventTarget&&this.eventTarget.on(eventType+".blockDefault",function(e){self.disabled||self.trigger(eventType,e)})),this.events[eventType][eventName]=callback}return this},Block.prototype.off=function(eventInfo){if("string"!=typeof eventInfo||""==$.trim(eventInfo))return!1;var eventType="",eventName="";if(-1!=eventInfo.indexOf(".")){var eventData=eventInfo.split(".");eventType=eventData[0],eventName=eventData[1],"undefined"!=typeof this.events[eventType][eventName]&&delete this.events[eventType][eventName],"undefined"!=typeof this.events[eventType]&&0==Object.keys(this.events[eventType]).length&&delete this.events[eventType]}else eventType=eventInfo,"undefined"!=typeof this.events[eventType]&&delete this.events[eventType];return this},Block.prototype.mapParametricEvents=function(){for(var prop in this.options)if(0===prop.indexOf("on")&&"function"==typeof this.options[prop]){var eventType=prop.substr(2).toLowerCase();this.on(eventType,this.options[prop])}},Block.prototype.setEventTarget=function(newTarget){var self=this;if("undefined"==typeof newTarget||!(newTarget instanceof jQuery))return console.log("Cannot change eventTarget to non-jQuery object"),!1;if(null!==this.eventTarget&&"object"==typeof this.eventTarget)for(var eventType in this.events)this.eventTarget.off(eventType+".blockDefault");this.eventTarget=newTarget;for(var eventType in this.events)this.eventTarget.on(eventType+".blockDefault",function(e){self.disabled||self.trigger(e.type,e)});return!0},Block.prototype.trigger=function(eventType,args){var self=this;if("string"!=typeof eventType||""==$.trim(eventType))return!1;if("object"!=typeof this.events[eventType])return!1;"undefined"==typeof args?args=[]:$.isArray(args)||(args=[args]);for(var eventName in this.events[eventType])self.events[eventType][eventName].apply(self,args);return!0},extend(Block,Component),Component.prototype.showError=function(){return this.container.addClass("form-error"),this.options.hasError=!0,this},Component.prototype.hideError=function(){return this.container.removeClass("form-error"),this.options.hasError=!1,this},Component.prototype.getWrapperId=function(){return this.container.attr("id")},Component.prototype.buildContainer=function(containerName){("string"!=typeof containerName||""==$.trim(containerName))&&(containerName="container"),this.topLevel&&this[containerName].addClass("component"),"string"!=typeof this.options.containerClass||""==$.trim(this.options.containerClass)?this[containerName].addClass(this.componentType):this[containerName].addClass(this.options.containerClass),"string"==typeof this.options.size&&""!=$.trim(this.options.size)&&this[containerName].addClass("size-"+this.options.size),"string"==typeof this.options.color&&""!=$.trim(this.options.color)&&this[containerName].addClass("color-"+this.options.color),"string"==typeof this.options.customClassName&&""!=$.trim(this.options.customClassName)&&this[containerName].addClass(this.options.customClassName),"boolean"!=typeof this.options.fullWidth||1!=this.options.fullWidth||this[containerName].hasClass("full-width")||this[containerName].addClass("full-width"),"number"==typeof this.options.width&&0<this.options.width&&this[containerName].width(this.options.width),"number"==typeof this.options.height&&0<this.options.height&&this[containerName].height(this.options.height)},Component.prototype.bindDefaultEvents=function(){var self=this;return null===this.eventTarget||"object"!=typeof this.eventTarget?(console.log("Cannot bind events to "+this.componentType+" component #"+this.id+". No eventTarget defined."),!1):(this.on("mouseenter.componentDefault",function(e){self.container.addClass("hover")}),this.on("mouseleave.componentDefault",function(e){self.container.removeClass("hover")}),this.on("focus.componentDefault",function(e){self.container.addClass("focused")}),void this.on("blur.componentDefault",function(e){self.container.removeClass("focused")}))},Component.prototype.validIcon=function(iconOptions){return"string"==typeof iconOptions.text&&""!=$.trim(iconOptions.text)||"string"==typeof iconOptions.fa&&""!=$.trim(iconOptions.fa)||"string"==typeof iconOptions.svg&&""!=$.trim(iconOptions.svg)||"string"==typeof iconOptions.sprite&&""!=$.trim(iconOptions.sprite)?!0:!1},Component.prototype.buildIcon=function(iconContainer,iconOptions){if(!this.validIcon(iconOptions))return!1;if("string"==typeof iconOptions.text&&""!=$.trim(iconOptions.text))iconContainer.text(iconOptions.text);else if("string"==typeof iconOptions.fa&&""!=$.trim(iconOptions.fa))var icon=$("<i />",{"class":"fa "+iconOptions.fa}).appendTo(iconContainer);else if("string"==typeof iconOptions.svg&&""!=$.trim(iconOptions.svg)){var icon=$("<img />",{src:iconOptions.svg}).appendTo(iconContainer);"number"==typeof iconOptions.width&&icon.css({width:iconOptions.width+"px"}),"number"==typeof iconOptions.height&&icon.css({height:iconOptions.height+"px"})}else{if("undefined"==typeof iconOptions.sprite)return!1;var icon=$('<svg class="svg-sprite"><use xlink:href="#sprite-'+iconOptions.sprite+'"></use></svg>').appendTo(iconContainer),size=!1;hasWidth=!1,hasHeight=!1,"number"==typeof iconOptions.width&&(hasWidth=!0,size=iconOptions.width,icon.width(iconOptions.width)),"number"==typeof iconOptions.height&&(hasHeight=!0,!1===size&&(size=iconOptions.height),icon.height(iconOptions.height)),!1!==size&&(hasWidth||icon.width(size),hasHeight||icon.height(size)),"string"==typeof iconOptions.color&&(0===iconOptions.color.indexOf("#")||0===iconOptions.color.indexOf("rgba(")?icon.css("fill",iconOptions.color):icon.attr("class","svg-sprite sprite-color-"+iconOptions.color))}if("undefined"!=typeof icon){if("string"==typeof iconOptions.color&&icon.css("color",iconOptions.color),"object"==typeof iconOptions.css&&icon.css(iconOptions.css),"string"==typeof iconOptions.customClassName){var classes=[];"undefined"!=typeof icon.attr("class")&&(classes=icon.attr("class").split(" ")),-1==classes.indexOf(iconOptions.customClassName)&&classes.push(iconOptions.customClassName),classes=classes.join(" "),icon.attr("class",classes)}return icon}return!0},extend(Component,Clickable),Clickable.prototype._init=function(){var self=this;this.buildContainer(),this.captionContainer=$("<span />",{"class":"caption"}).appendTo(this.container),this.options.titleTooltip&&(this.captionContainer.attr("title",this.options.titleTooltip),this.captionContainer.addClass("cs-title-tip")),"string"==typeof this.options.title&&""!=$.trim(this.options.title)&&this.setTitle(this.options.title),"string"==typeof this.options.hoverText&&""!=$.trim(this.options.hoverText)&&(this.on("mouseover.captionHoverText",function(){self.captionContainer.css("width",self.captionContainer.outerWidth()+"px"),self.captionTitleContainer.text(self.options.hoverText)}),this.on("mouseout.captionHoverText",function(){self.captionContainer.css("width",""),self.captionTitleContainer.text(self.options.title)})),"object"==typeof this.options.icon&&(this.buildCaptionIcon(),this.buildIcon(this.captionIcon,this.options.icon)),this.disabled&&this.disable()},Clickable.prototype.buildCaptionIcon=function(propertyName,position,className){("string"!=typeof propertyName||""==$.trim(propertyName))&&(propertyName="captionIcon"),("string"!=typeof position||""==$.trim(position))&&(position="object"!=typeof this.options.icon||"string"!=typeof this.options.icon.position?"left":this.options.icon.position),("string"!=typeof className||""==$.trim(className))&&(className="icon"),this[propertyName]=$("<span />",{"class":className}),"right"==position?this[propertyName].appendTo(this.captionContainer):"left"==position&&this[propertyName].prependTo(this.captionContainer)},Clickable.prototype.disable=function(){return this.container.addClass("disabled"),this.container.prop("disabled",!0),this.disabled=!0,this},Clickable.prototype.enable=function(){return this.container.removeClass("disabled"),this.container.prop("disabled",!1),this.disabled=!1,this},Clickable.prototype.setTitle=function(title,insertBefore){var newCaption=!1;if("string"==typeof title&&""!=$.trim(title)&&(newCaption="number"==typeof this.options.cropTitle&&0<this.options.cropTitle&&title.length>this.options.cropTitle&&("boolean"!=typeof this.options.htmlTitle||0==this.options.htmlTitle)?title.substr(0,this.options.cropTitle)+"...":title),this.title=newCaption,newCaption){if("undefined"==typeof this.captionTitleContainer){var captionTitle=$("<span />",{"class":"title"});"undefined"!=typeof insertBefore&&insertBefore instanceof jQuery?this.captionTitleContainer=captionTitle.insertBefore(insertBefore):this.captionTitleContainer=captionTitle.appendTo(this.captionContainer)}"undefined"!=typeof this.captionTitleContainer&&this.captionTitleContainer.show(),"undefined"!=typeof this.captionTitleContainer&&("boolean"==typeof this.options.htmlTitle&&1==this.options.htmlTitle?this.captionTitleContainer.html(newCaption):this.captionTitleContainer.text(newCaption)),this.options.noTitle&&(this.captionContainer.attr("title",newCaption),this._parent.titleTips(this.captionContainer))}else this.captionContainer.attr("title",""),"undefined"!=typeof this.captionTitleContainer&&this.captionTitleContainer.hide();return this},extend(Component,Droppable),Droppable.prototype._init=function(){var self=this;this.buildContainer(),this.container.data({droppable:!0,parent:this._parent.id}),this.setPadding(),this.contentWrapper=$("<div />").addClass("droppable-content").appendTo(this.container),"number"==typeof this.options.maxDropHeight&&0<this.options.maxDropHeight&&this.contentWrapper.css({"max-height":this.options.maxDropHeight-this.padding.top-this.padding.bottom+"px","overflow-y":"auto"}),"number"==typeof this.options.maxDropWidth&&0<this.options.maxDropWidth&&this.contentWrapper.css("max-width",this.options.maxDropWidth-this.padding.left-this.padding.right+"px"),this._parent.on("click.showDrop",function(e){this.disabled||self.show()}),this.on("blur.hideDrop",function(){self.hide()}),$(document).on("click.hideDrop_"+this.id,function(e){self.onWindowClick(e)}),this.options.dropOnHover&&(cs.hoverDroppables[this.id]=this,this._parent.on("mouseenter.dropHover",function(e){if(!self._parent.disabled){"undefined"!=typeof self.dropHoverTimer&&clearTimeout(self.dropHoverTimer);for(var k in cs.hoverDroppables)cs.hoverDroppables[k]._parent.id!=this.id&&cs.hoverDroppables[k].hide();self.dropOutTimer=setTimeout(function(){self.show()},75)}}),this._parent.on("mouseleave.dropHover",function(e){self.dropHoverTimer=setTimeout(function(){1==self.allowHideOnHoverOut&&self.hide()},300),"undefined"!=typeof self.dropOutTimer&&clearTimeout(self.dropOutTimer)}),this.on("mouseenter.dropHover",function(e){null!==self.dropHoverTimer&&clearTimeout(self.dropHoverTimer),self.dropHoverTimer=null}),this.on("mouseleave.dropHover",function(e){self.dropHoverTimer=setTimeout(function(){1==self.allowHideOnHoverOut&&self.hide()},300)})),this.on("mouseenter.keepHover",function(e){var parentDrop=self._parent.container.parents().filter(function(){return $(this).data("droppable")===!0});if(parentDrop.length){var dropId=parentDrop.attr("id");"undefined"!=typeof cs.hoverDroppables[dropId]&&(clearTimeout(cs.hoverDroppables[dropId].dropHoverTimer),cs.hoverDroppables[dropId].dropHoverTimer=null)}})},Droppable.prototype.show=function(forceReposition){var self=this;if("boolean"!=typeof forceReposition&&(forceReposition=!1),this.displayed&&!forceReposition)return this;if(!this.contentInitialized){if("div"==this.contentType&&!1===this.buildDivContent(this.contentSource,this.contentOptions))return!1;this.contentInitialized=!0}this.scrollerInitialized||(this.contentWrapper.perfectScrollbar({useKeyboard:!1}),this.scrollerInitialized=!0),this.trigger("show"),this._parent.trigger("show");var newWidth=this.calcDropWidth();newWidth&&this.contentWrapper.css("width",newWidth+"px"),this.options.forceFullWidth?this.contentWrapper.css("min-width",this.parentContainer.outerWidth()-this.padding.left-this.padding.right+"px"):"number"==typeof this.options.minDropWidth&&0<this.options.minDropWidth&&this.contentWrapper.css("min-width",this.options.minDropWidth-this.padding.left-this.padding.right+"px");var pos=this.findPos(),parentBorder=this.parentContainer.css("border-bottom-width");parentBorder="string"==typeof parentBorder&&-1!=parentBorder.indexOf("px")?parseInt(parentBorder.replace("px","")):0;var containerBorder=this.container.css("border-top-width");containerBorder="string"==typeof containerBorder&&-1!=containerBorder.indexOf("px")?parseInt(containerBorder.replace("px","")):0;var newLeft=0,newTop=0,newTop=pos.top+this.parentContainer.height()-Math.max(parentBorder,containerBorder);if("number"==typeof this.options.dropOffsetY&&0!=this.options.dropOffsetY&&(newTop+=this.options.dropOffsetY),"boolean"!=typeof this.options.dropRight||0==this.options.dropRight)newLeft=pos.left,"number"==typeof this.options.dropOffsetX&&(newLeft+=this.options.dropOffsetX);else{var newLeft=pos.right;"number"==typeof this.options.dropOffsetX&&(newLeft-=this.options.dropOffsetX)}if(("boolean"==typeof this.options.dropAutoAlign||1==this.options.dropAutoAlign)&&0>newLeft&&(newLeft=0),"boolean"==typeof this.options.dropUp&&1==this.options.dropUp){var dropBottom=pos.top+this.container.outerHeight();if("object"==typeof this.options.dropRelativeTo?compareBottom=this.options.dropRelativeTo.offset().top+this.options.dropRelativeTo.height():compareBottom=$(window).scrollTop()+$(window).height(),dropBottom>compareBottom){parentBorder=this.parentContainer.css("border-top-width"),parentBorder="string"==typeof parentBorder&&-1!=parentBorder.indexOf("px")?parseInt(parentBorder.replace("px","")):0;var newTop=pos.bottom+Math.max(parentBorder,containerBorder);"number"==typeof this.options.dropOffsetY&&(newTop-=this.options.dropOffsetY)}}return this.container.css({top:newTop+"px",left:newLeft+"px"}).show(),this.displayed=!0,this.parentContainer.addClass("opened"),this.allowParentClose=!1,setTimeout(function(){self.allowParentClose=!0},5),this},Droppable.prototype.hide=function(){return this.displayed?(this.trigger("hide"),this._parent.trigger("hide"),this.parentContainer.removeClass("opened"),this.displayed=!1,this.container.hide(),null!==this.dropHoverTimer&&clearTimeout(this.dropHoverTimer),this.dropHoverTimer=null,this.allowParentClose=!1,this):this},Droppable.prototype.updateScroller=function(){this.scrollerInitialized?this.contentWrapper.perfectScrollbar("update"):(this.contentWrapper.perfectScrollbar({useKeyboard:!1}),this.scrollerInitialized=!0)},Droppable.prototype.findPos=function(){var offset=this.parentContainer.offset();return offset.right=offset.left+this.parentContainer.width()-this.container.outerWidth(),offset.bottom=offset.top-this.container.outerHeight(),offset},Droppable.prototype.setPadding=function(){if("number"==typeof this.options.padding)return this.padding={top:this.options.padding,right:this.options.padding,bottom:this.options.padding,left:this.options.padding},0!=this.options.padding&&this.container.css("padding",this.options.padding+"px"),!0;if("string"==typeof this.options.padding){var padding=this.options.padding.split(" ");for(var k in padding)padding[k]=parseInt(padding[k]);switch(padding.length){case 1:this.padding={top:padding[0],right:padding[0],bottom:padding[0],left:padding[0]};break;case 2:this.padding={top:padding[0],right:padding[1],bottom:padding[0],left:padding[1]};break;case 3:this.padding={top:padding[0],right:padding[1],bottom:padding[2],left:padding[1]};break;case 4:this.padding={top:padding[0],right:padding[1],bottom:padding[2],left:padding[3]}}return this.container.css("padding",this.padding.top+"px "+this.padding.right+"px "+this.padding.bottom+"px "+this.padding.left+"px"),!0}return!1},Droppable.prototype.calcDropWidth=function(){if("number"==typeof this.options.dropWidth&&0<this.options.dropWidth)return this.options.dropWidth;var parentWidth=this.parentContainer.outerWidth(),hPaddings=this.padding.left+this.padding.right,maxContentWidth=!1;"number"==typeof this.options.maxDropWidth&&(maxContentWidth=this.options.maxDropWidth-hPaddings);var prevWidth=this.contentWrapper.get(0).style.width;prevWidth="string"==typeof prevWidth&&-1!=prevWidth.indexOf("px")?parseInt(prevWidth.replace("px","")):0,this.contentWrapper.css("min-width","").css("width",""),"undefined"!=typeof this.content&&this.content.css("min-width","").css("width","");var maxHeight=this.contentWrapper.css("max-height");maxHeight="string"==typeof maxHeight&&-1!=maxHeight.indexOf("px")?parseInt(maxHeight.replace("px","")):0,this.contentWrapper.css("max-height",""),this.contentWrapper.css("max-width",""),this.container.css("display","block");var contentHeight=0,contentWidth=0;if("undefined"!=typeof this.content)var contentHeight=this.content.outerHeight(),contentWidth=this.content.outerWidth();this.container.css("display",""),"number"==typeof maxContentWidth&&maxContentWidth>0&&this.contentWrapper.css("max-width",maxContentWidth+"px");var forceWidth=!1;return maxHeight>0&&(contentHeight>maxHeight&&contentWidth+20>this.contentWrapper.outerWidth()&&(forceWidth=contentWidth+20),this.contentWrapper.css("max-height",maxHeight+"px")),forceWidth&&"number"==typeof maxContentWidth&&maxContentWidth>0&&forceWidth>maxContentWidth&&(forceWidth=maxContentWidth),forceWidth&&forceWidth>prevWidth&&forceWidth+hPaddings>parentWidth?forceWidth:prevWidth&&prevWidth+hPaddings>parentWidth?prevWidth:!1},Droppable.prototype.onWindowClick=function(e){if(this.displayed){if(e.target.id==this.id)return;var el_id2=$(e.target).parents("#"+this.id).attr("id");if(el_id2)return;var subDroppable=$(e.target).data("droppable")===!0?$(e.target):$(e.target).parents().filter(function(){return $(this).data("droppable")===!0});if(subDroppable.length){var is_me=$("#"+subDroppable.data("parent")).parents("#"+this.id).attr("id");if(is_me)return}if(!this.allowParentClose){if(e.target.id==this._parent.id)return;var el_id3=$(e.target).parents("#"+this._parent.id).attr("id");if(el_id3)return}if($(e.target).hasClass("ui-datepicker-next")||$(e.target).hasClass("ui-datepicker-prev"))return;this.trigger("blur",e)}},Droppable.prototype.buildContent=function(contentType,contentSource,contentOptions){var allowedContentTypes=["list","div","ajax"];if("string"!=typeof contentType||-1==allowedContentTypes.indexOf(contentType))return!1;switch(this.contentType=contentType,this.contentType){case"list":return this.buildListContent(contentSource,contentOptions);case"div":case"ajax":return this.contentSource=contentSource,this.contentOptions=contentOptions,!0}},Droppable.prototype.buildListContent=function(list,options){var self=this;return"object"!=typeof options&&(options={}),options=$.extend(!0,{showTick:!0,useIcons:!0,allowTextSearch:!1,selectDefault:!1},options),this.list=new Listable(this,options,list),this.list.buildErr?!1:this.list.attachTo(this.contentWrapper)?(this.list.on("keyPreselect.dropScroll",function(index,direction){if("number"==typeof self.options.maxDropHeight&&0<self.options.maxDropHeight){var currentScroll=self.contentWrapper.scrollTop();self.contentWrapper.scrollTop(0);var elem=self.list.listElements[index],topPosition=elem.position().top;if("string"==typeof direction&&"down"==direction){var elemHeight=elem.outerHeight();if(topPosition+elemHeight>self.options.maxDropHeight)return self.contentWrapper.scrollTop(0),self.contentWrapper.scrollTop(topPosition+elemHeight-self.options.maxDropHeight),!0}else if("string"==typeof direction&&"up"==direction&&currentScroll>topPosition)return self.contentWrapper.scrollTop(topPosition),!0;return self.contentWrapper.scrollTop(currentScroll),!1}}),this.content=this.list.container,this.contentInitialized=!0,this.list):!1},Droppable.prototype.buildDivContent=function(id,options){var self=this,target=$("#"+id);return target.length?(this.content=target.appendTo(this.contentWrapper),this.content.find("input").on("focus.preventDropHide",function(){self.allowHideOnHoverOut=!1}).on("blur.preventDropHide",function(){self.allowHideOnHoverOut=!0}),this.on("hide.blurInputs",function(){self.content.find("input").blur()}),this.content.is(":visible")||this.content.show(),this.contentInitialized=!0,this.content):!1},Droppable.prototype.buildAjaxContent=function(url,options){},Droppable.prototype.eventsAllowed=function(){return this.displayed&&!this._parent.disabled},extend(Component,Listable),Listable.prototype.validList=function(list){return"undefined"!=typeof list&&null!==list&&$.isArray(list)&&0!=list.length?!0:!1},Listable.prototype._init=function(list){var self=this;this.buildContainer(),this.validList(list)&&(this.listContent=list,this.buildList()),$(document).on("keydown.navigateList_"+this.id,function(e){"function"==typeof self._parent.eventsAllowed&&1==self._parent.eventsAllowed()&&[38,40].indexOf(e.keyCode)>-1&&e.preventDefault()}),$(document).on("keyup.navigateList_"+this.id,function(e){if("function"==typeof self._parent.eventsAllowed&&1==self._parent.eventsAllowed()){var event=e;setTimeout(function(){switch(event.which){case 40:return self.highlightedIndex===!1||self.highlightedIndex==self.listContent.length-1?void self.highlightElement(0,!0):void self.highlightElement(self.highlightedIndex+1,!0);case 38:return self.highlightedIndex===!1||0==self.highlightedIndex?void self.highlightElement(self.listContent.length-1,!0):void self.highlightElement(self.highlightedIndex-1,!0);case 13:return void(self.highlightedIndex!==!1?self.selectElement(event,self.highlightedIndex):self.selectElement(event,self.selectedIndex))}},1)}})},Listable.prototype.buildList=function(){var self=this;if(!this.validList(this.listContent))return!1;this.empty();for(var i in this.listContent)if(replacedText=this.listContent[i].text||"",this.listContent[i].text=replacedText.replace(/&lt;/g,"<").replace(/&gt;/g,">"),"boolean"!=typeof this.listContent[i].breakLine||0==this.listContent[i].breakLine){this.listElements[i]=$("<li />",{rel:i}).appendTo(this.container),"string"==typeof this.listContent[i].itemClass&&""!=$.trim(this.listContent[i].itemClass)&&this.listElements[i].addClass(this.listContent[i].itemClass);var tag="<span />";if("string"==typeof this.listContent[i].href)var tag="<a />";this.listElements[i].textContainer=$(tag,{text:this.listContent[i].text}).addClass("entry").prependTo(this.listElements[i]),"boolean"==typeof this.options.allowHTML&&1==this.options.allowHTML&&"string"==typeof this.listContent[i].html&&""!=$.trim(this.listContent[i].html)?this.listElements[i].textContainer.html(this.listContent[i].html):this.listElements[i].textContainer.text(this.listContent[i].text),"string"==typeof this.listContent[i].entryClassName&&""!=$.trim(this.listContent[i].entryClassName)&&this.listElements[i].textContainer.addClass(this.listContent[i].entryClassName),"number"==typeof this.listContent[i].indented&&1<this.listContent[i].indented?this.listElements[i].textContainer.css("padding-left",20*this.listContent[i].indented+"px"):("boolean"==typeof this.listContent[i].indented||1===this.listContent[i].indented)&&this.listElements[i].addClass("indented"),this.listContent[i].disabled&&this.listElements[i].addClass("disabled"),"boolean"==typeof this.listContent[i].hidden&&1==this.listContent[i].hidden&&this.listElements[i].addClass("hidden"),"string"==typeof this.listContent[i].href&&this.listElements[i].textContainer.attr("href",this.listContent[i].href),
"boolean"==typeof this.options.showTick&&1==this.options.showTick&&(this.listElements[i].tick=$("<span />",{"class":"tick"}).prependTo(this.listElements[i])),"object"==typeof this.listContent[i].icon&&1==this.options.useIcons&&(this.listElements[i].icon=$("<span />",{"class":"icon"}),this.options.showTick?this.listElements[i].icon.insertAfter(this.listElements[i].tick):this.listElements[i].icon.prependTo(this.listElements[i]),this.buildIcon(this.listElements[i].icon,this.listContent[i].icon)),"string"==typeof this.listContent[i].rightText&&""!=$.trim(this.listContent[i].rightText)&&(this.listElements[i].textRightContainer=$("<span />",{"class":"alt"}).text(this.listContent[i].rightText).appendTo(this.listElements[i])),this.selectedIndex==i&&this.options.buttonBehaviour&&this.options.buttonHideSelected&&this.listElements[i].hide(),this.listElements[i].on("click.default",function(e){self.selectElement(e,parseInt($(this).attr("rel")))}),this.listElements[i].on("mouseenter.default",function(e){var currentElement=parseInt($(this).attr("rel"));"string"==typeof self.listContent[currentElement].hoverText&&""!=$.trim(self.listContent[currentElement].hoverText)&&self.listElements[currentElement].textContainer.text(self.listContent[currentElement].hoverText),self.highlightElement(currentElement)}),"function"==typeof this.listContent[i].onMouseOver&&this.listElements[i].on("mouseenter.custom",function(e){self.listContent[i].onMouseOver.call(self,parseInt($(this).attr("rel")))}),this.listElements[i].on("mouseleave.default",function(e){var currentElement=parseInt($(this).attr("rel"));"string"==typeof self.listContent[currentElement].hoverText&&""!=$.trim(self.listContent[currentElement].hoverText)&&self.listElements[currentElement].textContainer.text(self.listContent[currentElement].text)}),"function"==typeof this.listContent[i].onMouseOut&&this.listElements[i].on("mouseleave.custom",function(e){self.listContent[i].onMouseOut.call(self,parseInt($(this).attr("rel")))})}else this.listElements[i]=$("<li />",{"class":"break"}).appendTo(this.container),$("<span />").appendTo(this.listElements[i]);this.reset(),this.initialized=!0},Listable.prototype.reset=function(){var defaultIndex=!1;for(var i in this.listContent)if("boolean"==typeof this.listContent[i].selected&&1==this.listContent[i].selected){defaultIndex=parseInt(i);break}if(!1!==defaultIndex)this.selectElement(null,defaultIndex);else if("boolean"==typeof this.options.selectDefault&&this.options.selectDefault)this.selectElement(null,0);else for(var i in this.listElements)this.listElements[i].removeClass("selected");return defaultIndex},Listable.prototype.attachTo=function(target){if("string"==typeof target){if(target=$("#"+target),!target.length)return!1}else if(!(target instanceof jQuery&&target.length))return!1;return this.container.prependTo(target),!0},Listable.prototype.highlightElement=function(index,fromKeypress){("number"!=typeof index||"number"!=typeof parseInt(index))&&(index=!1),"boolean"!=typeof fromKeypress&&(fromKeypress=!1);var old_index=this.highlightedIndex;this.highlightedIndex=index,direction=null,!1!==index&&(0==old_index?direction="down":old_index>index?direction="up":index>old_index&&(direction="down"));for(var i in this.listElements)this.listElements[i].removeClass("focused");index!==!1&&(this.listElements[this.highlightedIndex].addClass("focused"),fromKeypress&&this.trigger("keyPreselect",[index,direction]))},Listable.prototype.selectElement=function(e,index,triggerEvents){if("boolean"!=typeof triggerEvents&&(triggerEvents=!0),"number"!=typeof index)index=!1;else if(0>index||this.listContent.length<=index)return!1;var old_index=this.selectedIndex;if(this.selectedIndex=index,old_index!==index){var oldValue=!1===old_index?!1:this.listContent[old_index],newValue=!1===index?!1:this.listContent[index];for(var i in this.listElements)this.listElements[i].removeClass("selected");!1!==index&&this.listElements[index].addClass("selected"),triggerEvents&&this.initialized&&this.trigger("change",[newValue,oldValue])}this.initialized&&!1!==index&&"function"==typeof this.listContent[index].onClick&&this.listContent[index].onClick.apply(this,[e,index]),!1!==index&&triggerEvents&&(this.initialized?this.trigger("select",this.listContent[index]):this.trigger("preselect",this.listContent[index]))},Listable.prototype.setList=function(list,buildList){return this.validList(list)?(this.listContent=list,("boolean"!=typeof buildList||1==buildList)&&this.buildList(),!0):!1},Listable.prototype.empty=function(emptyContent){this.container.empty(),this.listElements=[],this.selectedIndex=!1,this.highlightedIndex=!1,"boolean"==typeof emptyContent&&1==emptyContent&&(this.listContent=[])},Listable.prototype.getIndexByValue=function(value){if("undefined"==typeof value)return!1;for(var j in this.listContent)if(this.listContent[j].value==value)return parseInt(j);return!1},Listable.prototype.getText=function(index){if("undefined"==typeof index)var index=this.selectedIndex;return!1===index?"":"string"!=typeof this.listContent[index].text?"":this.listContent[index].text},extend(Component,Typable),Typable.prototype._init=function(){this.buildContainer(),"string"==typeof this.options.placeholder?this.input.attr("placeholder",this.options.placeholder):"string"==typeof this.options.defaultText&&(this.options.placeholder=this.options.defaultText,this.input.attr("placeholder",this.options.defaultText)),"string"==typeof this.options.name&&""!=$.trim(this.options.name)&&this.input.attr("name",this.options.name),"object"==typeof this.options.attachment&&this.validIcon(this.options.attachment)&&(this.buildAttachment(),this.buildIcon(this.inputAttachment,this.options.attachment)),"boolean"==typeof this.options.notShowMaxLength&&(this.options.hideCounter=this.options.notShowMaxLength),"number"==typeof this.options.maxLength&&0<this.options.maxLength&&0==this.options.hideCounter&&this._setupCounter(),this.disabled&&this.disable(),this.options.hasError&&this.showError(),"boolean"==typeof this.options.formatNumeric&&1==this.options.formatNumeric&&("undefined"==typeof this.options.onlyNumbers&&(this.options.onlyNumbers=!0),"undefined"==typeof this.options.negativesAndDecimals&&(this.options.negativesAndDecimals=!0),"undefined"==typeof this.options.numberInput&&(this.options.numberInput=!0),this._formatNumber(!1)),"boolean"==typeof this.options.numberInput&&1==this.options.numberInput&&this.input.css("text-align","right"),"boolean"==typeof this.options.resizable&&1==this.options.resizable&&this._setupResize()},Typable.prototype.bindKeyEvents=function(){var self=this;this.input.on("paste.typableDefault",function(e){setTimeout(function(){self.trigger("paste",e)},10)}),this.input.on("keypress.typableDefault",function(e){if(e&&13==e.keyCode&&self.trigger("enter",[self.getValue(),e]),"boolean"==typeof self.options.onlyNumbers&&1==self.options.onlyNumbers){var evt=e||window.event,keycode=evt.keyCode||evt.which,specialkeys=[46,8,9,27,13];if(-1!=specialkeys.indexOf(keycode))return!0;if(65==keycode&&!0===evt.ctrlKey)return!0;if(navigator.platform.toUpperCase().indexOf("MAC")>=0&&e.metaKey&&97==keycode)return!0;if(keycode>=35&&39>=keycode)return!0;if("boolean"==typeof self.options.negativesAndDecimals&&1==self.options.negativesAndDecimals&&-1!=[45,190].indexOf(keycode))return!0;key=String.fromCharCode(keycode);var regex=/[0-9]|\.|,|\s/;return regex.test(key)?!0:(evt.returnValue=!1,evt.preventDefault&&evt.preventDefault(),!1)}}),this.input.on("keydown.typableDefault",function(e){"boolean"==typeof self.options.formatNumeric&&1==self.options.formatNumeric&&("undefined"!=typeof self.formatTimeout&&clearTimeout(self.formatTimeout),self.formatTimeout=setTimeout(function(){self._formatNumber.call(self)},200)),setTimeout(function(){self.trigger("keydown",e)},1)}),this.input.on("focus.changeMonitoring",function(e){self.preEditValue=self.input.val()}),this.input.on("blur.changeMonitoring",function(e){self.input.val()!=self.preEditValue&&self.trigger("update"),self.preEditValue=""}),"boolean"==typeof this.options.stopFillOnLimit&&(this.options.enforceLimit=this.options.stopFillOnLimit),this.input.on("keydown.typableLimit keyup.typableLimit paste.typableLimit",function(e){"number"==typeof self.options.maxLength&&0<self.options.maxLength&&"boolean"==typeof self.options.enforceLimit&&1==self.options.enforceLimit&&0>self._getRemainingChars()&&(self.setValue(self.getValue().substring(0,self.options.maxLength)),self._updateCounter(self._getRemainingChars()))})},Typable.prototype.disable=function(){return this.container.addClass("disabled"),this.input.prop("disabled",!0),this.disabled=!0,this},Typable.prototype.enable=function(){return this.container.removeClass("disabled"),this.input.prop("disabled",!1),this.disabled=!1,this},Typable.prototype.getValue=function(){return this.input.val()},Typable.prototype.setValue=function(val){return"string"!=typeof val&&"number"!=typeof val?!1:(this.input.val(val),this)},Typable.prototype._formatNumber=function(preserveCursorPos){var self=this;"boolean"!=typeof preserveCursorPos&&(preserveCursorPos=!0);var val=self.getValue();if(n=val.replace(/,/g,""),!isNaN(parseFloat(n))&&isFinite(n)){var parts=n.toString().split(".");parts[0]=parts[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");var result=parts.join(".");if(result!=val&&","!=val.charAt(val.length-1)){var diff=result.length-val.length,pos=self._getSelection();self.setValue(parts.join(".")),preserveCursorPos&&self._setSelection(pos.end+diff,pos.end+diff)}}},Typable.prototype._getSelection=function(){var position={},that=this.input.get(0);if(void 0===that.selectionStart){that.focus();var select=document.selection.createRange();position.length=select.text.length,select.moveStart("character",-that.value.length),position.end=select.text.length,position.start=position.end-position.length}else position.start=that.selectionStart,position.end=that.selectionEnd,position.length=position.end-position.start;return position},Typable.prototype._setSelection=function(start,end){var that=this.input.get(0);if(void 0===that.selectionStart){that.focus();var r=that.createTextRange();r.collapse(!0),r.moveEnd("character",end),r.moveStart("character",start),r.select()}else that.selectionStart=start,that.selectionEnd=end},Typable.prototype.buildAttachment=function(position){("string"!=typeof position||""==$.trim(position))&&(position="object"!=typeof this.options.attachment||"string"!=typeof this.options.attachment.position?"left":this.options.attachment.position),this.inputAttachment=$("<span />",{"class":"attachment"}),"string"==typeof this.options.attachment.customClassName&&this.inputAttachment.addClass(this.options.attachment.customClassName),"right"==position?(this.inputAttachment.addClass("right"),this.inputAttachment.appendTo(this.container)):"left"==position&&this.inputAttachment.prependTo(this.container)},Typable.prototype._setupCounter=function(){var self=this;this.countContainer=$("<span />",{"class":"input-counter",id:"cs-field-length-count-"+this.inputId}).insertAfter(this.input);var remainingChars=this.options.maxLength;if("string"==typeof this.options.placeholder&&this.getValue()!=this.options.placeholder&&(remainingChars=this._getRemainingChars()),this._updateCounter(remainingChars),this.isTextArea){this.countContainer.addClass("textarea-counter");var counterHeight=this.countContainer.height();"boolean"==typeof this.options.maxLengthOnSameLine&&(this.options.inlineCounter=this.options.maxLengthOnSameLine),("boolean"!=typeof this.options.inlineCounter||0==this.options.inlineCounter)&&this.input.css("padding-bottom",parseInt(this.input.css("padding-bottom").replace("px",""))+counterHeight+"px")}else{"number"==typeof this.options.maxLengthWidth&&(this.options.counterWidth=this.options.maxLengthWidth);var counterWidth="number"==typeof this.options.counterWidth?this.options.counterWidth:this.countContainer.width();this.input.css("padding-right",parseInt(this.input.css("padding-right").replace("px",""))+counterWidth+"px")}this.input.on("keydown.typableCounter paste.typableCounter",function(e){setTimeout(function(){self._updateCounter(self._getRemainingChars())},1)})},Typable.prototype._getRemainingChars=function(){return this.options.maxLength-this.getValue().length},Typable.prototype._updateCounter=function(val){return"undefined"==typeof this.countContainer?!1:(val>=0?this.countContainer.removeClass("count-negative").addClass("count-positive"):this.countContainer.removeClass("count-positive").addClass("count-negative"),void this.countContainer.text(val))},Typable.prototype._setupResize=function(){var self=this;if(!this.isTextArea)return!1;if(("number"!=typeof this.options.expandMin||0==this.options.expandMin)&&(this.options.expandMin=28),"number"!=typeof this.options.expandMax&&(this.options.expandMax=300),this.measureData={},this.measureData.container=$("<div />").appendTo("body"),this.measureData.css={position:"absolute",display:"none","font-family":this.input.css("font-family"),"font-size":this.input.css("font-size"),"letter-spacing":this.input.css("letter-spacing"),"line-height":this.input.css("line-height"),"word-wrap":"break-word","white-space":"pre-wrap","padding-top":this.input.css("padding-top"),"padding-right":this.input.css("padding-right"),"padding-bottom":this.input.css("padding-bottom"),"padding-left":this.input.css("padding-left"),"border-top-width":this.input.css("border-top-width"),"border-right-width":this.input.css("border-right-width"),"border-bottom-width":this.input.css("border-bottom-width"),"border-left-width":this.input.css("border-left-width"),"border-top-style":"solid","border-right-style":"solid","border-bottom-style":"solid","border-left-style":"solid","border-top-color":"#000000","border-right-color":"#000000","border-bottom-color":"#000000","border-left-color":"#000000"},this.measureData.boxSizing=this.input.css("box-sizing")||this.input.css("-moz-box-sizing")||!1,this.measureData.boxSizing){var boxSizingPrefix=this.input.css("-moz-box-sizing")?"-moz-":"";this.measureData.css[boxSizingPrefix+"box-sizing"]=this.measureData.boxSizing}this.measureData.container.css(this.measureData.css),$(window).on("resize.inputMeasure_"+this.inputId,function(e){self._setMeasureContainerWidth()}),this._displayStateWatch(),this.input.off("keydown.inputMeasure paste.inputMeasure").on("keydown.inputMeasure paste.inputMeasure",function(e){triggerResize=!0,"boolean"==typeof self.options.ignoreEnterKey&&1==self.options.ignoreEnterKey&&(13!=e.keyCode||e.shiftKey||(triggerResize=!1)),triggerResize&&setTimeout(function(){self._resize()},1)}),setTimeout(function(){self._resize()},1)},Typable.prototype._resize=function(){var self=this,value=this.getValue();this.measureData.container.text(value+"a"),this._setMeasureContainerWidth();var height=null;setTimeout(function(){height="border-box"==self.measureData.boxSizing?self.measureData.container.outerHeight():self.measureData.container.height(),self.input.css("overflow","hidden"),"undefined"!=typeof self.countContainer&&self.countContainer.removeClass("shifted"),height>self.options.expandMax?(height=self.options.expandMax,self.input.css("overflow","auto"),"undefined"!=typeof self.countContainer&&self.countContainer.addClass("shifted")):height<self.options.expandMin&&(height=self.options.expandMin),self.input.css("height",height+"px")},1)},Typable.prototype._setMeasureContainerWidth=function(){this.measureData.container.width(this.input.width())},Typable.prototype._displayStateWatch=function(){var self=this;cs.watchedResizableTextareas;this.input.parents().filter(function(){if("none"==$(this).css("display")){var watchId=Math.floor(100000001*Math.random());if("string"!=typeof $(this).attr("id")||""==$(this).attr("id"))var watchedElemId="csWatchedElem"+watchId;else var watchedElemId=$(this).attr("id");cs.watchedResizableTextareas.hasOwnProperty(watchedElemId)||(cs.watchedResizableTextareas[watchedElemId]=[]),cs.watchedResizableTextareas[watchedElemId].push(self),$(this).watch({properties:"display",interval:2e4,id:"displayWatcher"+watchId,watchChildren:!1,callback:function(data,i){var affectedTextareas=cs.watchedResizableTextareas[watchedElemId];for(var i in affectedTextareas)affectedTextareas[i]._resize()}})}})},Typable.prototype.blur=function(){return this.input.blur(),this},Typable.prototype.focus=function(){return this.input.focus(),this},extend(Typable,Autocomplete),Autocomplete.prototype._build=function(){var self=this;this.drop=new Droppable(this,{dropWidth:this.options.dropWidth||!1,dropHeight:this.options.dropHeight||!1,minDropWidth:this.options.minDropWidth||!1,maxDropWidth:this.options.maxDropWidth||!1,maxDropHeight:this.options.maxDropHeight||300,forceFullWidth:"boolean"==typeof this.options.forceDropFullWidth?this.options.forceDropFullWidth:!0,customClassName:this.options.dropClassName||!1,dropOnHover:!1,dropOffsetX:this.options.dropOffsetX||!1,dropOffsetY:this.options.dropOffsetY||!1,onMouseLeave:function(){this.list.highlightElement(!1)}});var listOptions={showTick:!1,allowHTML:this.options.allowHTML||!1,customClassName:this.options.listClassName||!1,onSelect:function(item){self.submit(item)}};return this.list=this.drop.buildContent("list",null,listOptions),!1===this.list||this.list.buildErr?!1:(this.off("click.showDrop"),this.on("click.autocompleteDefault",function(e){(self.options.selectAllOnFocus||!self.options.allowFreeText)&&self.input.select()}),this.on("blur.submitOnBlur",function(e){if(!self.doBlur())return!1;var sel=self.validSelection(!0);!1!==sel?self.submit(sel):self.cancel()}),this.on("keyup.autocompleteDefault",function(e){switch(self.lastKeyPressCode=e.keyCode,e.keyCode){case 38:case 40:break;case 9:case 13:if(!1===self.list.highlightedIndex)if(""!=$.trim(self.input.val())){var val=self.validSelection(!0);!1!==val?self.submit(val):this.cancel()}else this.cancel();break;default:self.onType()}}),void this.on("results.autocompleteDefault",function(data){self.list.empty(!0),$.isArray(data)&&0<data.length?(self.drop.show(),self.list.setList(data)):self.drop.hide()}))},Autocomplete.prototype.onType=function(){var q=this.input.val();q.length>=this.options.minChars?this.search(q):(this.drop.hide(),this.list.empty(!0))},Autocomplete.prototype.cancel=function(forceBlur){this.drop.hide(),this.list.empty(!0),this.input.val(""),"undefined"!=typeof this.hiddenInput&&this.hiddenInput.val(""),"undefined"!=typeof this.value&&(null!==this.value&&this.trigger("change",null),this.value=null),("undefined"==typeof forceBlur||1==forceBlur)&&this.forceBlur()},Autocomplete.prototype.submit=function(item){if("function"==typeof this.options.submitFilter&&!this.options.submitFilter.call(this,item))return!1;this.drop.hide(),this.list.highlightElement(!1);var changed=!1;"undefined"!=typeof this.value&&(cs.algorithms().sameObject(item,this.value)||(changed=!0),this.value=item),this.input.val(item.text),"undefined"!=typeof this.hiddenInput&&this.hiddenInput.val(item.value),this.trigger("submit",item),changed&&this.trigger("change",item),this.forceBlur()},Autocomplete.prototype.search=function(q){var self=this;if("string"!=typeof q||""==$.trim(q))return!1;if(q=$.trim(q),this.options.matchCase||(q=q.toLowerCase()),q==this.currentQuery&&q.length>this.options.minChars)return!0;this.currentQuery=q;var data=0<this.options.cacheSize?this.loadFromCache(q):null;$.isArray(data)&&0<data.length?this.trigger("results",[data]):"string"==typeof this.options.url&&""!=$.trim(this.options.url)&&(clearTimeout(this.searchTimeout),!1!==this.currentRequest&&this.currentRequest.abort(),this.searchTimeout=setTimeout(function(){self.currentRequest=$.get(self.getQueryUrl(q),function(data){self.currentRequest=!1,data=self.parseData(data),self.addToCache(q,data),self.trigger("results",[data])},"json")},this.options.delay))},Autocomplete.prototype.getQueryUrl=function(q){var urlQueryString=cs.algorithms().parseUrl(this.options.url).search,url=this.options.url+(urlQueryString?"&":"?")+this.options.queryParam+"="+encodeURI(q);for(var param in this.options.extraParams)url+="&"+param+"="+encodeURI(this.options.extraParams[param]);return url},Autocomplete.prototype.parseData=function(data){if("undefined"==typeof data||!$.isArray(data))return[];if("function"==typeof this.options.resultParser){var results=[];for(var k in data)results.push(this.options.resultParser(data[k]));return results}return data},Autocomplete.prototype.addToCache=function(q,data){return"number"!=typeof this.options.cacheSize||0==this.options.cacheSize?!1:"string"!=typeof q||""==$.trim(q)?!1:"undefined"!=typeof data&&$.isArray(data)?(this.cache.length>this.options.cacheSize?(this.flushCache(),this.cache.length++):"undefined"==typeof this.cache[q]&&this.cache.length++,void(this.cache.data[q]=data)):!1},Autocomplete.prototype.loadFromCache=function(q){if("string"!=typeof q||""==$.trim(q))return null;if(this.cache.data[q])return this.cache.data[q];if(this.options.matchSubset)for(var i=q.length-1;i>=this.options.minChars;i--){var qs=q.substr(0,i);if("undefined"!=typeof this.cache.data[qs]){var c=this.cache.data[qs],csub=[];for(var j in c)this.matchSubset(c[j].text,q)&&csub.push(c[j]);if(0<csub.length)return csub}}return null},Autocomplete.prototype.matchSubset=function(word,q){this.options.matchCase||(word=word.toLowerCase());var i=word.indexOf(q);return-1==i?!1:0==i||this.options.matchContains},Autocomplete.prototype.flushCache=function(){this.cache={},this.cache.data={},this.cache.length=0},Autocomplete.prototype.validSelection=function(getItem){if("boolean"!=typeof getItem&&(getItem=!1),!1!==this.list.highlightedIndex)return getItem?this.list.listContent[this.list.highlightedIndex]:!0;if("undefined"!=typeof this.value&&null!==this.value&&""!=$.trim(this.input.val())&&$.trim(this.input.val())==this.value.text)return getItem?this.value:!0;if(this.options.allowFreeText&&""!=$.trim(this.input.val())){if(getItem){var freeTextItem={text:this.input.val(),value:this.input.val()};return"function"==typeof this.options.freeTextFormatter&&(freeTextItem=this.options.freeTextFormatter.call(this,this.input.val())),freeTextItem}return!0}return!1},Autocomplete.prototype.forceBlur=function(){this.forcedBlur=!0,this.input.blur()},Autocomplete.prototype.doBlur=function(){return this.forcedBlur?(this.forcedBlur=!1,!1):!0},Cs.prototype.builder=function(){var self=this;return new CsBuilder({_parent:self})},CsBuilder.prototype.formatOptions=function(options){return"object"!=typeof options&&(options={}),options=$.extend(!0,{_parent:this._parent},options)},CsBuilder.prototype.button=function(containerId,options){return new CsButton(containerId,this.formatOptions(options))},CsBuilder.prototype.dropdown=function(containerId,list,options){return new CsDropdown(containerId,list,this.formatOptions(options))},CsBuilder.prototype.dropPanel=function(containerId,targetId,options){return new CsDropPanel(containerId,targetId,this.formatOptions(options))},CsBuilder.prototype.input=function(targetId,options){return new CsInput(targetId,this.formatOptions(options))},CsBuilder.prototype.autocomplete=function(targetId,options){return new CsAutocomplete(targetId,this.formatOptions(options))},CsBuilder.prototype.taglist=function(targetId,options){return new CsTaglist(targetId,this.formatOptions(options))},CsBuilder.prototype.uiSlider=function(targetId,options){return new CsUISlider(targetId,this.formatOptions(options))},CsBuilder.prototype.uiDater=function(targetId,options){return new CsUIDater(targetId,this.formatOptions(options))},extend(Clickable,CsButton),CsButton.prototype.showLoader=function(){return"undefined"==typeof this.loaderContainer&&(this.loaderContainer=$("<span />",{"class":"progress-indicator"}).hide().prependTo(this.captionContainer),$("<i />",{"class":"fa fa-refresh fa-spin"}).prependTo(this.loaderContainer)),this.captionTitleContainer.hide(),"undefined"!=typeof this.captionIcon&&this.captionIcon.hide(),this.loaderContainer.show(),this},CsButton.prototype.hideLoader=function(){return"undefined"!=typeof this.loaderContainer&&this.loaderContainer.hide(),this.captionTitleContainer.show(),"undefined"!=typeof this.captionIcon&&this.captionIcon.show(),this},CsButton.prototype.setupLoaderToggling=function(){var self=this;$(document).off("ajaxSend."+self.id).on("ajaxSend."+self.id,function(e,xhr,settings){$("#"+self.id).length||($(document).off("ajaxSend."+self.id),$(document).off("ajaxComplete."+self.id)),self.normalizeLoaderUrl(self.options.loaderToggleUrl)==self.normalizeLoaderUrl(settings.url)&&(self.disable(),self.showLoader())}),$(document).off("ajaxComplete."+self.id).on("ajaxComplete."+self.id,function(e,xhr,settings){self.normalizeLoaderUrl(self.options.loaderToggleUrl)==self.normalizeLoaderUrl(settings.url)&&(self.enable(),self.hideLoader())})},CsButton.prototype.normalizeLoaderUrl=function(url){if(""==$.trim(url))return!1;var clean_prefixes=["site_url","site_url_ssl","site_url_main","resource_url"];for(var i in clean_prefixes)if("undefined"!=typeof cs.options[clean_prefixes[i]]&&""!=$.trim(cs.options[clean_prefixes[i]])&&0==url.indexOf(cs.options[clean_prefixes[i]])){url=url.substr(cs.options[clean_prefixes[i]].length);break}return 0!=url.indexOf("/")&&(url="/"+url),url},extend(Clickable,CsDropdown),CsDropdown.prototype.initDropdown=function(){var self=this;self.initializing=!0,"string"==typeof this.options.name&&""!=$.trim(this.options.name)&&(this.hiddenInput=$('<input type="hidden" />').attr("name",this.options.name).appendTo(this.container)),("boolean"!=typeof this.options.fullWidth||0==this.options.fullWidth)&&this.container.addClass("inline"),"boolean"==typeof this.options.titleStay&&(this.options.allowCaptionUpdate=!this.options.titleStay),this.buildCaptionIcon("captionArrow","right","arrow"),this.drop=new Droppable(this,{size:this.options.size||!1,color:this.options.color||!1,customClassName:this.options.dropClassName||!1,dropWidth:this.options.dropWidth||!1,dropHeight:this.options.dropHeight||!1,maxDropWidth:this.options.maxDropWidth||!1,maxDropHeight:this.options.maxDropHeight||!1,dropOffsetX:this.options.dropOffsetX||!1,dropOffsetY:this.options.dropOffsetY||!1,dropOnHover:this.options.dropOnHover||!1,forceFullWidth:this.options.forceFullWidth||!0});var listOptions={onPreselect:function(item){self.defaultOnSelect(item)},onSelect:function(item){self.defaultOnSelect(item),self.drop.hide(),self.initializing||self.trigger("select",item)},onChange:function(newItem,oldItem){self.trigger("change",[newItem,oldItem])},onChange:function(item){self.trigger("change",item)},showTick:this.options.showTick||!1,customClassName:this.options.listClassName||!1};return("string"!=typeof this.options.title||""==$.trim(this.options.title))&&(listOptions.selectDefault=!0),this.list=this.drop.buildContent("list",this.listContent,listOptions),!1===this.list||this.list.buildErr?!1:void(self.initializing=!1)},CsDropdown.prototype.defaultOnSelect=function(item){this.value=item.value,this.updateCaption(item),"undefined"!=typeof this.hiddenInput&&this.hiddenInput.val(item.value)},CsDropdown.prototype.updateCaption=function(item){var self=this;if(this.options.allowCaptionUpdate){var captionTitle="";captionTitle=item.text.replace(/&gt;/g,">").replace(/&lt;/g,"<"),this.setTitle(captionTitle,this.captionArrow),"string"==typeof item.hoverText&&""!=$.trim(item.hoverText)?(this.container.off("mouseenter.captionHoverText"),this.container.on("mouseenter.captionHoverText",function(){self.captionContainer.css("width",self.captionContainer.width()+"px"),self.setTitle(item.hoverText)}),this.container.off("mouseleave.captionHoverText"),this.container.on("mouseleave.captionHoverText",function(){self.setTitle(captionTitle),self.captionContainer.css("width","")})):(this.container.off("mouseenter.captionHoverText"),this.container.off("mouseleave.captionHoverText")),"object"==typeof item.icon&&1==this.options.useIcons?("undefined"!=typeof this.captionIcon?this.captionIcon.empty():this.buildCaptionIcon(),this.buildIcon(this.captionIcon,item.icon)):"undefined"!=typeof this.captionIcon&&(this.captionIcon.remove(),delete this.captionIcon)}},CsDropdown.prototype.getValue=function(){return!1===this.value?"":this.value},CsDropdown.prototype.hasValue=function(){return!1===this.value||""==$.trim(this.getValue())?!1:!0},CsDropdown.prototype.getIndexByValue=function(value){return this.list.getIndexByValue(value)},CsDropdown.prototype.getText=function(index){return this.list.getText(index)},CsDropdown.prototype.selectOption=function(index,triggerEvents){"boolean"!=typeof triggerEvents&&(triggerEvents=!0),this.list.selectElement(null,index,triggerEvents)},CsDropdown.prototype.selectOptionByValue=function(value,triggerEvents){"boolean"!=typeof triggerEvents&&(triggerEvents=!0);var index=this.list.getIndexByValue(value);this.selectOption(index,triggerEvents)},CsDropdown.prototype.getSelectedIndex=function(){return this.list.selectedIndex},CsDropdown.prototype.reset=function(){var defaultIndex=this.list.reset();!1===defaultIndex&&"string"==typeof this.options.title&&""!=$.trim(this.options.title)&&this.setTitle(this.options.title)},extend(Clickable,CsDropPanel),CsDropPanel.prototype.initDropPanel=function(targetId){("boolean"!=typeof this.options.fullWidth||0==this.options.fullWidth)&&this.container.addClass("inline"),this.buildCaptionIcon("captionArrow","right","arrow");var dropOptions={dropRight:this.options.dropRight||!1,dropWidth:this.options.dropWidth||!1,dropHeight:this.options.dropHeight||!1,maxDropWidth:this.options.maxDropWidth||!1,maxDropHeight:this.options.maxDropHeight||!1,dropOffsetX:this.options.dropOffsetX||-7,dropOffsetY:this.options.dropOffsetY||-7,dropOnHover:"boolean"==typeof this.options.dropOnHover?this.options.dropOnHover:!0,customClassName:"drop-panel"+("string"==typeof this.options.dropClassName?" "+this.options.dropClassName:""),padding:"undefined"!=typeof this.options.dropPadding?this.options.dropPadding:20};this.drop=new Droppable(this,dropOptions),this.content=this.drop.buildContent("div",targetId)},CsDropPanel.prototype.hide=function(){this.drop.hide()},extend(Typable,CsInput),CsInput.prototype.initInput=function(){this.disabled&&this.disable(),this.options.borderArrow&&(this.container.addClass("arrow-"+this.options.borderArrowPosition),this.borderArrowElement=$("<div />",{"class":"arrow"}).appendTo(this.container),"number"!=typeof this.options.borderArrowIndent?this.borderArrowElement.addClass("centered"):-1!=["top","bottom"].indexOf(this.options.borderArrowPosition)?this.borderArrowElement.css("left",this.options.borderArrowIndent+"px"):-1!=["left","right"].indexOf(this.options.borderArrowPosition)&&this.borderArrowElement.css("top",this.options.borderArrowIndent+"px"))},extend(Autocomplete,CsAutocomplete),CsAutocomplete.prototype.initAutocomplete=function(){var self=this,inputName=this.input.attr("name");"undefined"!=typeof inputName&&inputName!==!1&&(this.input.attr("name",""),this.hiddenInput=$('<input type="hidden" />').attr("name",inputName).insertAfter(this.input)),"object"==typeof this.options["default"]&&(this.value=this.options["default"],this.input.val(this.value.text),"undefined"!=typeof this.hiddenInput&&this.hiddenInput.val(this.value.value)),this.off("blur.submitOnBlur").on("blur.submitOnBlur",function(e){if(!self.doBlur())return!1;var sel=self.validSelection(!0);!1!==sel?"undefined"!=typeof self.value&&cs.algorithms().sameObject(sel,self.value,!0)||self.submit(sel):self.cancel()})},CsAutocomplete.prototype.getValue=function(returnItem){return"boolean"!=typeof returnItem&&(returnItem=!1),null===this.value?null:returnItem?this.value:this.value.value},extend(Autocomplete,CsTaglist),CsTaglist.prototype.initTaglist=function(){var self=this,inputContainer=$("<div />",{"class":"taglist-source"});this.input.wrap(inputContainer),this.inputContainer=this.input.parent(),this.inputContainer.hide(),this.tagWrapper=$("<div />").addClass("taglist-wrapper").prependTo(this.container),"object"==typeof this.options.icon&&(this.iconContainer=$("<span />").addClass("icon").prependTo(this.tagWrapper),this.buildIcon(this.iconContainer,this.options.icon)),
this.tagContainer=$("<ul />").addClass("taglist-tags").appendTo(this.tagWrapper),"string"==typeof this.options.tagPlaceholder&&""!=$.trim(this.options.tagPlaceholder)&&(this.tagContainer.hide(),this.placeholder=$("<div />").addClass("taglist-placeholder").text(this.options.tagPlaceholder).appendTo(this.tagWrapper),this.tagWrapper.addClass("empty")),this.off("blur.submitOnBlur"),this.container.on("click.showSearch",function(){self.disabled||self.showSearch()}),$(document).on("click.hideSearch_"+this.id,function(e){self.onWindowClick(e)})},CsTaglist.prototype.showSearch=function(){var self=this;return this.opened?(this.input.focus(),this):(this.inputContainer.stop(!0,!0).slideDown(30,function(){self.input.focus(),self.container.addClass("focused"),"undefined"!=typeof self.placeholder&&0==self.tagCount()&&self.placeholder.hide(),$.isArray(self.list.listContent)&&0<self.list.listContent.length&&self.drop.show(),self.trigger("showsearch")}),this.opened=!0,this)},CsTaglist.prototype.hideSearch=function(){var self=this;return this.opened?("undefined"!=typeof this.placeholder&&0==this.tagCount()&&this.placeholder.show(),this.inputContainer.stop(!0,!0).slideUp(30,function(){self.container.removeClass("focused"),self.trigger("hidesearch")}),this.cancel(),this.opened=!1,this):this},CsTaglist.prototype.onWindowClick=function(e){if(this.opened){if(e.target.id==this.id)return;var el_id2=$(e.target).parents("#"+this.id).attr("id");if(el_id2)return;this.hideSearch()}},CsTaglist.prototype.tagCount=function(){var count=0;for(var key in this.tags)this.tags.hasOwnProperty(key)&&count++;return count},CsTaglist.prototype.buildTag=function(tagData,triggerEvents){if("string"!=typeof tagData.text||""==$.trim(tagData.text))return!1;"boolean"!=typeof triggerEvents&&(triggerEvents=!0),0==this.tagCount()&&(this.tagContainer.show(),this.tagWrapper.removeClass("empty"),"undefined"!=typeof this.placeholder&&this.placeholder.hide());var tagId="tag"+Math.floor(100000001*Math.random());return this.tags[tagId]=tagData,this.tags[tagId].tagObj=$("<li />").addClass("tag").data("tagId",tagId).appendTo(this.tagContainer),this._setTagLabel(tagId,tagData),triggerEvents&&this.trigger("tagadd",this.tags[tagId]),this.tags[tagId].tagObj},CsTaglist.prototype._setTagLabel=function(tagId,tagData){var self=this;return"undefined"==typeof this.tags[tagId]?!1:(this.tags[tagId].tagObj.empty(),"boolean"==typeof this.options.allowHTML&&1==this.options.allowHTML&&"string"==typeof tagData.html&&""!=$.trim(tagData.html)?this.tags[tagId].tagObj.html(tagData.html):this.tags[tagId].tagObj.text(tagData.text),void(this.options.deletableTags&&(this.tags[tagId].tagObj.addClass("deletable"),$("<a />").addClass("deletebutton").on("click",function(e){self.removeTag(tagId),e.preventDefault(),e.stopPropagation()}).appendTo(this.tags[tagId].tagObj))))},CsTaglist.prototype.removeTag=function(tagId,triggerEvents){return"string"!=typeof tagId||""==$.trim(tagId)?!1:"undefined"==typeof this.tags[tagId]?!1:("boolean"!=typeof triggerEvents&&(triggerEvents=!0),triggerEvents&&"function"==typeof this.tags[tagId].onRemove&&this.tags[tagId].onRemove.call(this,this.tags[tagId]),this.tags[tagId].tagObj.remove(),this.tags[tagId]=null,delete this.tags[tagId],0==this.tagCount()&&(this.tagContainer.hide(),this.tagWrapper.addClass("empty"),"undefined"!=typeof this.placeholder&&this.placeholder.show()),this.opened&&this.input.focus(),triggerEvents&&this.trigger("tagremove",this.tags[tagId]),!0)},CsTaglist.prototype.submit=function(item,triggerEvents){return"function"==typeof this.options.beforeSubmit&&this.options.beforeSubmit.call(this,item),"function"!=typeof this.options.submitFilter||this.options.submitFilter.call(this,item)?("boolean"!=typeof triggerEvents&&(triggerEvents=!0),this.drop.hide(),(this.options.allowDuplicates||!1===this.getTagByValue(item.value))&&(this.buildTag(item,triggerEvents),triggerEvents&&this.trigger("submit",item)),this.drop.hide(),this.list.highlightElement(!1),void this.input.val("")):!1},CsTaglist.prototype.getTagsByProperty=function(prop,value){if("string"!=typeof prop||""==$.trim(prop))return[];"undefined"==typeof value&&(value=null);var results={};for(var tagId in this.tags)"undefined"!=typeof this.tags[tagId][prop]&&(null!==value?cs.algorithms().sameObject(value,this.tags[tagId][prop])&&(results[tagId]=this.tags[tagId]):results[tagId]=this.tags[tagId]);return results},CsTaglist.prototype.getTagByValue=function(val){if("string"==typeof val&&""==$.trim(val))return!1;var tags=this.getTagsByProperty("value",val),tagIds=Object.keys(tags);return 0<tagIds.length?tags[tagIds[0]]:!1},CsTaglist.prototype.replace=function(tagId,item,triggerEvents){if("undefined"==typeof this.tags[tagId])return!1;"boolean"!=typeof triggerEvents&&(triggerEvents=!0),this._setTagLabel(tagId,item);for(var prop in item)this.tags[tagId][prop]=item[prop];return triggerEvents&&this.trigger("submit",item),!0},extend(Component,CsUISlider),CsUISlider.prototype.initSlider=function(){var self=this;this.target=$("<span />").attr("id",this.id+"_slider").prependTo(this.container),this.options.addWrapper&&this.container.addClass("ui-slider-wrapper"),"undefined"!=typeof this.options.outputTarget&&null!==this.options.outputTarget&&(this.options.outputTarget instanceof jQuery?this.outputTarget=this.options.outputTarget:"string"==typeof this.options.outputTarget&&""!=$.trim(this.options.outputTarget)&&(this.outputTarget=$("#"+this.options.outputTarget)));var sliderOptions=$.extend({},this.options);if(sliderOptions.slide=function(e,ui){"undefined"!=typeof self.outputTarget&&self.outputTarget.text(self.getRangeString(self.getValue(!0,ui))),self.trigger("move",[self.getValue(!1,ui),self.getRangeString(self.getValue(!0,ui))])},sliderOptions.start=function(e,ui){self.trigger("start",[self.getValue(!1,ui),self.getRangeString(self.getValue(!0,ui))])},sliderOptions.stop=function(e,ui){self.trigger("stop",[self.getValue(!1,ui),self.getRangeString(self.getValue(!0,ui))])},!0===this.options.range)if($.isArray(this.options.values)){var sliderMin=this.options.proportional?this.invertProportional(this.options.values[0]):this.options.values[0],sliderMax=this.options.proportional?this.invertProportional(this.options.values[this.options.values.length-1]):this.options.values[this.options.values.length-1];sliderOptions.values=[sliderMin,sliderMax]}else sliderOptions.values=[this.options.min,this.options.max];else{var sliderVal=this.options.proportional?this.invertProportional(this.options.value):this.options.value;sliderOptions.value=sliderVal}this.target.slider(sliderOptions)},CsUISlider.prototype.getValue=function(rawOutput,ui){"boolean"!=typeof rawOutput&&(rawOutput=!1);var val=null;return val="object"!=typeof ui||"undefined"!=typeof ui.value&&"undefined"==typeof ui.values?!0===this.options.range?this.target.slider("values"):this.target.slider("value"):"undefined"!=typeof ui.values&&$.isArray(ui.values)?ui.values:ui.value,this.processValues(val,rawOutput)},CsUISlider.prototype.setValue=function(val,adjustProportional){if("boolean"!=typeof adjustProportional&&(adjustProportional=!0),"number"==typeof val)val=this.options.proportional&&adjustProportional?this.invertProportional(val):val,this.target.slider("value",val);else if("object"==typeof val&&$.isArray(val)){for(var k in val)val[k]=this.options.proportional&&adjustProportional?this.invertProportional(val[k]):val[k];this.target.slider("values",val)}"undefined"!=typeof this.outputTarget&&this.outputTarget.text(this.getRangeString(this.getValue(!0)))},CsUISlider.prototype.reset=function(){!0===this.options.range?$.isArray(this.options.values)?this.setValue(this.options.values):this.setValue([this.options.min,this.options.max],!1):"number"==typeof this.options.value?this.setValue(this.options.value):"min"===this.options.range?this.setValue(this.options.max,!1):this.setValue(this.options.min,!1)},CsUISlider.prototype.getProportional=function(val){return this.options.proportionalMin+(val-this.options.min)/(this.options.max-this.options.min)*(this.options.proportionalMax-this.options.proportionalMin)},CsUISlider.prototype.invertProportional=function(pVal){return this.options.min+(pVal-this.options.proportionalMin)/(this.options.proportionalMax-this.options.proportionalMin)*(this.options.max-this.options.min)},CsUISlider.prototype.processValues=function(val,rawOutput){var result={};return!1===this.options.range?!0===this.options.proportional?this.getProportional(val):val:("max"===this.options.range?(result.minEdge=val==this.options.min,result.min=!0===this.options.proportional?this.getProportional(val):val,result.maxEdge=!0,result.max=!0===this.options.proportional?this.options.proportionalMax:this.options.max):"min"===this.options.range?(result.minEdge=!0,result.min=!0===this.options.proportional?this.options.proportionalMin:this.options.min,result.maxEdge=val==this.options.max,result.max=!0===this.options.proportional?this.getProportional(val):val):(result.minEdge=val[0]==this.options.min,result.min=!0===this.options.proportional?this.getProportional(val[0]):val[0],result.maxEdge=val[val.length-1]==this.options.max,result.max=!0===this.options.proportional?this.getProportional(val[val.length-1]):val[val.length-1]),"boolean"==typeof rawOutput&&rawOutput?result:(!0===this.options.ignoreEdges&&(result.minEdge&&delete result.min,result.maxEdge&&delete result.max),delete result.minEdge,delete result.maxEdge,result))},CsUISlider.prototype.getRangeString=function(val){var formatting=this.options.outputFormatting;if("undefined"==typeof val&&(val=this.getValue(!0)),"number"==typeof val)return"function"==typeof formatting.valueFormatter&&(val=formatting.valueFormatter(val)),formatting.prependUnit?formatting.unit+""+val:val+""+formatting.unit;for(var k in val)"number"==typeof val[k]&&("function"==typeof formatting.valueFormatter&&(val[k]=formatting.valueFormatter(val[k])),val[k]=formatting.prependUnit?formatting.unit+""+val[k]:val[k]+""+formatting.unit);if(formatting.includeEdgeValues||!val.minEdge&&!val.maxEdge)return val.min+" - "+val.max+(this.options.ignoreEdges&&val.maxEdge?formatting.maxEdgeSuffix:"");if(this.options.ignoreEdges){if(val.minEdge&&val.maxEdge)return formatting.noValuesPlaceholder;if(val.minEdge)return formatting.prependMinEdgeReached?formatting.minEdgeReached+" "+val.max:val.max+" "+formatting.minEdgeReached;if(val.maxEdge)return formatting.prependMaxEdgeReached?formatting.maxEdgeReached+" "+val.min:val.min+" "+formatting.maxEdgeReached}},extend(Component,CsUIDater),CsUIDater.prototype.initDater=function(){var self=this;if(this.buildContainer(),this.container.addClass("component-group"),this.options.hasDate){var dateInput=$('<input type="text" />').attr("id",this.id+"Date").appendTo(this.container);this.dateObject=new Typable("input dater",dateInput,{inline:!0,width:this.options.width||125}),this.dateObject.input.prop("readonly",!0),this.dateObject.input.datepicker({dateFormat:this.options.dateFormat,showOtherMonths:!0,selectOtherMonths:!0,beforeShow:function(input,inst){var picker=$("#ui-datepicker-div");self.resetPickerTemplate(picker),picker.data(self.options.pickerData),$("body").addClass("picker-open")},onClose:function(){$("body").removeClass("picker-open")}}).on("change",function(){"undefined"!=typeof self.hiddenInput&&self.hiddenInput.val(self.getValue()),self.trigger("change",self.getValue())}),$("<span />").addClass("divvet").on("click",function(){self.disabled||self.dateObject.input.datepicker("show")}).appendTo(this.dateObject.container)}if(this.options.hasTime){var timeInput=$('<input type="text" />').attr("id",this.id+"Time").appendTo(this.container);this.timeObject=new Typable("input dater",timeInput,{inline:!0,width:82}),this.timeObject.input.timepicker({timeFormat:this.options.timeFormat,scrollDefault:"now",disableTextInput:!0,disableTouchKeyboard:!0,stopScrollPropagation:!0,noneOption:[{label:"11:59 PM",value:"11:59 PM"}]}).on("showTimepicker",function(){var picker=$(".ui-timepicker-wrapper");picker.perfectScrollbar("destroy"),picker.perfectScrollbar(),self.resetPickerTemplate(picker),picker.data(self.options.pickerData),$("body").addClass("picker-open")}).on("hideTimepicker",function(){$("body").removeClass("picker-open")}).on("changeTime",function(){"undefined"!=typeof self.hiddenInput&&self.hiddenInput.val(self.getValue()),self.trigger("change",self.getValue())})}if("string"==typeof this.options.name&&""!=$.trim(this.options.name)&&(this.hiddenInput=$('<input type="hidden" />').attr("name",this.options.name).appendTo(this.container)),null!==this.options.value)this.setValue(this.options.value);else if(this.options.date||this.options.time){var val="";"string"==typeof this.options.date&&(val=this.options.date),"string"==typeof this.options.time&&(val=""==val?this.options.time:val+" "+this.options.time),""!=$.trim(val)&&this.setValue(val)}else this.options.defaultToday&&this.setValue(new Date);this.options.disabled&&this.disable()},CsUIDater.prototype.resetPickerTemplate=function(picker){picker.addClass("component");var pickerClasses=picker.attr("class");pickerClasses=pickerClasses.split(" ");for(var k in pickerClasses)(-1!=pickerClasses[k].indexOf("color-")||-1!=pickerClasses[k].indexOf("size-"))&&delete pickerClasses[k];pickerClasses=pickerClasses.join(" "),picker.attr("class","").attr("class",pickerClasses),"string"==typeof this.options.color&&""!=$.trim(this.options.color)&&picker.addClass("color-"+this.options.color),"string"==typeof this.options.size&&""!=$.trim(this.options.size)&&picker.addClass("size-"+this.options.size)},CsUIDater.prototype.getValue=function(output){"string"!=typeof output&&(output=null);var dateValue=this.options.hasDate?this.dateObject.input.datepicker("getDate"):new Date;if(null===dateValue)return null;if(this.options.hasTime&&(dateValue=this.timeObject.input.timepicker("getTime",dateValue)),null===dateValue)return null;var outputDate=this.getISODateString(dateValue);if(this.options.hasDate&&!this.options.hasTime||"date"===output)return outputDate;var outputTime=this.getISOTimeString(dateValue);return!this.options.hasDate&&this.options.hasTime||"time"===output?outputTime:outputDate+" "+outputTime},CsUIDater.prototype.getDate=function(){return this.options.hasDate?this.getValue("date"):null},CsUIDater.prototype.getTime=function(){return this.options.hasTime?this.getValue("time"):null},CsUIDater.prototype.setValue=function(value){return"string"==typeof value&&""==$.trim(value)?!1:"string"==typeof value||value instanceof Date?("string"==typeof value&&(1==value.split(" ").length&&this.options.hasTime&&-1!=value.indexOf(":")&&(value=this.getISODateString()+" "+value),value=new Date(value)),this.validDate(value)?(this.options.hasDate&&this.dateObject.input.datepicker("setDate",value),this.options.hasTime&&this.timeObject.input.timepicker("setTime",value),!0):!1):!1},CsUIDater.prototype.validDate=function(d){return"[object Date]"===Object.prototype.toString.call(d)?isNaN(d.getTime())?!1:!0:!1},CsUIDater.prototype.disable=function(){this.disabled=!0,this.container.addClass("disabled"),this.options.hasDate&&this.dateObject.disable(),this.options.hasTime&&this.timeObject.disable()},CsUIDater.prototype.enable=function(){this.disabled=!1,this.container.removeClass("disabled"),this.options.hasDate&&this.dateObject.enable(),this.options.hasTime&&this.timeObject.enable()},CsUIDater.prototype.getISODateString=function(date){if("undefined"!=typeof date&&!this.validDate(date))return!1;"undefined"==typeof date&&(date=new Date);var day=date.getDate();10>day&&(day="0"+day);var month=date.getMonth()+1;10>month&&(month="0"+month);var year=date.getFullYear();return year+"-"+month+"-"+day},CsUIDater.prototype.getISOTimeString=function(date){if("undefined"!=typeof date&&!this.validDate(date))return!1;"undefined"==typeof date&&(date=new Date);var minute=date.getMinutes();10>minute&&(minute="0"+minute);var hour=date.getHours();return 10>hour&&(hour="0"+hour),hour+":"+minute};